"use strict";(self.webpackChunkhacs_frontend=self.webpackChunkhacs_frontend||[]).push([[8518],{77222:function(t,e,r){function n(t){var e=t.language||"en";return t.translationMetadata.translations[e]&&t.translationMetadata.translations[e].isRTL||!1}function i(t){return o(n(t))}function o(t){return t?"rtl":"ltr"}r.d(e,{Vc:function(){return i},qC:function(){return n}})},66494:function(t,e,r){var n,i=r(6238),o=r(36683),a=r(89231),s=r(29864),c=r(83647),l=r(8364),u=(r(77052),r(58068)),h=r(5546),d=r(196),f=r(75538);(0,l.A)([(0,d.EM)("ha-button")],(function(t,e){var r=function(e){function r(){var e;(0,a.A)(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=(0,s.A)(this,r,[].concat(i)),t(e),e}return(0,c.A)(r,e),(0,o.A)(r)}(e);return{F:r,d:[{kind:"field",static:!0,key:"styles",value:function(){return[f.R,(0,h.AH)(n||(n=(0,i.A)(["::slotted([slot=icon]){margin-inline-start:0px;margin-inline-end:8px;direction:var(--direction);display:block}.mdc-button{height:var(--button-height,36px)}.trailing-icon{display:flex}.slot-container{overflow:var(--button-slot-container-overflow,visible)}"])))]}}]}}),u.$)},97836:function(t,e,r){var n=r(1781).A,i=r(94881).A;r.a(t,function(){var t=n(i().mark((function t(n,o){var a,s,c,l,u,h,d,f,p,_,v,m,g,y,w,k,b,A,x,P,z,q,C,R,M,E,L,D,I,T,V,O,S,F,G,J,W;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r.r(e),r.d(e,{HacsDonwloadDialog:function(){return W}}),a=r(6238),s=r(94881),c=r(1781),l=r(36683),u=r(89231),h=r(29864),d=r(83647),f=r(8364),p=r(77052),r.n(p),_=r(53501),r.n(_),v=r(848),r.n(v),r(58068),m=r(18971),g=r(5546),y=r(196),w=r(45081),k=r(33167),b=r(46531),A=r(77222),r(91074),r(66494),r(88762),r(93259),x=r(31447),P=r(13136),z=r(51285),q=r(93902),C=r(23240),R=r(83503),M=r(76646),!(E=n([m])).then){t.next=44;break}return t.next=40,E;case 40:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=45;break;case 44:t.t0=E;case 45:m=t.t0[0],W=(0,f.A)([(0,y.EM)("hacs-download-dialog")],(function(t,e){var r,n,i,o,f=function(e){function r(){var e;(0,u.A)(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=(0,h.A)(this,r,[].concat(i)),t(e),e}return(0,d.A)(r,e),(0,l.A)(r)}(e);return{F:f,d:[{kind:"field",decorators:[(0,y.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,y.wk)()],key:"_waiting",value:function(){return!0}},{kind:"field",decorators:[(0,y.wk)()],key:"_installing",value:function(){return!1}},{kind:"field",decorators:[(0,y.wk)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,y.wk)()],key:"_repository",value:void 0},{kind:"field",decorators:[(0,y.wk)()],key:"_dialogParams",value:void 0},{kind:"field",decorators:[(0,y.wk)()],key:"_selectedVersion",value:void 0},{kind:"method",key:"showDialog",value:(o=(0,c.A)((0,s.A)().mark((function t(e){var r=this;return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._dialogParams=e,this._waiting=!1,!e.repository){t.next=6;break}this._repository=e.repository,t.next=8;break;case 6:return t.next=8,this._fetchRepository();case 8:return this._repository&&"commit"!==this._repository.version_or_commit&&(this._selectedVersion=this._repository.available_version),(0,q.zl)(this.hass,(function(t){r._error=t,r._installing=!1}),P.a.ERROR),t.next=12,this.updateComplete;case 12:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{kind:"method",key:"closeDialog",value:function(){this._dialogParams=void 0,this._repository=void 0,this._error=void 0,this._installing=!1,this._waiting=!1,(0,k.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"field",key:"_getInstallPath",value:function(){return(0,w.A)((function(t){var e=t.local_path;return["template","theme","python_script"].includes(t.category)&&(e="".concat(e,"/").concat(t.file_name)),e}))}},{kind:"method",key:"_fetchRepository",value:(i=(0,c.A)((0,s.A)().mark((function t(){return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,z.vA)(this.hass,this._dialogParams.repositoryId);case 2:this._repository=t.sent;case 3:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{kind:"method",key:"render",value:function(){var t,e=this;if(!this._dialogParams||!this._repository)return g.s6;var r=this._getInstallPath(this._repository),n=[{name:"beta",selector:{boolean:{}}},{name:"version",selector:{select:{options:this._repository.releases.concat("hacs/integration"===this._repository.full_name||this._repository.hide_default_branch?[]:[this._repository.default_branch]),mode:"dropdown"}}}];return(0,g.qy)(L||(L=(0,a.A)([' <ha-dialog open scrimClickAction escapeKeyAction .heading="','" @closed="','"> <div class="content"> '," ",' <div class="note"> '," "," "," </div> "," ",' </div> <mwc-button slot="secondaryAction" @click="','" dialogInitialFocus> ',' </mwc-button> <mwc-button slot="primaryAction" ?disabled="','" @click="','"> '," </mwc-button> </ha-dialog> "])),this._repository.name,this.closeDialog,"version"===this._repository.version_or_commit&&this._repository.installed?(0,g.qy)(D||(D=(0,a.A)([' <ha-form .disabled="','" .data="','" .schema="','" .computeLabel="','" @value-changed="','"> </ha-form> <ha-alert alert-type="info" .rtl="','"> ',' <a class="learn_more" href="','" slot="action" target="_blank" rel="noreferrer"> ',"</a> </ha-alert> "])),this._waiting,"version"===this._repository.version_or_commit?{beta:this._repository.beta,version:this._selectedVersion}:{},n,(function(t){return"beta"===t.name?e._dialogParams.hacs.localize("dialog_download.show_beta"):e._dialogParams.hacs.localize("dialog_download.select_version")}),this._valueChanged,(0,A.qC)(this.hass),this._dialogParams.hacs.localize("dialog_download.selector_note"),(0,M.o)({path:"/docs/use/entities/update/#install-service"}),this._dialogParams.hacs.localize("common.learn_more")):g.s6,this._repository.can_download?"":(0,g.qy)(I||(I=(0,a.A)(['<ha-alert alert-type="error" .rtl="','"> '," </ha-alert>"])),(0,A.qC)(this.hass),this._dialogParams.hacs.localize("confirm.home_assistant_version_not_correct",{haversion:this.hass.config.version,minversion:this._repository.homeassistant})),this._dialogParams.hacs.localize("dialog_download.note_downloaded",{location:(0,g.qy)(T||(T=(0,a.A)(["<code>'","'</code>"])),r)}),"plugin"===this._repository.category&&"storage"!==this._dialogParams.hacs.info.lovelace_mode?(0,g.qy)(V||(V=(0,a.A)([" <p>","</p> <pre>\n                url: ","\n                type: module\n                </pre> "])),this._dialogParams.hacs.localize("dialog_download.lovelace_instruction"),(0,R.J)({repository:this._repository})):g.s6,"integration"===this._repository.category?(0,g.qy)(O||(O=(0,a.A)(["<p>","</p>"])),this._dialogParams.hacs.localize("dialog_download.restart")):g.s6,null!==(t=this._error)&&void 0!==t&&t.message?(0,g.qy)(S||(S=(0,a.A)(['<ha-alert alert-type="error" .rtl="','"> '," </ha-alert>"])),(0,A.qC)(this.hass),this._error.message):g.s6,this._installing?(0,g.qy)(F||(F=(0,a.A)(["<mwc-linear-progress indeterminate></mwc-linear-progress>"]))):g.s6,this.closeDialog,this._dialogParams.hacs.localize("common.cancel"),!this._repository.can_download||this._waiting||this._installing,this._installRepository,this._dialogParams.hacs.localize("common.download"))}},{kind:"method",key:"_valueChanged",value:(n=(0,c.A)((0,s.A)().mark((function t(e){var r;return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!1,this._repository.beta===e.detail.value.beta){t.next=6;break}return r=!0,this._waiting=!0,t.next=6,(0,q.rE)(this.hass,this._dialogParams.repositoryId,e.detail.value.beta);case 6:if(!e.detail.value.version){t.next=12;break}return r=!0,this._waiting=!0,t.next=11,(0,z.J2)(this.hass,this._dialogParams.repositoryId,e.detail.value.version);case 11:this._selectedVersion=e.detail.value.version;case 12:if(!r){t.next=16;break}return t.next=15,this._fetchRepository();case 15:this._waiting=!1;case 16:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{kind:"method",key:"_installRepository",value:(r=(0,c.A)((0,s.A)().mark((function t(){var e;return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._repository){t.next=2;break}return t.abrupt("return");case 2:if(!this._waiting){t.next=5;break}return this._error="Waiting to update repository information, try later.",t.abrupt("return");case 5:if(!this._installing){t.next=8;break}return this._error="Already installing, please wait.",t.abrupt("return");case 8:if(this._repository.can_download){t.next=11;break}return this._error="Can not download this repository.",t.abrupt("return");case 11:return this._installing=!0,this._error=void 0,this._repository.selected_tag||this._repository.available_version||this._repository.default_branch,t.prev=14,t.next=17,(0,z.l1)(this.hass,String(this._repository.id),"commit"!==(null===(e=this._repository)||void 0===e?void 0:e.version_or_commit)?this._selectedVersion:void 0);case 17:t.next=24;break;case 19:return t.prev=19,t.t0=t.catch(14),this._error=t.t0||{message:"Could not download repository, check core logs for more information."},this._installing=!1,t.abrupt("return");case 24:this._dialogParams.hacs.log.debug(this._repository.category,"_installRepository"),this._dialogParams.hacs.log.debug(this._dialogParams.hacs.info.lovelace_mode,"_installRepository"),this._installing=!1,"plugin"===this._repository.category&&(0,x.dk)(this,{title:this._dialogParams.hacs.localize("common.reload"),text:(0,g.qy)(G||(G=(0,a.A)(["","<br>",""])),this._dialogParams.hacs.localize("dialog.reload.description"),this._dialogParams.hacs.localize("dialog.reload.confirm")),dismissText:this._dialogParams.hacs.localize("common.cancel"),confirmText:this._dialogParams.hacs.localize("common.reload"),confirm:function(){b.G.location.href=b.G.location.href}}),void 0===this._error&&this.closeDialog();case 29:case"end":return t.stop()}}),t,this,[[14,19]])}))),function(){return r.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[C.k,(0,g.AH)(J||(J=(0,a.A)([".note{margin-top:12px}.lovelace{margin-top:8px}.learn_more{color:var(--hcv-text-color-primary)}pre{white-space:pre-line;user-select:all}mwc-linear-progress{margin-bottom:-8px;margin-top:4px}"])))]}}]}}),g.WF),o(),t.next=53;break;case 50:t.prev=50,t.t2=t.catch(0),o(t.t2);case 53:case"end":return t.stop()}}),t,null,[[0,50]])})));return function(e,r){return t.apply(this,arguments)}}())},51285:function(t,e,r){r.d(e,{J2:function(){return s},l1:function(){return a},vA:function(){return o}});var n=r(94881),i=r(1781),o=function(){var t=(0,i.A)((0,n.A)().mark((function t(e,r){return(0,n.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.connection.sendMessagePromise({type:"hacs/repository/info",repository_id:r}));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),a=function(){var t=(0,i.A)((0,n.A)().mark((function t(e,r,i){return(0,n.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.connection.sendMessagePromise({type:"hacs/repository/download",repository:r,version:i}));case 1:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),s=function(){var t=(0,i.A)((0,n.A)().mark((function t(e,r,i){return(0,n.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.connection.sendMessagePromise({type:"hacs/repository/version",repository:r,version:i}));case 1:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()},76646:function(t,e,r){r.d(e,{o:function(){return n}});var n=function(t){return"https://www.hacs.xyz".concat((null==t?void 0:t.path)||"")}},83503:function(t,e,r){r.d(e,{J:function(){return n}});r(77052);var n=function(t){return"/hacsfiles/".concat(t.repository.full_name.split("/")[1],"/").concat(t.repository.file_name)}},79372:function(t,e,r){var n=r(73155),i=r(33817),o=r(3429),a=r(75077);t.exports=function(t,e){e&&"string"==typeof t||i(t);var r=a(t);return o(i(void 0!==r?n(r,t):t))}},18684:function(t,e,r){var n=r(87568),i=r(42509),o=r(30356),a=r(51607),s=r(95124),c=r(79635);n({target:"Array",proto:!0},{flatMap:function(t){var e,r=a(this),n=s(r);return o(t),(e=c(r,0)).length=i(e,r,r,n,0,1,t,arguments.length>1?arguments[1]:void 0),e}})},74991:function(t,e,r){r(33523)("flatMap")},69704:function(t,e,r){var n=r(87568),i=r(73155),o=r(30356),a=r(33817),s=r(3429),c=r(79372),l=r(23408),u=r(44933),h=r(89385),d=l((function(){for(var t,e,r=this.iterator,n=this.mapper;;){if(e=this.inner)try{if(!(t=a(i(e.next,e.iterator))).done)return t.value;this.inner=null}catch(o){u(r,"throw",o)}if(t=a(i(this.next,r)),this.done=!!t.done)return;try{this.inner=c(n(t.value,this.counter++),!1)}catch(o){u(r,"throw",o)}}}));n({target:"Iterator",proto:!0,real:!0,forced:h},{flatMap:function(t){return a(this),o(t),new d(s(this),{mapper:t,inner:null})}})},44856:function(t,e,r){r.d(e,{N:function(){return o}});r(27934),r(77052),r(71936),r(43859),r(68113),r(55888);var n=function(t){var e=[];function r(r,n){t=n?r:Object.assign(Object.assign({},t),r);for(var i=e,o=0;o<i.length;o++)i[o](t)}return{get state(){return t},action:function(e){function n(t){r(t,!1)}return function(){for(var r=[t],i=0;i<arguments.length;i++)r.push(arguments[i]);var o=e.apply(this,r);if(null!=o)return o instanceof Promise?o.then(n):n(o)}},setState:r,clearState:function(){t=void 0},subscribe:function(t){return e.push(t),function(){!function(t){for(var r=[],n=0;n<e.length;n++)e[n]===t?t=null:r.push(e[n]);e=r}(t)}}}},i=function(t,e,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{unsubGrace:!0};if(t[e])return t[e];var a,s,c=0,l=n(),u=function(){if(!r)throw new Error("Collection does not support refresh");return r(t).then((function(t){return l.setState(t,!0)}))},h=function(){return u().catch((function(e){if(t.connected)throw e}))},d=function(){s=void 0,a&&a.then((function(t){t()})),l.clearState(),t.removeEventListener("ready",u),t.removeEventListener("disconnected",f)},f=function(){s&&(clearTimeout(s),d())};return t[e]={get state(){return l.state},refresh:u,subscribe:function(e){1===++c&&function(){if(void 0!==s)return clearTimeout(s),void(s=void 0);i&&(a=i(t,l)),r&&(t.addEventListener("ready",h),h()),t.addEventListener("disconnected",f)}();var n=l.subscribe(e);return void 0!==l.state&&setTimeout((function(){return e(l.state)}),0),function(){n(),--c||(o.unsubGrace?s=setTimeout(d,5e3):d())}}},t[e]},o=function(t,e,r,n,o){return i(n,t,e,r).subscribe(o)}},3358:function(t,e,r){r.d(e,{OA:function(){return n.OA},WL:function(){return n.WL},u$:function(){return n.u$}});var n=r(41611)}}]);
//# sourceMappingURL=8518.FZptJVwsPc4.js.map