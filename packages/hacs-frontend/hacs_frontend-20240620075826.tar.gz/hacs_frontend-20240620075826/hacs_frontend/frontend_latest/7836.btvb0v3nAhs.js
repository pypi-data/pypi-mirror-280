export const id=7836;export const ids=[7836];export const modules={77222:(i,o,t)=>{function e(i){const o=i.language||"en";return i.translationMetadata.translations[o]&&i.translationMetadata.translations[o].isRTL||!1}function a(i){return s(e(i))}function s(i){return i?"rtl":"ltr"}t.d(o,{Vc:()=>a,qC:()=>e})},66494:(i,o,t)=>{var e=t(62659),a=t(58068),s=t(5546),r=t(196),l=t(75538);(0,e.A)([(0,r.EM)("ha-button")],(function(i,o){return{F:class extends o{constructor(...o){super(...o),i(this)}},d:[{kind:"field",static:!0,key:"styles",value:()=>[l.R,s.AH`::slotted([slot=icon]){margin-inline-start:0px;margin-inline-end:8px;direction:var(--direction);display:block}.mdc-button{height:var(--button-height,36px)}.trailing-icon{display:flex}.slot-container{overflow:var(--button-slot-container-overflow,visible)}`]}]}}),a.$)},97836:(i,o,t)=>{t.a(i,(async(i,e)=>{try{t.r(o),t.d(o,{HacsDonwloadDialog:()=>w});var a=t(62659),s=(t(58068),t(18971)),r=t(5546),l=t(196),n=t(45081),d=t(33167),c=t(46531),h=t(77222),_=(t(91074),t(66494),t(88762),t(93259),t(31447)),p=t(13136),y=t(51285),m=t(93902),g=t(23240),u=t(83503),v=t(76646),f=i([s]);s=(f.then?(await f)():f)[0];let w=(0,a.A)([(0,l.EM)("hacs-download-dialog")],(function(i,o){return{F:class extends o{constructor(...o){super(...o),i(this)}},d:[{kind:"field",decorators:[(0,l.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,l.wk)()],key:"_waiting",value:()=>!0},{kind:"field",decorators:[(0,l.wk)()],key:"_installing",value:()=>!1},{kind:"field",decorators:[(0,l.wk)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,l.wk)()],key:"_repository",value:void 0},{kind:"field",decorators:[(0,l.wk)()],key:"_dialogParams",value:void 0},{kind:"field",decorators:[(0,l.wk)()],key:"_selectedVersion",value:void 0},{kind:"method",key:"showDialog",value:async function(i){this._dialogParams=i,this._waiting=!1,i.repository?this._repository=i.repository:await this._fetchRepository(),this._repository&&"commit"!==this._repository.version_or_commit&&(this._selectedVersion=this._repository.available_version),(0,m.zl)(this.hass,(i=>{this._error=i,this._installing=!1}),p.a.ERROR),await this.updateComplete}},{kind:"method",key:"closeDialog",value:function(){this._dialogParams=void 0,this._repository=void 0,this._error=void 0,this._installing=!1,this._waiting=!1,(0,d.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"field",key:"_getInstallPath",value:()=>(0,n.A)((i=>{let o=i.local_path;return["template","theme","python_script"].includes(i.category)&&(o=`${o}/${i.file_name}`),o}))},{kind:"method",key:"_fetchRepository",value:async function(){this._repository=await(0,y.vA)(this.hass,this._dialogParams.repositoryId)}},{kind:"method",key:"render",value:function(){var i;if(!this._dialogParams||!this._repository)return r.s6;const o=this._getInstallPath(this._repository),t=[{name:"beta",selector:{boolean:{}}},{name:"version",selector:{select:{options:this._repository.releases.concat("hacs/integration"===this._repository.full_name||this._repository.hide_default_branch?[]:[this._repository.default_branch]),mode:"dropdown"}}}];return r.qy` <ha-dialog open scrimClickAction escapeKeyAction .heading="${this._repository.name}" @closed="${this.closeDialog}"> <div class="content"> ${"version"===this._repository.version_or_commit&&this._repository.installed?r.qy` <ha-form .disabled="${this._waiting}" .data="${"version"===this._repository.version_or_commit?{beta:this._repository.beta,version:this._selectedVersion}:{}}" .schema="${t}" .computeLabel="${i=>"beta"===i.name?this._dialogParams.hacs.localize("dialog_download.show_beta"):this._dialogParams.hacs.localize("dialog_download.select_version")}" @value-changed="${this._valueChanged}"> </ha-form> <ha-alert alert-type="info" .rtl="${(0,h.qC)(this.hass)}"> ${this._dialogParams.hacs.localize("dialog_download.selector_note")} <a class="learn_more" href="${(0,v.o)({path:"/docs/use/entities/update/#install-service"})}" slot="action" target="_blank" rel="noreferrer"> ${this._dialogParams.hacs.localize("common.learn_more")}</a> </ha-alert> `:r.s6} ${this._repository.can_download?"":r.qy`<ha-alert alert-type="error" .rtl="${(0,h.qC)(this.hass)}"> ${this._dialogParams.hacs.localize("confirm.home_assistant_version_not_correct",{haversion:this.hass.config.version,minversion:this._repository.homeassistant})} </ha-alert>`} <div class="note"> ${this._dialogParams.hacs.localize("dialog_download.note_downloaded",{location:r.qy`<code>'${o}'</code>`})} ${"plugin"===this._repository.category&&"storage"!==this._dialogParams.hacs.info.lovelace_mode?r.qy` <p>${this._dialogParams.hacs.localize("dialog_download.lovelace_instruction")}</p> <pre>
                url: ${(0,u.J)({repository:this._repository})}
                type: module
                </pre> `:r.s6} ${"integration"===this._repository.category?r.qy`<p>${this._dialogParams.hacs.localize("dialog_download.restart")}</p>`:r.s6} </div> ${null!==(i=this._error)&&void 0!==i&&i.message?r.qy`<ha-alert alert-type="error" .rtl="${(0,h.qC)(this.hass)}"> ${this._error.message} </ha-alert>`:r.s6} ${this._installing?r.qy`<mwc-linear-progress indeterminate></mwc-linear-progress>`:r.s6} </div> <mwc-button slot="secondaryAction" @click="${this.closeDialog}" dialogInitialFocus> ${this._dialogParams.hacs.localize("common.cancel")} </mwc-button> <mwc-button slot="primaryAction" ?disabled="${!this._repository.can_download||this._waiting||this._installing}" @click="${this._installRepository}"> ${this._dialogParams.hacs.localize("common.download")} </mwc-button> </ha-dialog> `}},{kind:"method",key:"_valueChanged",value:async function(i){let o=!1;this._repository.beta!==i.detail.value.beta&&(o=!0,this._waiting=!0,await(0,m.rE)(this.hass,this._dialogParams.repositoryId,i.detail.value.beta)),i.detail.value.version&&(o=!0,this._waiting=!0,await(0,y.J2)(this.hass,this._dialogParams.repositoryId,i.detail.value.version),this._selectedVersion=i.detail.value.version),o&&(await this._fetchRepository(),this._waiting=!1)}},{kind:"method",key:"_installRepository",value:async function(){if(!this._repository)return;if(this._waiting)return void(this._error="Waiting to update repository information, try later.");if(this._installing)return void(this._error="Already installing, please wait.");if(!this._repository.can_download)return void(this._error="Can not download this repository.");this._installing=!0,this._error=void 0;this._repository.selected_tag||this._repository.available_version||this._repository.default_branch;try{var i;await(0,y.l1)(this.hass,String(this._repository.id),"commit"!==(null===(i=this._repository)||void 0===i?void 0:i.version_or_commit)?this._selectedVersion:void 0)}catch(i){return this._error=i||{message:"Could not download repository, check core logs for more information."},void(this._installing=!1)}this._dialogParams.hacs.log.debug(this._repository.category,"_installRepository"),this._dialogParams.hacs.log.debug(this._dialogParams.hacs.info.lovelace_mode,"_installRepository"),this._installing=!1,"plugin"===this._repository.category&&(0,_.dk)(this,{title:this._dialogParams.hacs.localize("common.reload"),text:r.qy`${this._dialogParams.hacs.localize("dialog.reload.description")}<br>${this._dialogParams.hacs.localize("dialog.reload.confirm")}`,dismissText:this._dialogParams.hacs.localize("common.cancel"),confirmText:this._dialogParams.hacs.localize("common.reload"),confirm:()=>{c.G.location.href=c.G.location.href}}),void 0===this._error&&this.closeDialog()}},{kind:"get",static:!0,key:"styles",value:function(){return[g.k,r.AH`.note{margin-top:12px}.lovelace{margin-top:8px}.learn_more{color:var(--hcv-text-color-primary)}pre{white-space:pre-line;user-select:all}mwc-linear-progress{margin-bottom:-8px;margin-top:4px}`]}}]}}),r.WF);e()}catch(i){e(i)}}))},51285:(i,o,t)=>{t.d(o,{J2:()=>s,l1:()=>a,vA:()=>e});const e=async(i,o)=>i.connection.sendMessagePromise({type:"hacs/repository/info",repository_id:o}),a=async(i,o,t)=>i.connection.sendMessagePromise({type:"hacs/repository/download",repository:o,version:t}),s=async(i,o,t)=>i.connection.sendMessagePromise({type:"hacs/repository/version",repository:o,version:t})},76646:(i,o,t)=>{t.d(o,{o:()=>e});const e=i=>`https://www.hacs.xyz${(null==i?void 0:i.path)||""}`},83503:(i,o,t)=>{t.d(o,{J:()=>e});const e=i=>`/hacsfiles/${i.repository.full_name.split("/")[1]}/${i.repository.file_name}`}};
//# sourceMappingURL=7836.btvb0v3nAhs.js.map