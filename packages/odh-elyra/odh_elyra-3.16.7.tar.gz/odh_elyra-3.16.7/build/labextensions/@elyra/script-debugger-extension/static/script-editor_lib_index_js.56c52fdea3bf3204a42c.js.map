{"version":3,"file":"script-editor_lib_index_js.56c52fdea3bf3204a42c.js","mappings":";;;;;;;;;AAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,oCAAoC,gBAAgB;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB;AACtB,mBAAmB,mBAAO,CAAC,kFAAsB;AACjD,6BAA6B,mBAAO,CAAC,oDAAO;AAC5C;AACA;AACA;AACA;AACA;AACA,uCAAuC,gCAAgC;AACvE,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,wGAAwG,sCAAsC;AAC9I;AACA,0DAA0D,sBAAsB;AAChF,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,sDAAsD,6EAA6E;AACnI,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,8FAA8F;AACxJ;AACA;AACA,sBAAsB;AACtB;;;;;;;;;;ACrFa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oBAAoB;AACpB,mBAAmB,mBAAO,CAAC,kFAAsB;AACjD,sBAAsB,mBAAO,CAAC,wFAAyB;AACvD,qBAAqB,mBAAO,CAAC,sFAAwB;AACrD,qBAAqB,mBAAO,CAAC,sFAAwB;AACrD,qBAAqB,mBAAO,CAAC,sFAAwB;AACrD,wBAAwB,mBAAO,CAAC,4FAA2B;AAC3D,oBAAoB,mBAAO,CAAC,4EAAmB;AAC/C,kBAAkB,mBAAO,CAAC,wEAAiB;AAC3C,gCAAgC,mBAAO,CAAC,oDAAO;AAC/C,yBAAyB,mBAAO,CAAC,gEAAkB;AACnD,iCAAiC,mBAAO,CAAC,gFAA0B;AACnE,uBAAuB,mBAAO,CAAC,4DAAgB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gGAAgG,6DAA6D;AAC7J;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,gEAAgE,oBAAoB;AACpF;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,6EAA6E,0DAA0D;AACvI;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uHAAuH;AACvH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,gHAAgH,sBAAsB;AACtI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;;;;;;;;;;ACtXa;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,mBAAO,CAAC,kFAAsB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,QAAQ,yGAAyG;AACpJ;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,YAAY,sJAAsJ;AACrM;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,8BAA8B;AAC9B;;;;;;;;;;AClGa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iCAAiC;AACjC,sBAAsB,mBAAO,CAAC,wFAAyB;AACvD,qBAAqB,mBAAO,CAAC,sFAAwB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,8CAA8C,kBAAkB;AAChE;AACA;AACA,iCAAiC;AACjC;;;;;;;;;;ACjDa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oBAAoB;AACpB,mBAAmB,mBAAO,CAAC,kFAAsB;AACjD,mBAAmB,mBAAO,CAAC,kFAAsB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E,MAAM;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,oBAAoB;AACpB;;;;;;;;;;AC/La;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,oCAAoC,gBAAgB;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,mBAAO,CAAC,gEAAkB;AACvC,aAAa,mBAAO,CAAC,4DAAgB;AACrC,aAAa,mBAAO,CAAC,gFAA0B;AAC/C,aAAa,mBAAO,CAAC,4DAAgB;AACrC,aAAa,mBAAO,CAAC,sFAA6B;AAClD","sources":["webpack://@elyra/script-debugger-extension/../script-editor/lib/KernelDropdown.js","webpack://@elyra/script-debugger-extension/../script-editor/lib/ScriptEditor.js","webpack://@elyra/script-debugger-extension/../script-editor/lib/ScriptEditorController.js","webpack://@elyra/script-debugger-extension/../script-editor/lib/ScriptEditorWidgetFactory.js","webpack://@elyra/script-debugger-extension/../script-editor/lib/ScriptRunner.js","webpack://@elyra/script-debugger-extension/../script-editor/lib/index.js"],"sourcesContent":["\"use strict\";\n/*\n * Copyright 2018-2023 Elyra Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.KernelDropdown = void 0;\nconst apputils_1 = require(\"@jupyterlab/apputils\");\nconst react_1 = __importStar(require(\"react\"));\nconst KERNEL_SELECT_CLASS = 'elyra-ScriptEditor-KernelSelector';\n/**\n * A toolbar dropdown component populated with available kernel specs.\n */\n// eslint-disable-next-line react/display-name\nconst DropDown = react_1.forwardRef(({ specs, defaultKernel, callback }, select) => {\n    const kernelspecs = react_1.useMemo(() => (Object.assign({}, specs.kernelspecs)), [specs]);\n    const [selection, setSelection] = react_1.useState(defaultKernel || '');\n    // Note: It's normally best to avoid using an imperative handle if possible.\n    // The better option would be to track state in the parent component and handle\n    // the change events there as well, but I know this isn't always possible\n    // alongside jupyter.\n    react_1.useImperativeHandle(select, () => ({\n        getSelection: () => selection\n    }));\n    const kernelOptions = !Object.keys(kernelspecs).length ? (react_1.default.createElement(\"option\", { key: \"no-kernel\", value: \"no-kernel\" }, \"No Kernel\")) : (Object.entries(kernelspecs).map(([key, val]) => {\n        var _a;\n        return (react_1.default.createElement(\"option\", { key: key, value: key }, (_a = val === null || val === void 0 ? void 0 : val.display_name) !== null && _a !== void 0 ? _a : key));\n    }));\n    const handleSelection = (e) => {\n        const selection = e.target.value;\n        setSelection(selection);\n        callback(selection);\n    };\n    return (react_1.default.createElement(\"select\", { className: KERNEL_SELECT_CLASS, onChange: handleSelection, value: selection }, kernelOptions));\n});\n/**\n * Wrap the dropDown into a React Widget in order to insert it into a Lab Toolbar Widget\n */\nclass KernelDropdown extends apputils_1.ReactWidget {\n    /**\n     * Construct a new CellTypeSwitcher widget.\n     */\n    constructor(specs, defaultKernel, ref, callback) {\n        super();\n        this.specs = specs;\n        this.defaultKernel = defaultKernel;\n        this.ref = ref;\n        this.callback = callback;\n        this.defaultKernel = defaultKernel;\n    }\n    render() {\n        return (react_1.default.createElement(DropDown, { ref: this.ref, specs: this.specs, defaultKernel: this.defaultKernel, callback: this.callback }));\n    }\n}\nexports.KernelDropdown = KernelDropdown;\n//# sourceMappingURL=KernelDropdown.js.map","\"use strict\";\n/*\n * Copyright 2018-2023 Elyra Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ScriptEditor = void 0;\nconst apputils_1 = require(\"@jupyterlab/apputils\");\nconst docregistry_1 = require(\"@jupyterlab/docregistry\");\nconst logconsole_1 = require(\"@jupyterlab/logconsole\");\nconst outputarea_1 = require(\"@jupyterlab/outputarea\");\nconst rendermime_1 = require(\"@jupyterlab/rendermime\");\nconst ui_components_1 = require(\"@jupyterlab/ui-components\");\nconst signaling_1 = require(\"@lumino/signaling\");\nconst widgets_1 = require(\"@lumino/widgets\");\nconst react_1 = __importDefault(require(\"react\"));\nconst KernelDropdown_1 = require(\"./KernelDropdown\");\nconst ScriptEditorController_1 = require(\"./ScriptEditorController\");\nconst ScriptRunner_1 = require(\"./ScriptRunner\");\n/**\n * ScriptEditor widget CSS classes.\n */\nconst SCRIPT_EDITOR_CLASS = 'elyra-ScriptEditor';\nconst OUTPUT_AREA_CLASS = 'elyra-ScriptEditor-OutputArea';\nconst OUTPUT_AREA_ERROR_CLASS = 'elyra-ScriptEditor-OutputArea-error';\nconst OUTPUT_AREA_CHILD_CLASS = 'elyra-ScriptEditor-OutputArea-child';\nconst OUTPUT_AREA_OUTPUT_CLASS = 'elyra-ScriptEditor-OutputArea-output';\nconst OUTPUT_AREA_PROMPT_CLASS = 'elyra-ScriptEditor-OutputArea-prompt';\nconst RUN_BUTTON_CLASS = 'elyra-ScriptEditor-Run';\nconst TOOLBAR_CLASS = 'elyra-ScriptEditor-Toolbar';\n/**\n * A widget for script editors.\n */\nclass ScriptEditor extends docregistry_1.DocumentWidget {\n    /**\n     * Construct a new editor widget.\n     */\n    constructor(options) {\n        super(options);\n        this.debuggerAvailable = (kernelName) => __awaiter(this, void 0, void 0, function* () { return yield this.controller.debuggerAvailable(kernelName); });\n        /**\n         * Function: Fetches kernel specs filtered by editor language\n         * and populates toolbar kernel selector.\n         */\n        this.initializeKernelSpecs = () => __awaiter(this, void 0, void 0, function* () {\n            const language = this.getLanguage();\n            const kernelSpecs = yield this.controller.getKernelSpecsByLanguage(language);\n            this.defaultKernel = yield this.controller.getDefaultKernel(language);\n            this.kernelName = this.defaultKernel;\n            this.kernelSelectorRef = react_1.default.createRef();\n            if (kernelSpecs !== null) {\n                this.toolbar.insertItem(4, 'select', new KernelDropdown_1.KernelDropdown(kernelSpecs, this.defaultKernel, this.kernelSelectorRef, this.handleKernelSelectionUpdate));\n            }\n            this._kernelSelectionChanged.emit(this.kernelSelection);\n        });\n        this.handleKernelSelectionUpdate = (selectedKernel) => __awaiter(this, void 0, void 0, function* () {\n            if (selectedKernel === this.kernelName) {\n                return;\n            }\n            this.kernelName = selectedKernel;\n            this._kernelSelectionChanged.emit(selectedKernel);\n        });\n        /**\n         * Function: Creates an OutputArea widget wrapped in a DockPanel.\n         */\n        this.createOutputAreaWidget = () => {\n            // Add dockpanel wrapper for output area\n            this.dockPanel = new ui_components_1.DockPanelSvg({ tabsMovable: false });\n            widgets_1.Widget.attach(this.dockPanel, document.body);\n            window.addEventListener('resize', () => {\n                var _a;\n                (_a = this.dockPanel) === null || _a === void 0 ? void 0 : _a.fit();\n            });\n            // Create output area widget\n            const model = new outputarea_1.OutputAreaModel();\n            const renderMimeRegistry = new rendermime_1.RenderMimeRegistry({ initialFactories: rendermime_1.standardRendererFactories });\n            this.outputAreaWidget = new outputarea_1.OutputArea({\n                rendermime: renderMimeRegistry,\n                model\n            });\n            this.outputAreaWidget.addClass(OUTPUT_AREA_CLASS);\n            const layout = this.layout;\n            // TODO: Investigate SplitLayout instead of BoxLayout, for layout resizing functionality\n            // const layout = this.layout as SplitLayout;\n            layout.addWidget(this.dockPanel);\n        };\n        /**\n         * Function: Clears existing output area and runs script\n         * code from file editor in the selected kernel context.\n         */\n        this.runScript = () => __awaiter(this, void 0, void 0, function* () {\n            if (!this.runDisabled) {\n                this.clearOutputArea();\n                this.displayOutputArea();\n                yield this.runner.runScript(this.kernelName, this.context.path, this.model.value.text, this.handleKernelMsg);\n            }\n        });\n        this.interruptRun = () => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            yield this.runner.interruptKernel();\n            if (!((_a = this.dockPanel) === null || _a === void 0 ? void 0 : _a.isEmpty)) {\n                this.updatePromptText(' ');\n            }\n        });\n        this.disableRunButton = (disabled) => {\n            this.runButton.enabled = !disabled;\n            this.runDisabled = disabled;\n        };\n        /**\n         * Function: Clears existing output area.\n         */\n        this.clearOutputArea = () => {\n            var _a, _b, _c;\n            // TODO: hide this.layout(), or set its height to 0\n            (_a = this.dockPanel) === null || _a === void 0 ? void 0 : _a.hide();\n            (_b = this.outputAreaWidget) === null || _b === void 0 ? void 0 : _b.model.clear();\n            (_c = this.outputAreaWidget) === null || _c === void 0 ? void 0 : _c.removeClass(OUTPUT_AREA_ERROR_CLASS); // if no error class is found, command is ignored\n        };\n        /**\n         * Function: Call back function passed to runner, that handles messages coming from the kernel.\n         */\n        this.handleKernelMsg = (msg) => __awaiter(this, void 0, void 0, function* () {\n            let output = '';\n            if (msg.status) {\n                this.displayKernelStatus(msg.status);\n                return;\n            }\n            else if (msg.error) {\n                output = 'Error : ' + msg.error.type + ' - ' + msg.error.output;\n                this.displayOutput(output);\n                this.getOutputAreaChildWidget().addClass(OUTPUT_AREA_ERROR_CLASS);\n                return;\n            }\n            else if (msg.output) {\n                output = msg.output;\n            }\n            this.displayOutput(output);\n        });\n        this.createScrollButtons = (scrollingWidget) => {\n            var _a, _b;\n            const scrollUpButton = document.createElement('button');\n            const scrollDownButton = document.createElement('button');\n            scrollUpButton.className = 'elyra-ScriptEditor-scrollTop';\n            scrollDownButton.className = 'elyra-ScriptEditor-scrollBottom';\n            scrollUpButton.onclick = function () {\n                scrollingWidget.node.scrollTop = 0;\n            };\n            scrollDownButton.onclick = function () {\n                scrollingWidget.node.scrollTop = scrollingWidget.node.scrollHeight;\n            };\n            ui_components_1.caretUpEmptyThinIcon.element({\n                container: scrollUpButton,\n                elementPosition: 'center',\n                title: 'Top'\n            });\n            ui_components_1.caretDownEmptyThinIcon.element({\n                container: scrollDownButton,\n                elementPosition: 'center',\n                title: 'Bottom'\n            });\n            (_a = this.dockPanel) === null || _a === void 0 ? void 0 : _a.node.appendChild(scrollUpButton);\n            (_b = this.dockPanel) === null || _b === void 0 ? void 0 : _b.node.appendChild(scrollDownButton);\n        };\n        /**\n         * Function: Displays output area widget.\n         */\n        this.displayOutputArea = () => {\n            var _a, _b, _c, _d, _e, _f;\n            if (this.outputAreaWidget === undefined ||\n                !((_b = (_a = this.kernelSelectorRef) === null || _a === void 0 ? void 0 : _a.current) === null || _b === void 0 ? void 0 : _b.getSelection())) {\n                return;\n            }\n            (_c = this.dockPanel) === null || _c === void 0 ? void 0 : _c.show();\n            // TODO: Set layout height to be flexible\n            if (this.dockPanel !== undefined) {\n                widgets_1.BoxLayout.setStretch(this.dockPanel, 1);\n            }\n            if ((_d = this.dockPanel) === null || _d === void 0 ? void 0 : _d.isEmpty) {\n                // Add a tab to dockPanel\n                this.scrollingWidget = new logconsole_1.ScrollingWidget({\n                    content: this.outputAreaWidget\n                });\n                this.createScrollButtons(this.scrollingWidget);\n                (_e = this.dockPanel) === null || _e === void 0 ? void 0 : _e.addWidget(this.scrollingWidget, { mode: 'split-bottom' });\n                const outputTab = (_f = this.dockPanel) === null || _f === void 0 ? void 0 : _f.tabBars().next();\n                if (outputTab !== undefined) {\n                    outputTab.id = 'tab-ScriptEditor-output';\n                    if (outputTab.currentTitle !== null) {\n                        outputTab.currentTitle.label = 'Console Output';\n                        outputTab.currentTitle.closable = true;\n                    }\n                    outputTab.disposed.connect((sender, args) => {\n                        this.interruptRun();\n                        this.clearOutputArea();\n                    }, this);\n                }\n            }\n            const options = {\n                name: 'stdout',\n                output_type: 'stream',\n                text: ['Waiting for kernel to start...']\n            };\n            this.outputAreaWidget.model.add(options);\n            this.updatePromptText(' ');\n            this.setOutputAreaClasses();\n        };\n        /**\n         * Function: Displays kernel status, similar to notebook.\n         */\n        this.displayKernelStatus = (status) => {\n            if (status === 'busy') {\n                // TODO: Use a character that does not take any space, also not an empty string\n                this.emptyOutput = true;\n                this.displayOutput(' ');\n                this.updatePromptText('*');\n            }\n            else if (status === 'idle') {\n                this.updatePromptText(' ');\n            }\n        };\n        /**\n         * Function: Displays code in OutputArea widget.\n         */\n        this.displayOutput = (output) => {\n            var _a, _b, _c, _d;\n            if (output) {\n                const options = {\n                    name: 'stdout',\n                    output_type: 'stream',\n                    text: [output]\n                };\n                // Stream output doesn't instantiate correctly without an initial output string\n                if (this.emptyOutput) {\n                    // Clears the \"Waiting for kernel\" message immediately\n                    (_a = this.outputAreaWidget) === null || _a === void 0 ? void 0 : _a.model.clear(false);\n                    (_b = this.outputAreaWidget) === null || _b === void 0 ? void 0 : _b.model.add(options);\n                    this.emptyOutput = false;\n                    // Clear will wait until the first output from the kernel to clear the initial string\n                    (_c = this.outputAreaWidget) === null || _c === void 0 ? void 0 : _c.model.clear(true);\n                }\n                else {\n                    (_d = this.outputAreaWidget) === null || _d === void 0 ? void 0 : _d.model.add(options);\n                }\n                this.updatePromptText('*');\n                this.setOutputAreaClasses();\n            }\n        };\n        this.setOutputAreaClasses = () => {\n            this.getOutputAreaChildWidget().addClass(OUTPUT_AREA_CHILD_CLASS);\n            this.getOutputAreaOutputWidget().addClass(OUTPUT_AREA_OUTPUT_CLASS);\n            this.getOutputAreaPromptWidget().addClass(OUTPUT_AREA_PROMPT_CLASS);\n        };\n        /**\n         * Function: Gets OutputArea child widget, where output and kernel status are displayed.\n         */\n        this.getOutputAreaChildWidget = () => {\n            var _a;\n            const outputAreaChildLayout = (_a = this.outputAreaWidget) === null || _a === void 0 ? void 0 : _a.layout;\n            return outputAreaChildLayout.widgets[0];\n        };\n        /**\n         * Function: Gets OutputArea prompt widget, where kernel status is displayed.\n         */\n        this.getOutputAreaOutputWidget = () => {\n            const outputAreaChildLayout = this.getOutputAreaChildWidget()\n                .layout;\n            return outputAreaChildLayout.widgets[1];\n        };\n        /**\n         * Function: Gets OutputArea prompt widget, where kernel status is displayed.\n         */\n        this.getOutputAreaPromptWidget = () => {\n            const outputAreaChildLayout = this.getOutputAreaChildWidget()\n                .layout;\n            return outputAreaChildLayout.widgets[0];\n        };\n        /**\n         * Function: Updates OutputArea prompt widget to display kernel status.\n         */\n        this.updatePromptText = (kernelStatusFlag) => {\n            this.getOutputAreaPromptWidget().node.innerText =\n                '[' + kernelStatusFlag + ']:';\n        };\n        /**\n         * Function: Saves file editor content.\n         */\n        this.saveFile = () => __awaiter(this, void 0, void 0, function* () {\n            if (this.model.readOnly) {\n                return apputils_1.showDialog({\n                    title: 'Cannot Save',\n                    body: 'Document is read-only',\n                    buttons: [apputils_1.Dialog.okButton()]\n                });\n            }\n            void this.context.save().then(() => {\n                if (!this.isDisposed) {\n                    return this.context.createCheckpoint();\n                }\n                return;\n            });\n        });\n        this.addClass(SCRIPT_EDITOR_CLASS);\n        this.model = this.content.model;\n        this.runner = new ScriptRunner_1.ScriptRunner(this.disableRunButton);\n        this.kernelSelectorRef = null;\n        this.emptyOutput = true;\n        this.controller = new ScriptEditorController_1.ScriptEditorController();\n        this.runDisabled = false;\n        this.defaultKernel = null;\n        this.kernelName = null;\n        this._kernelSelectionChanged = new signaling_1.Signal(this);\n        // Add icon to main tab\n        this.title.icon = this.getIcon();\n        // Add toolbar widgets\n        const saveButton = new apputils_1.ToolbarButton({\n            icon: ui_components_1.saveIcon,\n            onClick: this.saveFile,\n            tooltip: 'Save file contents'\n        });\n        const runButton = new apputils_1.ToolbarButton({\n            className: RUN_BUTTON_CLASS,\n            icon: ui_components_1.runIcon,\n            onClick: this.runScript,\n            tooltip: 'Run',\n            enabled: !this.runDisabled\n        });\n        const interruptButton = new apputils_1.ToolbarButton({\n            icon: ui_components_1.stopIcon,\n            onClick: this.interruptRun,\n            tooltip: 'Interrupt the kernel'\n        });\n        // Populate toolbar with button widgets\n        const toolbar = this.toolbar;\n        toolbar.addItem('save', saveButton);\n        toolbar.addItem('run', runButton);\n        toolbar.addItem('interrupt', interruptButton);\n        this.toolbar.addClass(TOOLBAR_CLASS);\n        this.runButton = runButton;\n        // Create output area widget\n        this.createOutputAreaWidget();\n        this.context.ready.then(() => this.initializeKernelSpecs());\n    }\n    get kernelSelectionChanged() {\n        return this._kernelSelectionChanged;\n    }\n    get kernelSelection() {\n        var _a, _b;\n        return (_b = (_a = this.kernelName) !== null && _a !== void 0 ? _a : this.defaultKernel) !== null && _b !== void 0 ? _b : '';\n    }\n}\nexports.ScriptEditor = ScriptEditor;\n//# sourceMappingURL=ScriptEditor.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ScriptEditorController = void 0;\n/*\n * Copyright 2018-2023 Elyra Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst services_1 = require(\"@jupyterlab/services\");\nclass ScriptEditorController {\n    constructor() {\n        /**\n         * Get available kernel specs.\n         */\n        this.getKernelSpecs = () => __awaiter(this, void 0, void 0, function* () {\n            yield this.kernelSpecManager.ready;\n            const specs = this.kernelSpecManager.specs;\n            // return a deep copy of the object preserving the original type\n            return JSON.parse(JSON.stringify(specs));\n        });\n        /**\n         * Get available kernel specs by language.\n         */\n        this.getKernelSpecsByLanguage = (language) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const specs = yield this.getKernelSpecs();\n            Object.entries((_a = specs === null || specs === void 0 ? void 0 : specs.kernelspecs) !== null && _a !== void 0 ? _a : [])\n                .filter(entry => { var _a; return ((_a = entry[1]) === null || _a === void 0 ? void 0 : _a.language.includes(language)) === false; })\n                .forEach(entry => specs === null || specs === void 0 ? true : delete specs.kernelspecs[entry[0]]);\n            return specs;\n        });\n        /**\n         * Get kernel specs by name.\n         */\n        this.getKernelSpecsByName = (kernelName) => __awaiter(this, void 0, void 0, function* () {\n            var _b;\n            const specs = yield this.getKernelSpecs();\n            Object.entries((_b = specs === null || specs === void 0 ? void 0 : specs.kernelspecs) !== null && _b !== void 0 ? _b : [])\n                .filter(entry => { var _a, _b; return ((_b = (_a = entry[1]) === null || _a === void 0 ? void 0 : _a.name) === null || _b === void 0 ? void 0 : _b.includes(kernelName)) === false; })\n                .forEach(entry => specs === null || specs === void 0 ? true : delete specs.kernelspecs[entry[0]]);\n            return specs;\n        });\n        /**\n         * Get the default kernel name from a given language\n         * or the name of the first kernel from the list of kernelspecs.\n         */\n        this.getDefaultKernel = (language) => __awaiter(this, void 0, void 0, function* () {\n            var _c;\n            const kernelSpecs = yield this.getKernelSpecs();\n            if (!kernelSpecs) {\n                return '';\n            }\n            if ((_c = kernelSpecs.default) === null || _c === void 0 ? void 0 : _c.includes(language)) {\n                return kernelSpecs.default;\n            }\n            return this.getFirstKernelName(language);\n        });\n        this.getFirstKernelName = (language) => __awaiter(this, void 0, void 0, function* () {\n            var _d;\n            const specsByLang = yield this.getKernelSpecsByLanguage(language);\n            const empty = '';\n            if (specsByLang && Object.keys(specsByLang.kernelspecs).length !== 0) {\n                const [key, value] = Object.entries(specsByLang.kernelspecs)[0];\n                return (_d = value.name) !== null && _d !== void 0 ? _d : key;\n            }\n            return empty;\n        });\n        /**\n         * Return value of debugger boolean property from the kernel spec of a given name.\n         */\n        this.debuggerAvailable = (kernelName) => __awaiter(this, void 0, void 0, function* () {\n            var _e, _f, _g;\n            const specs = yield this.getKernelSpecsByName(kernelName);\n            return !!((_g = (_f = (_e = specs === null || specs === void 0 ? void 0 : specs.kernelspecs[kernelName]) === null || _e === void 0 ? void 0 : _e.metadata) === null || _f === void 0 ? void 0 : _f['debugger']) !== null && _g !== void 0 ? _g : false);\n        });\n        this.kernelSpecManager = new services_1.KernelSpecManager();\n    }\n}\nexports.ScriptEditorController = ScriptEditorController;\n//# sourceMappingURL=ScriptEditorController.js.map","\"use strict\";\n/*\n * Copyright 2018-2023 Elyra Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ScriptEditorWidgetFactory = void 0;\nconst docregistry_1 = require(\"@jupyterlab/docregistry\");\nconst fileeditor_1 = require(\"@jupyterlab/fileeditor\");\n/**\n * A widget factory for script editors.\n */\nclass ScriptEditorWidgetFactory extends docregistry_1.ABCWidgetFactory {\n    /**\n     * Construct a new editor widget factory.\n     */\n    constructor(options) {\n        super(options.factoryOptions);\n        this._services = options.editorServices;\n        this.options = options;\n    }\n    /**\n     * Create a new widget given a context.\n     */\n    createNewWidget(context) {\n        const newDocumentEditor = this._services.factoryService.newDocumentEditor;\n        const factory = options => {\n            return newDocumentEditor(options);\n        };\n        const content = new fileeditor_1.FileEditor({\n            factory,\n            context,\n            mimeTypeService: this._services.mimeTypeService\n        });\n        return this.options.instanceCreator({ content, context });\n    }\n}\nexports.ScriptEditorWidgetFactory = ScriptEditorWidgetFactory;\n//# sourceMappingURL=ScriptEditorWidgetFactory.js.map","\"use strict\";\n/*\n * Copyright 2018-2023 Elyra Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ScriptRunner = void 0;\nconst apputils_1 = require(\"@jupyterlab/apputils\");\nconst services_1 = require(\"@jupyterlab/services\");\nconst KERNEL_ERROR_MSG = 'Could not run script because no supporting kernel is defined.';\nconst SESSION_ERROR_MSG = 'Could not start session to execute script.';\n/**\n * Utility class to enable running scripts in the context of a Kernel environment\n */\nclass ScriptRunner {\n    /**\n     * Construct a new runner.\n     */\n    constructor(disableButton) {\n        this.errorDialog = (errorMsg) => {\n            this.disableButton(false);\n            return apputils_1.showDialog({\n                title: 'Error',\n                body: errorMsg,\n                buttons: [apputils_1.Dialog.okButton()]\n            });\n        };\n        /**\n         * Function: Starts a session with a proper kernel and executes code from file editor.\n         */\n        this.runScript = (kernelName, contextPath, code, handleKernelMsg) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            if (!kernelName) {\n                this.disableButton(true);\n                return this.errorDialog(KERNEL_ERROR_MSG);\n            }\n            this.disableButton(true);\n            try {\n                yield this.startSession(kernelName, contextPath);\n            }\n            catch (e) {\n                return this.errorDialog(SESSION_ERROR_MSG);\n            }\n            if (!((_a = this.sessionConnection) === null || _a === void 0 ? void 0 : _a.kernel)) {\n                // session didn't get started\n                return this.errorDialog(SESSION_ERROR_MSG);\n            }\n            const future = this.sessionConnection.kernel.requestExecute({ code });\n            future.onIOPub = (msg) => {\n                const msgOutput = {};\n                if (msg.msg_type === 'error') {\n                    msgOutput.error = {\n                        type: msg.content.ename,\n                        output: msg.content.evalue\n                    };\n                }\n                else if (msg.msg_type === 'execute_result' ||\n                    msg.msg_type === 'display_data') {\n                    if ('text/plain' in msg.content.data) {\n                        msgOutput.output = msg.content.data['text/plain'];\n                    }\n                    else {\n                        // ignore\n                        console.log('Ignoring received message ' + msg);\n                    }\n                }\n                else if (msg.msg_type === 'stream') {\n                    msgOutput.output = msg.content.text;\n                }\n                else if (msg.msg_type === 'status') {\n                    msgOutput.status = msg.content.execution_state;\n                }\n                else {\n                    // ignore other message types\n                }\n                // Notify UI\n                handleKernelMsg(msgOutput);\n            };\n            try {\n                yield future.done;\n                // TO DO: Keep session open but shut down kernel\n                // this.interruptKernel(); // debugger is not triggered after this\n                // this.shutdownKernel(); // also shuts down session for some reason\n                this.disableButton(false);\n            }\n            catch (e) {\n                console.log('Exception: done = ' + JSON.stringify(e));\n            }\n        });\n        /**\n         * Function: Starts new kernel session.\n         */\n        this.startSession = (kernelName, contextPath) => __awaiter(this, void 0, void 0, function* () {\n            const options = {\n                kernel: {\n                    name: kernelName\n                },\n                path: contextPath,\n                type: 'file',\n                name: contextPath\n            };\n            if (!this.sessionConnection || !this.sessionConnection.kernel) {\n                try {\n                    this.sessionConnection = yield this.sessionManager.startNew(options);\n                    this.sessionConnection.setPath(contextPath);\n                }\n                catch (e) {\n                    console.log('Exception: kernel start = ' + JSON.stringify(e));\n                }\n            }\n        });\n        /**\n         * Function: Shuts down kernel session.\n         */\n        this.shutdownSession = () => __awaiter(this, void 0, void 0, function* () {\n            var _b;\n            if (this.sessionConnection) {\n                const name = (_b = this.sessionConnection.kernel) === null || _b === void 0 ? void 0 : _b.name;\n                try {\n                    yield this.sessionConnection.shutdown();\n                    this.sessionConnection = null;\n                    console.log(name + ' kernel shut down');\n                }\n                catch (e) {\n                    console.log('Exception: session shutdown = ' + JSON.stringify(e));\n                }\n            }\n        });\n        /**\n         * Function: Shuts down kernel.\n         */\n        this.shutdownKernel = () => __awaiter(this, void 0, void 0, function* () {\n            if (this.sessionConnection) {\n                const kernel = this.sessionConnection.kernel;\n                try {\n                    kernel && (yield services_1.KernelAPI.shutdownKernel(kernel.id));\n                    console.log((kernel === null || kernel === void 0 ? void 0 : kernel.name) + ' kernel shutdown');\n                }\n                catch (e) {\n                    console.log('Exception: kernel shutdown = ' + JSON.stringify(e));\n                }\n            }\n        });\n        /**\n         * Function: Interrupts kernel.\n         * TO DO: Interrupting kernel does not notify debugger service. Same behavior debugging notebooks.\n         */\n        this.interruptKernel = () => __awaiter(this, void 0, void 0, function* () {\n            if (this.sessionConnection) {\n                const kernel = this.sessionConnection.kernel;\n                try {\n                    kernel &&\n                        (yield services_1.KernelAPI.interruptKernel(kernel.id, kernel.serverSettings));\n                    console.log((kernel === null || kernel === void 0 ? void 0 : kernel.name) + ' kernel interrupted.');\n                    this.disableButton(false);\n                }\n                catch (e) {\n                    console.log('Exception: kernel interrupt = ' + JSON.stringify(e));\n                }\n            }\n        });\n        this.disableButton = disableButton;\n        this.kernelSpecManager = new services_1.KernelSpecManager();\n        this.kernelManager = new services_1.KernelManager();\n        this.sessionManager = new services_1.SessionManager({\n            kernelManager: this.kernelManager\n        });\n        this.sessionConnection = null;\n    }\n}\nexports.ScriptRunner = ScriptRunner;\n//# sourceMappingURL=ScriptRunner.js.map","\"use strict\";\n/*\n * Copyright 2018-2023 Elyra Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./KernelDropdown\"), exports);\n__exportStar(require(\"./ScriptEditor\"), exports);\n__exportStar(require(\"./ScriptEditorController\"), exports);\n__exportStar(require(\"./ScriptRunner\"), exports);\n__exportStar(require(\"./ScriptEditorWidgetFactory\"), exports);\n//# sourceMappingURL=index.js.map"],"names":[],"sourceRoot":""}