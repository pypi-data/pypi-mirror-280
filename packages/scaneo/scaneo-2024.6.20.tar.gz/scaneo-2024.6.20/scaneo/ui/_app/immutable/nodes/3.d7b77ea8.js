import{M as X,S as B,i as P,s as D,k,l as C,m as v,h,n as d,b as w,I,g as p,v as x,d as y,f as $,G as V,o as De,N as Le,O as er,C as ft,D as mt,E as dt,F as ht,P as tr,y as M,a as O,z as N,c as H,A,B as T,Q as F,e as z,R as U,H as b,q as G,r as q,u as ne,t as Ne,T as ve,U as te,V as we,J as gt,W as yn,p as Q,X as Xe,Y as Ye,Z as bt,x as de,_ as Pt,$ as Te,w as Ln,a0 as nr,a1 as Fe,K as rr,a2 as Dt,a3 as sr,a4 as ar,a5 as wn,a6 as ir}from"../chunks/index.a81f82fa.js";import{_ as We}from"../chunks/preload-helper.a4192956.js";import{w as ue,j as lr}from"../chunks/singletons.cb14eaab.js";import{p as or}from"../chunks/stores.72bcedf3.js";import{f as Nt,a as Ot,b as cr,g as ur,c as fr,u as Oe,d as Ae,e as ae,h as kn,o as ce,i as Ht,j as Cn,p as mr,s as dr,k as hr,l as gr,m as br,n as _r,q as En,t as _t,v as Sn,w as Qe,x as xe,y as pr,z as vr,A as ge,B as yr,C as Lr,D as wr,E as kr,F as Cr,G as In,H as Er,I as Sr,J as Ir,K as Mr,L as Ar}from"../chunks/optionsStore.465af16a.js";const Tr={water:"#0084ff",vegetation:"#02921a",crops:"#eeff00","bare soil":"#ff0000",forest:"#177733",river:"#00ddff",highway:"#7f7f7f",industrial:"#ffb600",residential:"#ff00fa",pasture:"#9aff42"};function Br(){const r=ue(Pr),{subscribe:e,update:t}=r;return{subscribe:e,retrieve:()=>X(r),add:i=>{let l=i.color||Tr[i.name.toLowerCase()];if(!l)do l=Dr();while(X(r).some(c=>c.color===l));const o={...i,color:l};t(c=>[...c,o])},removeBy:i=>{t(l=>l.filter(o=>o.name!==i))},changeColor:i=>{t(l=>l.map(o=>o.name===i.name?i:o))}}}const Pr=[],be=Br();function Dr(){let r="";const e=/^#[0-9a-f]{6}$/i;do r="#"+Math.floor(Math.random()*16777215).toString(16);while(!e.test(r));return r}function Nr(r){let e;return{c(){e=k("div"),this.h()},l(t){e=C(t,"DIV",{class:!0}),v(e).forEach(h),this.h()},h(){d(e,"class","blocker fixed block h-[100vh] w-[100vw] bg-white opacity-0 transition-opacity ease-in-out")},m(t,n){w(t,e,n)},p:I,i:I,o:I,d(t){t&&h(e)}}}class Or extends B{constructor(e){super(),P(this,e,null,Nr,D,{})}}function Hr(r){const e=ue(r),{subscribe:t,set:n}=e;return{subscribe:t,store:s=>n(s),retrieve:()=>X(e),remove:()=>n(null)}}const K=Hr(null);function zt(r){let e;const t=r[5].default,n=ft(t,r,r[4],null);return{c(){n&&n.c()},l(s){n&&n.l(s)},m(s,a){n&&n.m(s,a),e=!0},p(s,a){n&&n.p&&(!e||a&16)&&mt(n,t,s,s[4],e?ht(t,s[4],a,null):dt(s[4]),null)},i(s){e||(p(n,s),e=!0)},o(s){y(n,s),e=!1},d(s){n&&n.d(s)}}}function zr(r){let e,t,n=r[0]&&zt(r);return{c(){e=k("div"),n&&n.c(),this.h()},l(s){e=C(s,"DIV",{id:!0,class:!0});var a=v(e);n&&n.l(a),a.forEach(h),this.h()},h(){d(e,"id","map"),d(e,"class","svelte-xoi8de")},m(s,a){w(s,e,a),n&&n.m(e,null),t=!0},p(s,[a]){s[0]?n?(n.p(s,a),a&1&&p(n,1)):(n=zt(s),n.c(),p(n,1),n.m(e,null)):n&&(x(),y(n,1,1,()=>{n=null}),$())},i(s){t||(p(n),t=!0)},o(s){y(n),t=!1},d(s){s&&h(e),n&&n.d()}}}let jr=12;function Vr(r,e,t){let n;V(r,K,f=>t(0,n=f));let{$$slots:s={},$$scope:a}=e,{options:i={attributionControl:!1,drawControls:!0,max_zoom:20}}=e,{zoomPosition:l="bottomright"}=e,{panes:o=[{name:"default",zIndex:200},{name:"sam",zIndex:400}]}=e,c=[42.0407,3.1],u;return De(async()=>{if(!u){const f=await We(()=>import("../chunks/leaflet-src.e35a4304.js").then(m=>m.l),[],import.meta.url),{Icon:g}=f;g.Default.imagePath="./",await We(()=>import("../chunks/leaflet.draw.b0487800.js"),[],import.meta.url),await We(()=>import("../chunks/leaflet.activearea.bef5e9d0.js"),[],import.meta.url),window.type=!0,u=f.map("map",i).setActiveArea("map-viewport").setView(c,jr),u.zoomControl.setPosition(l),o==null||o.forEach(({name:m,zIndex:_})=>{u.createPane(m),u.getPane(m).style.zIndex=_,u.getPane(m).style.pointerEvents="none"}),K.store(u)}}),Le(()=>{K.remove()}),er("map",{getMap:()=>u}),r.$$set=f=>{"options"in f&&t(1,i=f.options),"zoomPosition"in f&&t(2,l=f.zoomPosition),"panes"in f&&t(3,o=f.panes),"$$scope"in f&&t(4,a=f.$$scope)},[n,i,l,o,a,s]}let Rr=class extends B{constructor(e){super(),P(this,e,Vr,zr,D,{options:1,zoomPosition:2,panes:3})}};function Gr(r,e,t){let{url:n}=e,{options:s}=e;const{getMap:a}=tr("map");let i=null;return De(()=>{const l=a();i=L.tileLayer(n,s).addTo(l)}),Le(()=>{i.remove()}),r.$$set=l=>{"url"in l&&t(0,n=l.url),"options"in l&&t(1,s=l.options)},[n,s]}class qr extends B{constructor(e){super(),P(this,e,Gr,null,D,{url:0,options:1})}}function Fr(r){let e;return{c(){e=k("div"),this.h()},l(t){e=C(t,"DIV",{class:!0}),v(e).forEach(h),this.h()},h(){d(e,"class","map-viewport")},m(t,n){w(t,e,n)},p:I,i:I,o:I,d(t){t&&h(e)}}}class Ur extends B{constructor(e){super(),P(this,e,null,Fr,D,{})}}function Wr(r){let e,t;return e=new qr({props:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{maxZoom:20,zIndex:1}}}),{c(){M(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},p:I,i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function Zr(r){let e,t,n,s,a;return e=new Ur({}),s=new Rr({props:{$$slots:{default:[Wr]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment),t=O(),n=k("section"),M(s.$$.fragment),this.h()},l(i){N(e.$$.fragment,i),t=H(i),n=C(i,"SECTION",{class:!0});var l=v(n);N(s.$$.fragment,l),l.forEach(h),this.h()},h(){d(n,"class","w-full h-full")},m(i,l){A(e,i,l),w(i,t,l),w(i,n,l),A(s,n,null),a=!0},p(i,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:i}),s.$set(o)},i(i){a||(p(e.$$.fragment,i),p(s.$$.fragment,i),a=!0)},o(i){y(e.$$.fragment,i),y(s.$$.fragment,i),a=!1},d(i){T(e,i),i&&h(t),i&&h(n),T(s)}}}class Jr extends B{constructor(e){super(),P(this,e,null,Zr,D,{})}}var se=(r=>(r.detection="detection",r.segmentation="segmentation",r.classification="classification",r.prompts="prompts",r))(se||{}),$e=(r=>(r.labels="labels",r.tasks="tasks",r))($e||{});const Qr=()=>{const r=ue(Nt),{subscribe:e,set:t}=r;return{subscribe:e,store:n=>t(n),retrieve:()=>X(r),empty:()=>t(Nt)}},He=Qr(),{tasks:Kr}=$e;function Xr(r){const e=ue(r),{subscribe:t,set:n}=e,s=u=>{const f={detection:L.featureGroup(),segmentation:L.featureGroup(),classification:L.featureGroup(),prompts:L.featureGroup()};Ot(u,f),n(f)},a=u=>{const f=X(e);cr(u,f),n(null)};return{subscribe:t,init:s,remove:a,clear:u=>{a(u),s(u)},retrieve:()=>X(e),addLayerWithProperties:(u,f,g)=>(f[Kr]=[g],u.feature={type:"Feature",properties:{...f}},X(e)[g].addLayer(u),u),resetLayerGroup:(u,f)=>{const g=X(e);g[f].clearLayers(),Ot(u,g),n(g)},removeLayer:(u,f)=>{X(e)[f].removeLayer(u)}}}const Yr={detection:null,segmentation:null,classification:null,prompts:null},Y=Xr(Yr);function xr(){const r=ue(jt),{subscribe:e,set:t}=r;return{subscribe:e,store:s=>t(s),toggle:s=>{const a=X(r),i=a.map(o=>o.name);let l;i.includes(s.name)?l=a.filter(o=>o.name!==s.name):l=[...a,s],t(l)},retrieve:()=>X(r),empty:()=>t(jt)}}const jt=[],ke=xr(),$r=()=>{const r=ue({areImagesLoading:!0,areLabelsLoading:!0,areAnnotationsLoading:!0}),{subscribe:e,update:t}=r;return{subscribe:e,markImagesAsLoaded:()=>t(u=>({...u,areImagesLoading:!1})),markLabelsAsLoaded:()=>t(u=>({...u,areLabelsLoading:!1})),markAnnotationsAsLoaded:()=>t(u=>({...u,areAnnotationsLoading:!1})),markLabelsAsLoading:()=>t(u=>({...u,areLabelsLoading:!0})),markImagesAsLoading:()=>t(u=>({...u,areImagesLoading:!0})),markAnnotationsAsLoading:()=>t(u=>({...u,areAnnotationsLoading:!0})),isDataLoading:()=>{const u=X(r);return u.areImagesLoading||u.areLabelsLoading},retrieve:()=>X(r)}},Be=$r(),es=()=>{const e=ue({saving:!1,samMaskRequest:!1}),{update:t,subscribe:n}=e;return{subscribe:n,saving:{enable:()=>t(s=>({...s,saving:!0})),disable:()=>t(s=>({...s,saving:!1})),retrieve:()=>X(e).saving},samMaskRequest:{enable:()=>t(s=>({...s,samMaskRequest:!0})),disable:()=>t(s=>({...s,samMaskRequest:!1})),retrieve:()=>X(e).samMaskRequest}}},ee=es(),ts={name:"",bbox:[0,0,0,0]};function ns(){const r=ue(ts),{subscribe:e,set:t}=r;return{subscribe:e,store:n=>t(n),retrieve:()=>X(r)}}const _e=ns();function rs(r){const e=ue(r),{subscribe:t,set:n}=e;return{subscribe:t,store:s=>n(s),retrieve:()=>X(e)}}const ss=[],et=rs(ss),as=()=>ke.retrieve().map(e=>e.name).flat(),Mn=async()=>{const r=as(),e=_e.retrieve().bbox,t=ur(e),n=fr(t),s=L.polygon(n,{weight:0,fillOpacity:0,interactive:!1}),a={labels:r};Y.addLayerWithProperties(s,a,se.classification)},is=r=>{_e.retrieve().name&&(ke.toggle(r),ls())},ls=()=>{ee.saving.enable(),os(),ke.retrieve().length&&Mn()},os=()=>{Y.retrieve().classification&&Y.resetLayerGroup(K.retrieve(),se.classification)};function Vt(r){let e,t;return{c(){e=F("desc"),t=G(r[7])},l(n){e=U(n,"desc",{});var s=v(e);t=q(s,r[7]),s.forEach(h)},m(n,s){w(n,e,s),b(e,t)},p(n,s){s&128&&ne(t,n[7])},d(n){n&&h(e)}}}function Rt(r){let e,t;return{c(){e=F("title"),t=G(r[6])},l(n){e=U(n,"title",{});var s=v(e);t=q(s,r[6]),s.forEach(h)},m(n,s){w(n,e,s),b(e,t)},p(n,s){s&64&&ne(t,n[6])},d(n){n&&h(e)}}}function cs(r){let e,t,n,s=r[7]&&Vt(r),a=r[6]&&Rt(r);return{c(){e=F("svg"),s&&s.c(),t=z(),a&&a.c(),n=F("path"),this.h()},l(i){e=U(i,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var l=v(e);s&&s.l(l),t=z(),a&&a.l(l),n=U(l,"path",{d:!0,fill:!0}),v(n).forEach(h),l.forEach(h),this.h()},h(){d(n,"d","M21.41 11.58L12.41 2.58C12.04 2.21 11.53 2 11 2H4C2.9 2 2 2.9 2 4V11C2 11.53 2.21 12.04 2.59 12.41L3 12.81C3.9 12.27 4.94 12 6 12C9.31 12 12 14.69 12 18C12 19.06 11.72 20.09 11.18 21L11.58 21.4C11.95 21.78 12.47 22 13 22S14.04 21.79 14.41 21.41L21.41 14.41C21.79 14.04 22 13.53 22 13S21.79 11.96 21.41 11.58M5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7M8.63 14.27L4.76 18.17L3.41 16.8L2 18.22L4.75 21L10.03 15.68L8.63 14.27"),d(n,"fill",r[2]),d(e,"viewBox",r[3]),d(e,"width",r[0]),d(e,"height",r[1]),d(e,"class",r[8]),d(e,"aria-label",r[4]),d(e,"aria-hidden",r[5])},m(i,l){w(i,e,l),s&&s.m(e,null),b(e,t),a&&a.m(e,null),b(e,n)},p(i,[l]){i[7]?s?s.p(i,l):(s=Vt(i),s.c(),s.m(e,t)):s&&(s.d(1),s=null),i[6]?a?a.p(i,l):(a=Rt(i),a.c(),a.m(e,n)):a&&(a.d(1),a=null),l&4&&d(n,"fill",i[2]),l&8&&d(e,"viewBox",i[3]),l&1&&d(e,"width",i[0]),l&2&&d(e,"height",i[1]),l&256&&d(e,"class",i[8]),l&16&&d(e,"aria-label",i[4]),l&32&&d(e,"aria-hidden",i[5])},i:I,o:I,d(i){i&&h(e),s&&s.d(),a&&a.d()}}}function us(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:a=n}=e,{color:i="currentColor"}=e,{viewBox:l="0 0 24 24"}=e,{ariaLabel:o=void 0}=e,{ariaHidden:c=void 0}=e,{title:u=void 0}=e,{desc:f=void 0}=e,{class:g=void 0}=e;return r.$$set=m=>{"size"in m&&t(9,n=m.size),"width"in m&&t(0,s=m.width),"height"in m&&t(1,a=m.height),"color"in m&&t(2,i=m.color),"viewBox"in m&&t(3,l=m.viewBox),"ariaLabel"in m&&t(4,o=m.ariaLabel),"ariaHidden"in m&&t(5,c=m.ariaHidden),"title"in m&&t(6,u=m.title),"desc"in m&&t(7,f=m.desc),"class"in m&&t(8,g=m.class)},[s,a,i,l,o,c,u,f,g,n]}class fs extends B{constructor(e){super(),P(this,e,us,cs,D,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function Gt(r){let e,t,n,s,a;return t=new fs({props:{color:r[1]?"#202124":"#5e5e5e"}}),{c(){e=k("i"),M(t.$$.fragment),this.h()},l(i){e=C(i,"I",{class:!0,"aria-label":!0});var l=v(e);N(t.$$.fragment,l),l.forEach(h),this.h()},h(){d(e,"class",n="text-2xl "+(r[1]&&"hover:text-3xl")+" mr-2"),d(e,"aria-label",s=`${r[0]} classification tag`)},m(i,l){w(i,e,l),A(t,e,null),a=!0},p(i,l){const o={};l&2&&(o.color=i[1]?"#202124":"#5e5e5e"),t.$set(o),(!a||l&2&&n!==(n="text-2xl "+(i[1]&&"hover:text-3xl")+" mr-2"))&&d(e,"class",n),(!a||l&1&&s!==(s=`${i[0]} classification tag`))&&d(e,"aria-label",s)},i(i){a||(p(t.$$.fragment,i),a=!0)},o(i){y(t.$$.fragment,i),a=!1},d(i){i&&h(e),T(t)}}}function ms(r){let e=r[2].includes(r[0].toLowerCase()),t,n,s=e&&Gt(r);return{c(){s&&s.c(),t=z()},l(a){s&&s.l(a),t=z()},m(a,i){s&&s.m(a,i),w(a,t,i),n=!0},p(a,[i]){i&5&&(e=a[2].includes(a[0].toLowerCase())),e?s?(s.p(a,i),i&5&&p(s,1)):(s=Gt(a),s.c(),p(s,1),s.m(t.parentNode,t)):s&&(x(),y(s,1,1,()=>{s=null}),$())},i(a){n||(p(s),n=!0)},o(a){y(s),n=!1},d(a){s&&s.d(a),a&&h(t)}}}function ds(r,e,t){let n,s,a,i;V(r,ye,o=>t(3,a=o)),V(r,ke,o=>t(4,i=o));let{name:l}=e;return r.$$set=o=>{"name"in o&&t(0,l=o.name)},r.$$.update=()=>{r.$$.dirty&16&&t(2,n=i.map(o=>o.name.toLowerCase())),r.$$.dirty&8&&t(1,s=a.name==="Classification")},[l,s,n,a,i]}class hs extends B{constructor(e){super(),P(this,e,ds,ms,D,{name:0})}}const An=async()=>{const r=be.retrieve(),e=Oe.retrieve();gs(r,e)},gs=async(r,e)=>{const t=await fetch(e+Ae.labelsEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({labels:r})}),n=await t.json();t.ok||alert(JSON.stringify(n.detail))},pt=()=>{const r=Y.retrieve(),{detection:e,segmentation:t,classification:n,prompts:s}=r;return L.layerGroup([e,t,n,s]).toGeoJSON()},tt=r=>{He.store(r)},bs=r=>{const e=ae.retrieve().name;r===e&&ee.samMaskRequest.enable()},vt=r=>r.reduce((t,{name:n,color:s})=>(t[n]=s,t),{});var _s={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const Pe=_s,Tn={};for(const r of Object.keys(Pe))Tn[Pe[r]]=r;const S={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var Bn=S;for(const r of Object.keys(S)){if(!("channels"in S[r]))throw new Error("missing channels property: "+r);if(!("labels"in S[r]))throw new Error("missing channel labels property: "+r);if(S[r].labels.length!==S[r].channels)throw new Error("channel and label counts mismatch: "+r);const{channels:e,labels:t}=S[r];delete S[r].channels,delete S[r].labels,Object.defineProperty(S[r],"channels",{value:e}),Object.defineProperty(S[r],"labels",{value:t})}S.rgb.hsl=function(r){const e=r[0]/255,t=r[1]/255,n=r[2]/255,s=Math.min(e,t,n),a=Math.max(e,t,n),i=a-s;let l,o;a===s?l=0:e===a?l=(t-n)/i:t===a?l=2+(n-e)/i:n===a&&(l=4+(e-t)/i),l=Math.min(l*60,360),l<0&&(l+=360);const c=(s+a)/2;return a===s?o=0:c<=.5?o=i/(a+s):o=i/(2-a-s),[l,o*100,c*100]};S.rgb.hsv=function(r){let e,t,n,s,a;const i=r[0]/255,l=r[1]/255,o=r[2]/255,c=Math.max(i,l,o),u=c-Math.min(i,l,o),f=function(g){return(c-g)/6/u+1/2};return u===0?(s=0,a=0):(a=u/c,e=f(i),t=f(l),n=f(o),i===c?s=n-t:l===c?s=1/3+e-n:o===c&&(s=2/3+t-e),s<0?s+=1:s>1&&(s-=1)),[s*360,a*100,c*100]};S.rgb.hwb=function(r){const e=r[0],t=r[1];let n=r[2];const s=S.rgb.hsl(r)[0],a=1/255*Math.min(e,Math.min(t,n));return n=1-1/255*Math.max(e,Math.max(t,n)),[s,a*100,n*100]};S.rgb.cmyk=function(r){const e=r[0]/255,t=r[1]/255,n=r[2]/255,s=Math.min(1-e,1-t,1-n),a=(1-e-s)/(1-s)||0,i=(1-t-s)/(1-s)||0,l=(1-n-s)/(1-s)||0;return[a*100,i*100,l*100,s*100]};function ps(r,e){return(r[0]-e[0])**2+(r[1]-e[1])**2+(r[2]-e[2])**2}S.rgb.keyword=function(r){const e=Tn[r];if(e)return e;let t=1/0,n;for(const s of Object.keys(Pe)){const a=Pe[s],i=ps(r,a);i<t&&(t=i,n=s)}return n};S.keyword.rgb=function(r){return Pe[r]};S.rgb.xyz=function(r){let e=r[0]/255,t=r[1]/255,n=r[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;const s=e*.4124+t*.3576+n*.1805,a=e*.2126+t*.7152+n*.0722,i=e*.0193+t*.1192+n*.9505;return[s*100,a*100,i*100]};S.rgb.lab=function(r){const e=S.rgb.xyz(r);let t=e[0],n=e[1],s=e[2];t/=95.047,n/=100,s/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,s=s>.008856?s**(1/3):7.787*s+16/116;const a=116*n-16,i=500*(t-n),l=200*(n-s);return[a,i,l]};S.hsl.rgb=function(r){const e=r[0]/360,t=r[1]/100,n=r[2]/100;let s,a,i;if(t===0)return i=n*255,[i,i,i];n<.5?s=n*(1+t):s=n+t-n*t;const l=2*n-s,o=[0,0,0];for(let c=0;c<3;c++)a=e+1/3*-(c-1),a<0&&a++,a>1&&a--,6*a<1?i=l+(s-l)*6*a:2*a<1?i=s:3*a<2?i=l+(s-l)*(2/3-a)*6:i=l,o[c]=i*255;return o};S.hsl.hsv=function(r){const e=r[0];let t=r[1]/100,n=r[2]/100,s=t;const a=Math.max(n,.01);n*=2,t*=n<=1?n:2-n,s*=a<=1?a:2-a;const i=(n+t)/2,l=n===0?2*s/(a+s):2*t/(n+t);return[e,l*100,i*100]};S.hsv.rgb=function(r){const e=r[0]/60,t=r[1]/100;let n=r[2]/100;const s=Math.floor(e)%6,a=e-Math.floor(e),i=255*n*(1-t),l=255*n*(1-t*a),o=255*n*(1-t*(1-a));switch(n*=255,s){case 0:return[n,o,i];case 1:return[l,n,i];case 2:return[i,n,o];case 3:return[i,l,n];case 4:return[o,i,n];case 5:return[n,i,l]}};S.hsv.hsl=function(r){const e=r[0],t=r[1]/100,n=r[2]/100,s=Math.max(n,.01);let a,i;i=(2-t)*n;const l=(2-t)*s;return a=t*s,a/=l<=1?l:2-l,a=a||0,i/=2,[e,a*100,i*100]};S.hwb.rgb=function(r){const e=r[0]/360;let t=r[1]/100,n=r[2]/100;const s=t+n;let a;s>1&&(t/=s,n/=s);const i=Math.floor(6*e),l=1-n;a=6*e-i,i&1&&(a=1-a);const o=t+a*(l-t);let c,u,f;switch(i){default:case 6:case 0:c=l,u=o,f=t;break;case 1:c=o,u=l,f=t;break;case 2:c=t,u=l,f=o;break;case 3:c=t,u=o,f=l;break;case 4:c=o,u=t,f=l;break;case 5:c=l,u=t,f=o;break}return[c*255,u*255,f*255]};S.cmyk.rgb=function(r){const e=r[0]/100,t=r[1]/100,n=r[2]/100,s=r[3]/100,a=1-Math.min(1,e*(1-s)+s),i=1-Math.min(1,t*(1-s)+s),l=1-Math.min(1,n*(1-s)+s);return[a*255,i*255,l*255]};S.xyz.rgb=function(r){const e=r[0]/100,t=r[1]/100,n=r[2]/100;let s,a,i;return s=e*3.2406+t*-1.5372+n*-.4986,a=e*-.9689+t*1.8758+n*.0415,i=e*.0557+t*-.204+n*1.057,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,a=a>.0031308?1.055*a**(1/2.4)-.055:a*12.92,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,s=Math.min(Math.max(0,s),1),a=Math.min(Math.max(0,a),1),i=Math.min(Math.max(0,i),1),[s*255,a*255,i*255]};S.xyz.lab=function(r){let e=r[0],t=r[1],n=r[2];e/=95.047,t/=100,n/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;const s=116*t-16,a=500*(e-t),i=200*(t-n);return[s,a,i]};S.lab.xyz=function(r){const e=r[0],t=r[1],n=r[2];let s,a,i;a=(e+16)/116,s=t/500+a,i=a-n/200;const l=a**3,o=s**3,c=i**3;return a=l>.008856?l:(a-16/116)/7.787,s=o>.008856?o:(s-16/116)/7.787,i=c>.008856?c:(i-16/116)/7.787,s*=95.047,a*=100,i*=108.883,[s,a,i]};S.lab.lch=function(r){const e=r[0],t=r[1],n=r[2];let s;s=Math.atan2(n,t)*360/2/Math.PI,s<0&&(s+=360);const i=Math.sqrt(t*t+n*n);return[e,i,s]};S.lch.lab=function(r){const e=r[0],t=r[1],s=r[2]/360*2*Math.PI,a=t*Math.cos(s),i=t*Math.sin(s);return[e,a,i]};S.rgb.ansi16=function(r,e=null){const[t,n,s]=r;let a=e===null?S.rgb.hsv(r)[2]:e;if(a=Math.round(a/50),a===0)return 30;let i=30+(Math.round(s/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return a===2&&(i+=60),i};S.hsv.ansi16=function(r){return S.rgb.ansi16(S.hsv.rgb(r),r[2])};S.rgb.ansi256=function(r){const e=r[0],t=r[1],n=r[2];return e===t&&t===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5)};S.ansi16.rgb=function(r){let e=r%10;if(e===0||e===7)return r>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(~~(r>50)+1)*.5,n=(e&1)*t*255,s=(e>>1&1)*t*255,a=(e>>2&1)*t*255;return[n,s,a]};S.ansi256.rgb=function(r){if(r>=232){const a=(r-232)*10+8;return[a,a,a]}r-=16;let e;const t=Math.floor(r/36)/5*255,n=Math.floor((e=r%36)/6)/5*255,s=e%6/5*255;return[t,n,s]};S.rgb.hex=function(r){const t=(((Math.round(r[0])&255)<<16)+((Math.round(r[1])&255)<<8)+(Math.round(r[2])&255)).toString(16).toUpperCase();return"000000".substring(t.length)+t};S.hex.rgb=function(r){const e=r.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=t.split("").map(l=>l+l).join(""));const n=parseInt(t,16),s=n>>16&255,a=n>>8&255,i=n&255;return[s,a,i]};S.rgb.hcg=function(r){const e=r[0]/255,t=r[1]/255,n=r[2]/255,s=Math.max(Math.max(e,t),n),a=Math.min(Math.min(e,t),n),i=s-a;let l,o;return i<1?l=a/(1-i):l=0,i<=0?o=0:s===e?o=(t-n)/i%6:s===t?o=2+(n-e)/i:o=4+(e-t)/i,o/=6,o%=1,[o*360,i*100,l*100]};S.hsl.hcg=function(r){const e=r[1]/100,t=r[2]/100,n=t<.5?2*e*t:2*e*(1-t);let s=0;return n<1&&(s=(t-.5*n)/(1-n)),[r[0],n*100,s*100]};S.hsv.hcg=function(r){const e=r[1]/100,t=r[2]/100,n=e*t;let s=0;return n<1&&(s=(t-n)/(1-n)),[r[0],n*100,s*100]};S.hcg.rgb=function(r){const e=r[0]/360,t=r[1]/100,n=r[2]/100;if(t===0)return[n*255,n*255,n*255];const s=[0,0,0],a=e%1*6,i=a%1,l=1-i;let o=0;switch(Math.floor(a)){case 0:s[0]=1,s[1]=i,s[2]=0;break;case 1:s[0]=l,s[1]=1,s[2]=0;break;case 2:s[0]=0,s[1]=1,s[2]=i;break;case 3:s[0]=0,s[1]=l,s[2]=1;break;case 4:s[0]=i,s[1]=0,s[2]=1;break;default:s[0]=1,s[1]=0,s[2]=l}return o=(1-t)*n,[(t*s[0]+o)*255,(t*s[1]+o)*255,(t*s[2]+o)*255]};S.hcg.hsv=function(r){const e=r[1]/100,t=r[2]/100,n=e+t*(1-e);let s=0;return n>0&&(s=e/n),[r[0],s*100,n*100]};S.hcg.hsl=function(r){const e=r[1]/100,n=r[2]/100*(1-e)+.5*e;let s=0;return n>0&&n<.5?s=e/(2*n):n>=.5&&n<1&&(s=e/(2*(1-n))),[r[0],s*100,n*100]};S.hcg.hwb=function(r){const e=r[1]/100,t=r[2]/100,n=e+t*(1-e);return[r[0],(n-e)*100,(1-n)*100]};S.hwb.hcg=function(r){const e=r[1]/100,n=1-r[2]/100,s=n-e;let a=0;return s<1&&(a=(n-s)/(1-s)),[r[0],s*100,a*100]};S.apple.rgb=function(r){return[r[0]/65535*255,r[1]/65535*255,r[2]/65535*255]};S.rgb.apple=function(r){return[r[0]/255*65535,r[1]/255*65535,r[2]/255*65535]};S.gray.rgb=function(r){return[r[0]/100*255,r[0]/100*255,r[0]/100*255]};S.gray.hsl=function(r){return[0,0,r[0]]};S.gray.hsv=S.gray.hsl;S.gray.hwb=function(r){return[0,100,r[0]]};S.gray.cmyk=function(r){return[0,0,0,r[0]]};S.gray.lab=function(r){return[r[0],0,0]};S.gray.hex=function(r){const e=Math.round(r[0]/100*255)&255,n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n};S.rgb.gray=function(r){return[(r[0]+r[1]+r[2])/3/255*100]};const Ke=Bn;function vs(){const r={},e=Object.keys(Ke);for(let t=e.length,n=0;n<t;n++)r[e[n]]={distance:-1,parent:null};return r}function ys(r){const e=vs(),t=[r];for(e[r].distance=0;t.length;){const n=t.pop(),s=Object.keys(Ke[n]);for(let a=s.length,i=0;i<a;i++){const l=s[i],o=e[l];o.distance===-1&&(o.distance=e[n].distance+1,o.parent=n,t.unshift(l))}}return e}function Ls(r,e){return function(t){return e(r(t))}}function ws(r,e){const t=[e[r].parent,r];let n=Ke[e[r].parent][r],s=e[r].parent;for(;e[s].parent;)t.unshift(e[s].parent),n=Ls(Ke[e[s].parent][s],n),s=e[s].parent;return n.conversion=t,n}var ks=function(r){const e=ys(r),t={},n=Object.keys(e);for(let s=n.length,a=0;a<s;a++){const i=n[a];e[i].parent!==null&&(t[i]=ws(i,e))}return t};const it=Bn,Cs=ks,Ie={},Es=Object.keys(it);function Ss(r){const e=function(...t){const n=t[0];return n==null?n:(n.length>1&&(t=n),r(t))};return"conversion"in r&&(e.conversion=r.conversion),e}function Is(r){const e=function(...t){const n=t[0];if(n==null)return n;n.length>1&&(t=n);const s=r(t);if(typeof s=="object")for(let a=s.length,i=0;i<a;i++)s[i]=Math.round(s[i]);return s};return"conversion"in r&&(e.conversion=r.conversion),e}Es.forEach(r=>{Ie[r]={},Object.defineProperty(Ie[r],"channels",{value:it[r].channels}),Object.defineProperty(Ie[r],"labels",{value:it[r].labels});const e=Cs(r);Object.keys(e).forEach(n=>{const s=e[n];Ie[r][n]=Is(s),Ie[r][n].raw=Ss(s)})});var Ms=Ie;const As=r=>{const[e,t,n]=Ms.hex.hsl(r);let a=e-206;return a<0&&(a+=360),[a,t,n]},Pn=async(r,e)=>{const t=vt(be.retrieve()),[n,s,a]=As(t[e]),i=r.getElement();if(!i)return;const l=e.replace(/\s/g,"");i.classList.add(`${l}-marker`);const o=`hue-rotate(${n}deg) saturate(${s}%)`;i.style.setProperty("filter",o),i.style.setProperty("opacity","0");const c=ae.retrieve().name;ye.getName()==="SAM"&&e===c&&i.style.setProperty("opacity","1")},Dn=async r=>{var o,c;if(r.geometry.type!=="Point")return;const[e,t]=r.geometry.coordinates;if(!e||!t)return;const n=L.latLng(t,e),s=L.marker(n),a=Y.addLayerWithProperties(s,r.properties,se.prompts);if(!((o=r.properties)!=null&&o.labels.length))return;const i=r.properties.labels[0];if(Pn(s,i),bs(i),((c=r.properties)==null?void 0:c.background)!==kn)return;await Ne();const l=a.getElement();l==null||l.classList.add("background-marker")},Ts=()=>{Bs();const r=Ps();Ds(r)},Bs=()=>{const r=pt();tt(r),Y.retrieve().prompts.getLayers().forEach(t=>{Y.removeLayer(t,se.prompts)})},Ps=()=>{var t;const r=He.retrieve();return{...r,features:(t=r==null?void 0:r.features)==null?void 0:t.filter(n=>{var s;return(s=n.properties)==null?void 0:s.prompt})}},Ds=r=>{var e;if((e=r.features)!=null&&e.length)for(const t of r.features)Dn(t)},ze=r=>{ae.retrieve().name!==r.name&&(ae.store(r),Ts())},Ns=(r,e)=>{Os(r,e),ze({name:r,color:e}),An()},Os=(r,e)=>{be.changeColor({name:r,color:e})};function Hs(r){let e,t,n,s;return{c(){e=k("input"),this.h()},l(a){e=C(a,"INPUT",{type:!0,name:!0,class:!0,style:!0}),this.h()},h(){d(e,"type","color"),d(e,"name","color"),d(e,"class","max-w-[35px] h-[28px] box-border"),d(e,"style",t=`opacity: ${r[1]};`)},m(a,i){w(a,e,i),ve(e,r[0]),n||(s=[te(e,"input",r[5]),te(e,"change",r[6])],n=!0)},p(a,[i]){i&2&&t!==(t=`opacity: ${a[1]};`)&&d(e,"style",t),i&1&&ve(e,a[0])},i:I,o:I,d(a){a&&h(e),n=!1,we(s)}}}function zs(r,e,t){let n,s;V(r,ce,u=>t(4,s=u));let{color:a}=e,{name:i}=e;const l=()=>{Ns(i,a)};function o(){a=this.value,t(0,a)}const c=()=>l();return r.$$set=u=>{"color"in u&&t(0,a=u.color),"name"in u&&t(3,i=u.name)},r.$$.update=()=>{r.$$.dirty&16&&t(1,{opacity:n}=s,n)},[a,n,l,i,s,o,c]}class js extends B{constructor(e){super(),P(this,e,zs,Hs,D,{color:0,name:3})}}function Vs(r){let e=Ht(r[0])+"",t;return{c(){t=G(e)},l(n){t=q(n,e)},m(n,s){w(n,t,s)},p(n,[s]){s&1&&e!==(e=Ht(n[0])+"")&&ne(t,e)},i:I,o:I,d(n){n&&h(t)}}}function Rs(r,e,t){let{name:n}=e;return r.$$set=s=>{"name"in s&&t(0,n=s.name)},[n]}class Gs extends B{constructor(e){super(),P(this,e,Rs,Vs,D,{name:0})}}function qs(r){let e,t,n,s,a,i,l,o,c,u,f;return t=new Gs({props:{name:r[4]}}),a=new hs({props:{name:r[4]}}),l=new js({props:{name:r[4],color:r[3]}}),{c(){e=k("button"),M(t.$$.fragment),n=O(),s=k("div"),M(a.$$.fragment),i=O(),M(l.$$.fragment),this.h()},l(g){e=C(g,"BUTTON",{class:!0});var m=v(e);N(t.$$.fragment,m),n=H(m),s=C(m,"DIV",{class:!0});var _=v(s);N(a.$$.fragment,_),i=H(_),N(l.$$.fragment,_),_.forEach(h),m.forEach(h),this.h()},h(){d(s,"class","flex h-full"),d(e,"class",o=`tab ${r[0].name===r[5].name&&!r[2]&&"text-[#202124] bg-lightgray"} w-full justify-between pl-2 pr-0 hover:text-[#2576E8]`)},m(g,m){w(g,e,m),A(t,e,null),b(e,n),b(e,s),A(a,s,null),b(s,i),A(l,s,null),c=!0,u||(f=te(e,"click",r[7]),u=!0)},p(g,[m]){const _={};m&16&&(_.name=g[4]),t.$set(_);const E={};m&16&&(E.name=g[4]),a.$set(E);const j={};m&16&&(j.name=g[4]),m&8&&(j.color=g[3]),l.$set(j),(!c||m&37&&o!==(o=`tab ${g[0].name===g[5].name&&!g[2]&&"text-[#202124] bg-lightgray"} w-full justify-between pl-2 pr-0 hover:text-[#2576E8]`))&&d(e,"class",o)},i(g){c||(p(t.$$.fragment,g),p(a.$$.fragment,g),p(l.$$.fragment,g),c=!0)},o(g){y(t.$$.fragment,g),y(a.$$.fragment,g),y(l.$$.fragment,g),c=!1},d(g){g&&h(e),T(t),T(a),T(l),u=!1,f()}}}function Fs(r,e,t){let n,s,a,i,l;V(r,ye,f=>t(6,i=f)),V(r,ae,f=>t(5,l=f));let{label:o,labelAction:c}=e;const u=()=>c(o);return r.$$set=f=>{"label"in f&&t(0,o=f.label),"labelAction"in f&&t(1,c=f.labelAction)},r.$$.update=()=>{r.$$.dirty&1&&t(4,{name:n,color:s}=o,n,(t(3,s),t(0,o))),r.$$.dirty&64&&t(2,a=i.name==="Classification")},[o,c,a,s,n,l,i,u]}class Us extends B{constructor(e){super(),P(this,e,Fs,qs,D,{label:0,labelAction:1})}}function qt(r,e,t){const n=r.slice();return n[2]=e[t],n}function Ft(r,e){let t,n,s;return n=new Us({props:{label:e[2],labelAction:e[0]}}),{key:r,first:null,c(){t=z(),M(n.$$.fragment),this.h()},l(a){t=z(),N(n.$$.fragment,a),this.h()},h(){this.first=t},m(a,i){w(a,t,i),A(n,a,i),s=!0},p(a,i){e=a;const l={};i&2&&(l.label=e[2]),i&1&&(l.labelAction=e[0]),n.$set(l)},i(a){s||(p(n.$$.fragment,a),s=!0)},o(a){y(n.$$.fragment,a),s=!1},d(a){a&&h(t),T(n,a)}}}function Ws(r){let e,t=[],n=new Map,s,a=r[1];const i=l=>l[2].name;for(let l=0;l<a.length;l+=1){let o=qt(r,a,l),c=i(o);n.set(c,t[l]=Ft(c,o))}return{c(){e=k("section");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=C(l,"SECTION",{class:!0,"aria-label":!0});var o=v(e);for(let c=0;c<t.length;c+=1)t[c].l(o);o.forEach(h),this.h()},h(){d(e,"class","flex-1 flex flex-col items-start w-full mt-5 max-h-[23vh] overflow-auto gap-1"),d(e,"aria-label","Label Selector")},m(l,o){w(l,e,o);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);s=!0},p(l,[o]){o&3&&(a=l[1],x(),t=gt(t,o,i,1,l,a,n,e,yn,Ft,null,qt),$())},i(l){if(!s){for(let o=0;o<a.length;o+=1)p(t[o]);s=!0}},o(l){for(let o=0;o<t.length;o+=1)y(t[o]);s=!1},d(l){l&&h(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function Zs(r,e,t){let n;V(r,be,a=>t(1,n=a));let{labelAction:s}=e;return r.$$set=a=>{"labelAction"in a&&t(0,s=a.labelAction)},[s,n]}class nt extends B{constructor(e){super(),P(this,e,Zs,Ws,D,{labelAction:0})}}function Js(r){let e,t;return e=new nt({props:{labelAction:is}}),{c(){M(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},p:I,i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}class Qs extends B{constructor(e){super(),P(this,e,null,Js,D,{})}}const Nn=r=>{const{layers:e}=r;e.eachLayer(t=>{Y.removeLayer(t,se.detection)}),ee.saving.enable()},On=r=>{const{layer:e}=r;e.options.color=ae.retrieve().color,e.options.fillOpacity=ce.retrieve().opacity,e.options.interactive=!1;const t=e.getBounds(),n={labels:[ae.retrieve().name],bbox:[[t._southWest.lat,t._northEast.lng],[t._northEast.lat,t._southWest.lng]]};Y.addLayerWithProperties(e,n,se.detection),ee.saving.enable()},Hn=r=>{const{layers:e}=r;e.eachLayer(t=>{if(t instanceof L.Rectangle){const n=t.getBounds();t.feature.properties.bbox=[[n.getSouthWest().lat,n.getNorthEast().lng],[n.getNorthEast().lat,n.getSouthWest().lng]]}t.feature.properties.updatedAt=new Date}),ee.saving.enable()},Ks=()=>{const r=K.retrieve();r&&(r.on(L.Draw.Event.CREATED,On),r.on(L.Draw.Event.EDITED,Hn),r.on(L.Draw.Event.DELETED,Nn))},Xs=()=>{const r=K.retrieve();r&&(r.off(L.Draw.Event.CREATED,On),r.off(L.Draw.Event.EDITED,Hn),r.off(L.Draw.Event.DELETED,Nn))},Ys=()=>{const r=K.retrieve();if(!r)return;const{detection:e}=Y.retrieve(),t=new L.Control.Draw({position:Cn,edit:{featureGroup:e},draw:mr});return r.addControl(t),xs(),t},xs=()=>{const r=document.getElementsByClassName("leaflet-draw-draw-rectangle")[0];r&&r.click()},$s=r=>{const e=K.retrieve();!e||!r||e.removeControl(r)};function ea(r,e,t){let n;V(r,Y,a=>t(1,n=a));let s;return Le(()=>{$s(s),t(0,s=null),Xs()}),r.$$.update=()=>{r.$$.dirty&3&&n!=null&&n.detection&&(s||(t(0,s=Ys()),Ks()))},[s,n]}class ta extends B{constructor(e){super(),P(this,e,ea,null,D,{})}}const na=()=>{const r=K.retrieve();if(!r)return;const{prompts:e}=Y.retrieve(),t=new L.Control.Draw({position:Cn,edit:{featureGroup:e},draw:dr});return r.addControl(t),ra(),t},ra=()=>{const r=document.getElementsByClassName("leaflet-draw-draw-marker")[0];r&&r.click()},sa=r=>{const e=K.retrieve();!e||!r||e.removeControl(r)},zn=async r=>{const e=ae.retrieve().name,t={labels:[e]},n=Y.addLayerWithProperties(r.layer,t,se.prompts);ee.saving.enable(),ee.samMaskRequest.enable(),await Ne(),Pn(n,e)},jn=r=>{const{layers:e}=r,t=K.retrieve();e.eachLayer(n=>{t.removeLayer(n)}),ee.saving.enable(),ee.samMaskRequest.enable()},Vn=async r=>{if(!document.getElementsByClassName("leaflet-draw-toolbar-button-enabled").length)return;const t=L.marker(r.latlng),n=ae.retrieve().name,s={background:kn,labels:[n]},a=Y.addLayerWithProperties(t,s,se.prompts);ee.saving.enable(),ee.samMaskRequest.enable(),await Ne();const i=a.getElement();i==null||i.classList.add("background-marker")},aa=()=>{const r=K.retrieve();r&&(ia(r),la(r),oa(r))},ia=r=>{r.on(L.Draw.Event.CREATED,zn)},la=r=>{r.on(L.Draw.Event.DELETED,jn)},oa=r=>{r.on("contextmenu",Vn)},ca=()=>{const r=K.retrieve();r&&(ua(r),fa(r),ma(r))},ua=r=>{r.off(L.Draw.Event.CREATED,zn)},fa=r=>{r.off(L.Draw.Event.DELETED,jn)},ma=r=>{r.off("contextmenu",Vn)};function da(r){let e;return De(()=>{e=na(),aa()}),Le(()=>{sa(e),ca()}),[]}class ha extends B{constructor(e){super(),P(this,e,da,null,D,{})}}const Rn=()=>{const{segmentation:r}=Y.retrieve(),e=ae.retrieve().name;let t;return r.eachLayer(n=>{var s,a;(a=(s=n.feature)==null?void 0:s.properties)!=null&&a.labels.includes(e)&&(t=n)}),t||null},ga=r=>r.toGeoJSON().features[0],ba=()=>{const r=Rn();return r?ga(r):null},{tasks:_a}=$e,pa=r=>{const e=Rn();e&&Y.removeLayer(e,se.segmentation),r&&r.properties&&(r.properties.labels=[ae.retrieve().name],r.properties[_a]=["segmentation"]);const t=ce.retrieve().opacity,n=L.geoJSON(r,{style:{color:ae.retrieve().color,weight:.4,fillOpacity:t,interactive:!1}}),s={labels:[ae.retrieve().name],multipolygon:!0};return Y.addLayerWithProperties(n,s,se.segmentation),ee.saving.enable(),n},Gn=(r=!1)=>{const e=K.retrieve();return e?L.control.paintPolygon({initData:ba,drawCallback:pa,selectEraser:r}).addTo(e):void 0},qn=r=>{const e=K.retrieve();!e||!r||e.removeControl(r)},va=()=>{const r="leaflet-control-paintpolygon-icon-eraser",e=document.getElementsByClassName(r)[0];return e?e.classList.contains("leaflet-control-paintpolygon-icon-active"):!1},ya=r=>{const e=va();return qn(r),Gn(e)};function La(r,e,t){let n,s,a;V(r,K,l=>t(1,n=l)),V(r,_e,l=>t(2,s=l)),V(r,ae,l=>t(3,a=l));let i;return De(async()=>{await We(()=>import("../chunks/PaintPolygon.51edf5e3.js"),["../chunks/PaintPolygon.51edf5e3.js","../assets/PaintPolygon.c10d0736.css"],import.meta.url),t(0,i=Gn())}),Le(()=>{qn(i),t(0,i=null)}),r.$$.update=()=>{r.$$.dirty&15&&a!=null&&a.name&&s!=null&&s.name&&n&&i&&t(0,i=ya(i))},[i,n,s,a]}class wa extends B{constructor(e){super(),P(this,e,La,null,D,{})}}const lt=ue(!0),ka=()=>{const r=Oe.retrieve(),{bands:e,stretch:t}=ce.retrieve(),n=Object.values(e).join(","),s=Object.values(t).join(","),a=hr,i=_e.retrieve().name;return`${r}images/${i}/{z}/{x}/{y}.png?bands=${n}&stretch=${s}&palette=${a}`};let Ue;const yt=async()=>{const r=K.retrieve(),e=_e.retrieve(),t=ka();if(!r||!e)return;Ue&&r.removeLayer(Ue),Ue=L.tileLayer(t,gr).addTo(r);const n=Ue.getContainer();await Ne(),n.ariaLabel=`${e.name} image layer`,X(lt)&&Ca(e,r)},Ca=(r,e)=>{const t=L.latLng(r.bbox[1],r.bbox[0]),n=L.latLng(r.bbox[3],r.bbox[2]),s=L.latLngBounds(t,n);e.fitBounds(s)},Lt=()=>{const r=ce.retrieve();br("options",r)},Ea=r=>{const{name:e,value:t}=r.target,n=Number(t);Sa(e,n),yt()},Sa=(r,e)=>{Ia(r,e),Lt()},Ia=(r,e)=>{ce.bands[r].store(e)},Ma=async r=>{var s;const[e,t]=_r(r);if(!(e&&t))return;let n=Aa((s=r.properties)==null?void 0:s.labels);ke.store(n),Mn()},Aa=r=>r.map(e=>({name:e})),Ta=async r=>{var i,l;const e=vt(be.retrieve()),t=ce.opacity.retrieve(),n=(i=r.properties)==null?void 0:i.labels[0],s=e[n],a=L.rectangle((l=r.properties)==null?void 0:l.bbox,{color:s,weight:En,fillOpacity:t,interactive:!1});Y.addLayerWithProperties(a,r.properties,se.detection)},Ba=async r=>{var l;const e=vt(be.retrieve()),t=ce.opacity.retrieve(),n=(l=r.properties)==null?void 0:l.labels[0],a={color:e[n],weight:En,fillOpacity:t,interactive:!1},i=L.geoJSON(r,{style:a});Y.addLayerWithProperties(i,r.properties,se.segmentation)},wt=r=>{Na(),Da(r)},{tasks:Pa}=$e,Da=r=>{r.features.forEach(e=>{var n,s;const t=(s=(n=e.properties)==null?void 0:n[Pa])==null?void 0:s[0];if(t){if(t.includes(se.classification)){Ma(e);return}if(t.includes(se.segmentation)){Ba(e);return}if(t.includes(se.detection)){Ta(e);return}if(t.includes(se.prompts)){Dn(e);return}}})},Na=()=>{ke.store([])},Fn=()=>{const r=K.retrieve();Y.clear(r);const e=He.retrieve();wt(e)},Oa=r=>{const{value:e}=r.target,t=Number(e);Ha(t),Fn()},Ha=r=>{za(r),Lt()},za=r=>{const e=r/100;ce.opacity.store(e)},ja=r=>{const{name:e,value:t}=r.target,n=Number(t);Va(e,n),yt()},Va=(r,e)=>{Ra(r,e),Lt()},Ra=(r,e)=>{ce.stretch[r].store(e)};function Ga(r){let e,t,n,s,a,i,l,o,c,u,f,g,m,_,E,j,Z,J,W,le,ie,pe,fe,me,Ee,st,he,Ve,at,St;return{c(){e=k("section"),t=k("legend"),n=k("span"),s=G("RGB bands"),a=O(),i=k("fieldset"),l=k("input"),o=O(),c=k("input"),u=O(),f=k("input"),g=O(),m=k("section"),_=k("legend"),E=k("span"),j=G("Stretch"),Z=O(),J=k("fieldset"),W=k("input"),le=O(),ie=k("input"),pe=O(),fe=k("section"),me=k("label"),Ee=G("Layer opacity"),st=O(),he=k("input"),this.h()},l(R){e=C(R,"SECTION",{});var re=v(e);t=C(re,"LEGEND",{class:!0});var It=v(t);n=C(It,"SPAN",{});var Mt=v(n);s=q(Mt,"RGB bands"),Mt.forEach(h),It.forEach(h),a=H(re),i=C(re,"FIELDSET",{class:!0});var Se=v(i);l=C(Se,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),o=H(Se),c=C(Se,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),u=H(Se),f=C(Se,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),Se.forEach(h),re.forEach(h),g=H(R),m=C(R,"SECTION",{});var Re=v(m);_=C(Re,"LEGEND",{class:!0});var At=v(_);E=C(At,"SPAN",{});var Tt=v(E);j=q(Tt,"Stretch"),Tt.forEach(h),At.forEach(h),Z=H(Re),J=C(Re,"FIELDSET",{class:!0});var Ge=v(J);W=C(Ge,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),le=H(Ge),ie=C(Ge,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),Ge.forEach(h),Re.forEach(h),pe=H(R),fe=C(R,"SECTION",{class:!0});var qe=v(fe);me=C(qe,"LABEL",{for:!0,class:!0});var Bt=v(me);Ee=q(Bt,"Layer opacity"),Bt.forEach(h),st=H(qe),he=C(qe,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),qe.forEach(h),this.h()},h(){d(t,"class","label"),l.required=!0,d(l,"type","number"),d(l,"placeholder","R"),d(l,"name","red"),d(l,"class","text-center input input-bordered input-error w-full max-w-xs svelte-7yy2hn"),l.value=r[0],c.required=!0,d(c,"type","number"),d(c,"placeholder","G"),d(c,"name","green"),d(c,"class","text-center input input-bordered input-success w-full max-w-xs svelte-7yy2hn"),c.value=r[1],f.required=!0,d(f,"type","number"),d(f,"placeholder","B"),d(f,"name","blue"),d(f,"class","text-center input input-bordered input-info w-full max-w-xs svelte-7yy2hn"),f.value=r[2],d(i,"class","flex gap-3"),d(_,"class","label"),W.required=!0,d(W,"type","number"),d(W,"placeholder","Minimum"),d(W,"name","minimum"),d(W,"class","input input-bordered w-full max-w-xs svelte-7yy2hn"),W.value=r[3],ie.required=!0,d(ie,"type","number"),d(ie,"placeholder","Maximum"),d(ie,"name","maximum"),d(ie,"class","input input-bordered w-full max-w-xs svelte-7yy2hn"),ie.value=r[4],d(J,"class","flex gap-3"),d(me,"for","opacity-range"),d(me,"class","label"),d(he,"id","opacity-range"),d(he,"type","range"),d(he,"min","0"),d(he,"max","100"),he.value=Ve=r[5]*100,d(he,"class","range range-primary svelte-7yy2hn"),d(fe,"class","flex flex-col gap-3")},m(R,re){w(R,e,re),b(e,t),b(t,n),b(n,s),b(e,a),b(e,i),b(i,l),b(i,o),b(i,c),b(i,u),b(i,f),w(R,g,re),w(R,m,re),b(m,_),b(_,E),b(E,j),b(m,Z),b(m,J),b(J,W),b(J,le),b(J,ie),w(R,pe,re),w(R,fe,re),b(fe,me),b(me,Ee),b(fe,st),b(fe,he),at||(St=[te(i,"input",Ea),te(J,"input",ja),te(he,"input",Oa)],at=!0)},p(R,re){re&1&&l.value!==R[0]&&(l.value=R[0]),re&2&&c.value!==R[1]&&(c.value=R[1]),re&4&&f.value!==R[2]&&(f.value=R[2]),re&8&&W.value!==R[3]&&(W.value=R[3]),re&16&&ie.value!==R[4]&&(ie.value=R[4]),re&32&&Ve!==(Ve=R[5]*100)&&(he.value=Ve)},d(R){R&&h(e),R&&h(g),R&&h(m),R&&h(pe),R&&h(fe),at=!1,we(St)}}}function qa(r){let e,t=ce&&Ga(r);return{c(){e=k("form"),t&&t.c(),this.h()},l(n){e=C(n,"FORM",{class:!0,id:!0});var s=v(e);t&&t.l(s),s.forEach(h),this.h()},h(){d(e,"class","flex-1 form-control w-full h-full max-w-xs flex flex-col gap-5 items text-xl"),d(e,"id","bands-and-stretch")},m(n,s){w(n,e,s),t&&t.m(e,null)},p(n,[s]){ce&&t.p(n,s)},i:I,o:I,d(n){n&&h(e),t&&t.d()}}}function Fa(r,e,t){let n;V(r,ce,u=>t(6,n=u));let s,a,i,l,o,c;return r.$$.update=()=>{r.$$.dirty&64&&t(0,{bands:{red:s,green:a,blue:i},stretch:{minimum:l,maximum:o},opacity:c}=n,s,(t(1,a),t(6,n)),(t(2,i),t(6,n)),(t(3,l),t(6,n)),(t(4,o),t(6,n)),(t(5,c),t(6,n)))},[s,a,i,l,o,c,n]}class Ua extends B{constructor(e){super(),P(this,e,Fa,qa,D,{})}}const ot=ue(!0);function Wa(r,e,t,n){var s,a,i=!1,l=t.length>=2,o=(_,E,j)=>{if(s=E,l&&(a=_),!i){let Z=e(_,E,j);if(e.length<2)E(Z);else return Z}i=!1},c=lr(r,o,n),u=!Array.isArray(r);function f(_){var E=t(_,a);u?(i=!0,r.set(E)):E.forEach((j,Z)=>{i=!0,r[Z].set(j)}),i=!1}var g=!1;function m(_){var E,j,Z,J;if(g){J=_(X(c)),s(J);return}var W=c.subscribe(le=>{g?E?j=!0:E=!0:Z=le});J=_(Z),g=!0,s(J),W(),g=!1,j&&(J=X(c)),E&&f(J)}return{subscribe:c.subscribe,set(_){m(()=>_)},update:m}}const Za=20,Ce=ue([]),kt=ue(null),Ze=new Map,Ut=r=>{if(Ze.has(r))return;const e=setTimeout(()=>{Ze.delete(r),Wn(r)},1e3);Ze.set(r,e)},Ja=r=>{const e=Ze.get(r);e&&clearTimeout(e)};function Un(r){r.id&&Ja(r.id),Ce.update(e=>e.map(t=>t.id===r.id?{...t,...r}:t))}function Qa(r){Ce.update(e=>[r,...e].slice(0,Za))}function Ka(r){X(Ce).find(e=>e.id===r.id)?Un(r):Qa(r)}function Xa(r){Ce.update(e=>(r?Ut(r):e.forEach(t=>{Ut(t.id)}),e.map(t=>t.id===r||r===void 0?{...t,visible:!1}:t)))}function Wn(r){Ce.update(e=>r===void 0?[]:e.filter(t=>t.id!==r))}function Ya(r){kt.set(r)}function xa(r){let e;kt.update(t=>(e=r-(t||0),null)),Ce.update(t=>t.map(n=>({...n,pauseDuration:n.pauseDuration+e})))}const $a={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3};function ei(r={}){return{toasts:Wa(Ce,t=>t.map(n=>{var s,a;return{...r,...r[n.type],...n,duration:n.duration||((s=r[n.type])==null?void 0:s.duration)||(r==null?void 0:r.duration)||$a[n.type],style:[r.style,(a=r[n.type])==null?void 0:a.style,n.style].join(";")}}),t=>t),pausedAt:kt}}const ti=r=>typeof r=="function",Wt=(r,e)=>ti(r)?r(e):r,ni=(()=>{let r=0;return()=>(r+=1,r.toString())})(),Zn=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){const e=matchMedia("(prefers-reduced-motion: reduce)");r=!e||e.matches}return r}})(),ri=(r,e="blank",t)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...t,id:(t==null?void 0:t.id)||ni()}),je=r=>(e,t)=>{const n=ri(e,r,t);return Ka(n),n.id},oe=(r,e)=>je("blank")(r,e);oe.error=je("error");oe.success=je("success");oe.loading=je("loading");oe.custom=je("custom");oe.dismiss=r=>{Xa(r)};oe.remove=r=>Wn(r);oe.promise=(r,e,t)=>{const n=oe.loading(e.loading,{...t,...t==null?void 0:t.loading});return r.then(s=>(oe.success(Wt(e.success,s),{id:n,...t,...t==null?void 0:t.success}),s)).catch(s=>{oe.error(Wt(e.error,s),{id:n,...t,...t==null?void 0:t.error})}),r};function si(r,e,t){const{reverseOrder:n,gutter:s=8,defaultPosition:a}=t||{},i=e.filter(u=>(u.position||a)===(r.position||a)&&u.height),l=i.findIndex(u=>u.id===r.id),o=i.filter((u,f)=>f<l&&u.visible).length;return i.filter(u=>u.visible).slice(...n?[o+1]:[0,o]).reduce((u,f)=>u+(f.height||0)+s,0)}const ai={startPause(){Ya(Date.now())},endPause(){xa(Date.now())},updateHeight:(r,e)=>{Un({id:r,height:e})},calculateOffset:si};function ii(r){const{toasts:e,pausedAt:t}=ei(r),n=new Map;let s;const a=[t.subscribe(i=>{if(i){for(const[,l]of n)clearTimeout(l);n.clear()}s=i}),e.subscribe(i=>{if(s)return;const l=Date.now();for(const o of i){if(n.has(o.id)||o.duration===1/0)continue;const c=(o.duration||0)+o.pauseDuration-(l-o.createdAt);if(c<0)return o.visible&&oe.dismiss(o.id),null;n.set(o.id,setTimeout(()=>oe.dismiss(o.id),c))}})];return Le(()=>{for(const i of a)i()}),{toasts:e,handlers:ai}}function li(r){let e;return{c(){e=k("div"),this.h()},l(t){e=C(t,"DIV",{class:!0}),v(e).forEach(h),this.h()},h(){d(e,"class","svelte-11kvm4p"),Q(e,"--primary",r[0]),Q(e,"--secondary",r[1])},m(t,n){w(t,e,n)},p(t,[n]){n&1&&Q(e,"--primary",t[0]),n&2&&Q(e,"--secondary",t[1])},i:I,o:I,d(t){t&&h(e)}}}function oi(r,e,t){let{primary:n="#61d345"}=e,{secondary:s="#fff"}=e;return r.$$set=a=>{"primary"in a&&t(0,n=a.primary),"secondary"in a&&t(1,s=a.secondary)},[n,s]}class ci extends B{constructor(e){super(),P(this,e,oi,li,D,{primary:0,secondary:1})}}function ui(r){let e;return{c(){e=k("div"),this.h()},l(t){e=C(t,"DIV",{class:!0}),v(e).forEach(h),this.h()},h(){d(e,"class","svelte-1ee93ns"),Q(e,"--primary",r[0]),Q(e,"--secondary",r[1])},m(t,n){w(t,e,n)},p(t,[n]){n&1&&Q(e,"--primary",t[0]),n&2&&Q(e,"--secondary",t[1])},i:I,o:I,d(t){t&&h(e)}}}function fi(r,e,t){let{primary:n="#ff4b4b"}=e,{secondary:s="#fff"}=e;return r.$$set=a=>{"primary"in a&&t(0,n=a.primary),"secondary"in a&&t(1,s=a.secondary)},[n,s]}class mi extends B{constructor(e){super(),P(this,e,fi,ui,D,{primary:0,secondary:1})}}function di(r){let e;return{c(){e=k("div"),this.h()},l(t){e=C(t,"DIV",{class:!0}),v(e).forEach(h),this.h()},h(){d(e,"class","svelte-1j7dflg"),Q(e,"--primary",r[0]),Q(e,"--secondary",r[1])},m(t,n){w(t,e,n)},p(t,[n]){n&1&&Q(e,"--primary",t[0]),n&2&&Q(e,"--secondary",t[1])},i:I,o:I,d(t){t&&h(e)}}}function hi(r,e,t){let{primary:n="#616161"}=e,{secondary:s="#e0e0e0"}=e;return r.$$set=a=>{"primary"in a&&t(0,n=a.primary),"secondary"in a&&t(1,s=a.secondary)},[n,s]}class gi extends B{constructor(e){super(),P(this,e,hi,di,D,{primary:0,secondary:1})}}function bi(r){let e,t,n,s;const a=[r[0]];let i={};for(let o=0;o<a.length;o+=1)i=Xe(i,a[o]);t=new gi({props:i});let l=r[2]!=="loading"&&Zt(r);return{c(){e=k("div"),M(t.$$.fragment),n=O(),l&&l.c(),this.h()},l(o){e=C(o,"DIV",{class:!0});var c=v(e);N(t.$$.fragment,c),n=H(c),l&&l.l(c),c.forEach(h),this.h()},h(){d(e,"class","indicator svelte-1kgeier")},m(o,c){w(o,e,c),A(t,e,null),b(e,n),l&&l.m(e,null),s=!0},p(o,c){const u=c&1?Ye(a,[bt(o[0])]):{};t.$set(u),o[2]!=="loading"?l?(l.p(o,c),c&4&&p(l,1)):(l=Zt(o),l.c(),p(l,1),l.m(e,null)):l&&(x(),y(l,1,1,()=>{l=null}),$())},i(o){s||(p(t.$$.fragment,o),p(l),s=!0)},o(o){y(t.$$.fragment,o),y(l),s=!1},d(o){o&&h(e),T(t),l&&l.d()}}}function _i(r){let e,t,n;var s=r[1];function a(i){return{}}return s&&(e=de(s,a())),{c(){e&&M(e.$$.fragment),t=z()},l(i){e&&N(e.$$.fragment,i),t=z()},m(i,l){e&&A(e,i,l),w(i,t,l),n=!0},p(i,l){if(l&2&&s!==(s=i[1])){if(e){x();const o=e;y(o.$$.fragment,1,0,()=>{T(o,1)}),$()}s?(e=de(s,a()),M(e.$$.fragment),p(e.$$.fragment,1),A(e,t.parentNode,t)):e=null}},i(i){n||(e&&p(e.$$.fragment,i),n=!0)},o(i){e&&y(e.$$.fragment,i),n=!1},d(i){i&&h(t),e&&T(e,i)}}}function pi(r){let e,t;return{c(){e=k("div"),t=G(r[1]),this.h()},l(n){e=C(n,"DIV",{class:!0});var s=v(e);t=q(s,r[1]),s.forEach(h),this.h()},h(){d(e,"class","animated svelte-1kgeier")},m(n,s){w(n,e,s),b(e,t)},p(n,s){s&2&&ne(t,n[1])},i:I,o:I,d(n){n&&h(e)}}}function Zt(r){let e,t,n,s;const a=[yi,vi],i=[];function l(o,c){return o[2]==="error"?0:1}return t=l(r),n=i[t]=a[t](r),{c(){e=k("div"),n.c(),this.h()},l(o){e=C(o,"DIV",{class:!0});var c=v(e);n.l(c),c.forEach(h),this.h()},h(){d(e,"class","status svelte-1kgeier")},m(o,c){w(o,e,c),i[t].m(e,null),s=!0},p(o,c){let u=t;t=l(o),t===u?i[t].p(o,c):(x(),y(i[u],1,1,()=>{i[u]=null}),$(),n=i[t],n?n.p(o,c):(n=i[t]=a[t](o),n.c()),p(n,1),n.m(e,null))},i(o){s||(p(n),s=!0)},o(o){y(n),s=!1},d(o){o&&h(e),i[t].d()}}}function vi(r){let e,t;const n=[r[0]];let s={};for(let a=0;a<n.length;a+=1)s=Xe(s,n[a]);return e=new ci({props:s}),{c(){M(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,i){A(e,a,i),t=!0},p(a,i){const l=i&1?Ye(n,[bt(a[0])]):{};e.$set(l)},i(a){t||(p(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){T(e,a)}}}function yi(r){let e,t;const n=[r[0]];let s={};for(let a=0;a<n.length;a+=1)s=Xe(s,n[a]);return e=new mi({props:s}),{c(){M(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,i){A(e,a,i),t=!0},p(a,i){const l=i&1?Ye(n,[bt(a[0])]):{};e.$set(l)},i(a){t||(p(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){T(e,a)}}}function Li(r){let e,t,n,s;const a=[pi,_i,bi],i=[];function l(o,c){return typeof o[1]=="string"?0:typeof o[1]<"u"?1:o[2]!=="blank"?2:-1}return~(e=l(r))&&(t=i[e]=a[e](r)),{c(){t&&t.c(),n=z()},l(o){t&&t.l(o),n=z()},m(o,c){~e&&i[e].m(o,c),w(o,n,c),s=!0},p(o,[c]){let u=e;e=l(o),e===u?~e&&i[e].p(o,c):(t&&(x(),y(i[u],1,1,()=>{i[u]=null}),$()),~e?(t=i[e],t?t.p(o,c):(t=i[e]=a[e](o),t.c()),p(t,1),t.m(n.parentNode,n)):t=null)},i(o){s||(p(t),s=!0)},o(o){y(t),s=!1},d(o){~e&&i[e].d(o),o&&h(n)}}}function wi(r,e,t){let n,s,a,{toast:i}=e;return r.$$set=l=>{"toast"in l&&t(3,i=l.toast)},r.$$.update=()=>{r.$$.dirty&8&&t(2,{type:n,icon:s,iconTheme:a}=i,n,(t(1,s),t(3,i)),(t(0,a),t(3,i)))},[a,s,n,i]}class Ct extends B{constructor(e){super(),P(this,e,wi,Li,D,{toast:3})}}function ki(r){let e,t,n;var s=r[0].message;function a(i){return{props:{toast:i[0]}}}return s&&(e=de(s,a(r))),{c(){e&&M(e.$$.fragment),t=z()},l(i){e&&N(e.$$.fragment,i),t=z()},m(i,l){e&&A(e,i,l),w(i,t,l),n=!0},p(i,l){const o={};if(l&1&&(o.toast=i[0]),l&1&&s!==(s=i[0].message)){if(e){x();const c=e;y(c.$$.fragment,1,0,()=>{T(c,1)}),$()}s?(e=de(s,a(i)),M(e.$$.fragment),p(e.$$.fragment,1),A(e,t.parentNode,t)):e=null}else s&&e.$set(o)},i(i){n||(e&&p(e.$$.fragment,i),n=!0)},o(i){e&&y(e.$$.fragment,i),n=!1},d(i){i&&h(t),e&&T(e,i)}}}function Ci(r){let e=r[0].message+"",t;return{c(){t=G(e)},l(n){t=q(n,e)},m(n,s){w(n,t,s)},p(n,s){s&1&&e!==(e=n[0].message+"")&&ne(t,e)},i:I,o:I,d(n){n&&h(t)}}}function Ei(r){let e,t,n,s;const a=[Ci,ki],i=[];function l(u,f){return typeof u[0].message=="string"?0:1}t=l(r),n=i[t]=a[t](r);let o=[{class:"message"},r[0].ariaProps],c={};for(let u=0;u<o.length;u+=1)c=Xe(c,o[u]);return{c(){e=k("div"),n.c(),this.h()},l(u){e=C(u,"DIV",{class:!0});var f=v(e);n.l(f),f.forEach(h),this.h()},h(){Pt(e,c),Te(e,"svelte-1nauejd",!0)},m(u,f){w(u,e,f),i[t].m(e,null),s=!0},p(u,[f]){let g=t;t=l(u),t===g?i[t].p(u,f):(x(),y(i[g],1,1,()=>{i[g]=null}),$(),n=i[t],n?n.p(u,f):(n=i[t]=a[t](u),n.c()),p(n,1),n.m(e,null)),Pt(e,c=Ye(o,[{class:"message"},f&1&&u[0].ariaProps])),Te(e,"svelte-1nauejd",!0)},i(u){s||(p(n),s=!0)},o(u){y(n),s=!1},d(u){u&&h(e),i[t].d()}}}function Si(r,e,t){let{toast:n}=e;return r.$$set=s=>{"toast"in s&&t(0,n=s.toast)},[n]}class rt extends B{constructor(e){super(),P(this,e,Si,Ei,D,{toast:0})}}const Ii=r=>({toast:r&1}),Jt=r=>({ToastIcon:Ct,ToastMessage:rt,toast:r[0]});function Mi(r){let e;const t=r[6].default,n=ft(t,r,r[7],Jt),s=n||Ti(r);return{c(){s&&s.c()},l(a){s&&s.l(a)},m(a,i){s&&s.m(a,i),e=!0},p(a,i){n?n.p&&(!e||i&129)&&mt(n,t,a,a[7],e?ht(t,a[7],i,Ii):dt(a[7]),Jt):s&&s.p&&(!e||i&1)&&s.p(a,e?i:-1)},i(a){e||(p(s,a),e=!0)},o(a){y(s,a),e=!1},d(a){s&&s.d(a)}}}function Ai(r){let e,t,n;var s=r[2];function a(i){return{props:{$$slots:{message:[Pi],icon:[Bi]},$$scope:{ctx:i}}}}return s&&(e=de(s,a(r))),{c(){e&&M(e.$$.fragment),t=z()},l(i){e&&N(e.$$.fragment,i),t=z()},m(i,l){e&&A(e,i,l),w(i,t,l),n=!0},p(i,l){const o={};if(l&129&&(o.$$scope={dirty:l,ctx:i}),l&4&&s!==(s=i[2])){if(e){x();const c=e;y(c.$$.fragment,1,0,()=>{T(c,1)}),$()}s?(e=de(s,a(i)),M(e.$$.fragment),p(e.$$.fragment,1),A(e,t.parentNode,t)):e=null}else s&&e.$set(o)},i(i){n||(e&&p(e.$$.fragment,i),n=!0)},o(i){e&&y(e.$$.fragment,i),n=!1},d(i){i&&h(t),e&&T(e,i)}}}function Ti(r){let e,t,n,s;return e=new Ct({props:{toast:r[0]}}),n=new rt({props:{toast:r[0]}}),{c(){M(e.$$.fragment),t=O(),M(n.$$.fragment)},l(a){N(e.$$.fragment,a),t=H(a),N(n.$$.fragment,a)},m(a,i){A(e,a,i),w(a,t,i),A(n,a,i),s=!0},p(a,i){const l={};i&1&&(l.toast=a[0]),e.$set(l);const o={};i&1&&(o.toast=a[0]),n.$set(o)},i(a){s||(p(e.$$.fragment,a),p(n.$$.fragment,a),s=!0)},o(a){y(e.$$.fragment,a),y(n.$$.fragment,a),s=!1},d(a){T(e,a),a&&h(t),T(n,a)}}}function Bi(r){let e,t;return e=new Ct({props:{toast:r[0],slot:"icon"}}),{c(){M(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},p(n,s){const a={};s&1&&(a.toast=n[0]),e.$set(a)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function Pi(r){let e,t;return e=new rt({props:{toast:r[0],slot:"message"}}),{c(){M(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},p(n,s){const a={};s&1&&(a.toast=n[0]),e.$set(a)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function Di(r){let e,t,n,s,a,i;const l=[Ai,Mi],o=[];function c(u,f){return u[2]?0:1}return t=c(r),n=o[t]=l[t](r),{c(){e=k("div"),n.c(),this.h()},l(u){e=C(u,"DIV",{class:!0,style:!0});var f=v(e);n.l(f),f.forEach(h),this.h()},h(){d(e,"class",s="base "+(r[0].height?r[4]:"transparent")+" "+(r[0].className||"")+" svelte-ug60r4"),d(e,"style",a=r[1]+"; "+r[0].style),Q(e,"--factor",r[3])},m(u,f){w(u,e,f),o[t].m(e,null),i=!0},p(u,[f]){let g=t;t=c(u),t===g?o[t].p(u,f):(x(),y(o[g],1,1,()=>{o[g]=null}),$(),n=o[t],n?n.p(u,f):(n=o[t]=l[t](u),n.c()),p(n,1),n.m(e,null)),(!i||f&17&&s!==(s="base "+(u[0].height?u[4]:"transparent")+" "+(u[0].className||"")+" svelte-ug60r4"))&&d(e,"class",s),(!i||f&3&&a!==(a=u[1]+"; "+u[0].style))&&d(e,"style",a),(f&3||f&11)&&Q(e,"--factor",u[3])},i(u){i||(p(n),i=!0)},o(u){y(n),i=!1},d(u){u&&h(e),o[t].d()}}}function Ni(r,e,t){let{$$slots:n={},$$scope:s}=e,{toast:a}=e,{position:i=void 0}=e,{style:l=""}=e,{Component:o=void 0}=e,c,u;return r.$$set=f=>{"toast"in f&&t(0,a=f.toast),"position"in f&&t(5,i=f.position),"style"in f&&t(1,l=f.style),"Component"in f&&t(2,o=f.Component),"$$scope"in f&&t(7,s=f.$$scope)},r.$$.update=()=>{if(r.$$.dirty&33){const f=(a.position||i||"top-center").includes("top");t(3,c=f?1:-1);const[g,m]=Zn()?["fadeIn","fadeOut"]:["enter","exit"];t(4,u=a.visible?g:m)}},[a,l,o,c,u,i,n,s]}class Oi extends B{constructor(e){super(),P(this,e,Ni,Di,D,{toast:0,position:5,style:1,Component:2})}}const Hi=r=>({toast:r&1}),Qt=r=>({toast:r[0]});function zi(r){let e;const t=r[8].default,n=ft(t,r,r[7],Qt),s=n||Vi(r);return{c(){s&&s.c()},l(a){s&&s.l(a)},m(a,i){s&&s.m(a,i),e=!0},p(a,i){n?n.p&&(!e||i&129)&&mt(n,t,a,a[7],e?ht(t,a[7],i,Hi):dt(a[7]),Qt):s&&s.p&&(!e||i&1)&&s.p(a,e?i:-1)},i(a){e||(p(s,a),e=!0)},o(a){y(s,a),e=!1},d(a){s&&s.d(a)}}}function ji(r){let e,t;return e=new rt({props:{toast:r[0]}}),{c(){M(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},p(n,s){const a={};s&1&&(a.toast=n[0]),e.$set(a)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function Vi(r){let e,t;return e=new Oi({props:{toast:r[0],position:r[0].position}}),{c(){M(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},p(n,s){const a={};s&1&&(a.toast=n[0]),s&1&&(a.position=n[0].position),e.$set(a)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function Ri(r){let e,t,n,s;const a=[ji,zi],i=[];function l(o,c){return o[0].type==="custom"?0:1}return t=l(r),n=i[t]=a[t](r),{c(){e=k("div"),n.c(),this.h()},l(o){e=C(o,"DIV",{class:!0});var c=v(e);n.l(c),c.forEach(h),this.h()},h(){d(e,"class","wrapper svelte-v01oml"),Te(e,"active",r[0].visible),Te(e,"transition",!Zn()),Q(e,"--factor",r[3]),Q(e,"--offset",r[0].offset),Q(e,"top",r[5]),Q(e,"bottom",r[4]),Q(e,"justify-content",r[2])},m(o,c){w(o,e,c),i[t].m(e,null),r[9](e),s=!0},p(o,[c]){let u=t;t=l(o),t===u?i[t].p(o,c):(x(),y(i[u],1,1,()=>{i[u]=null}),$(),n=i[t],n?n.p(o,c):(n=i[t]=a[t](o),n.c()),p(n,1),n.m(e,null)),(!s||c&1)&&Te(e,"active",o[0].visible),c&8&&Q(e,"--factor",o[3]),c&1&&Q(e,"--offset",o[0].offset),c&32&&Q(e,"top",o[5]),c&16&&Q(e,"bottom",o[4]),c&4&&Q(e,"justify-content",o[2])},i(o){s||(p(n),s=!0)},o(o){y(n),s=!1},d(o){o&&h(e),i[t].d(),r[9](null)}}}function Gi(r,e,t){let n,s,a,i,{$$slots:l={},$$scope:o}=e,{toast:c}=e,{setHeight:u}=e,f;De(()=>{u(f.getBoundingClientRect().height)});function g(m){Ln[m?"unshift":"push"](()=>{f=m,t(1,f)})}return r.$$set=m=>{"toast"in m&&t(0,c=m.toast),"setHeight"in m&&t(6,u=m.setHeight),"$$scope"in m&&t(7,o=m.$$scope)},r.$$.update=()=>{var m,_,E,j,Z,J;r.$$.dirty&1&&t(5,n=(m=c.position)!=null&&m.includes("top")?0:null),r.$$.dirty&1&&t(4,s=(_=c.position)!=null&&_.includes("bottom")?0:null),r.$$.dirty&1&&t(3,a=(E=c.position)!=null&&E.includes("top")?1:-1),r.$$.dirty&1&&t(2,i=((j=c.position)==null?void 0:j.includes("center"))&&"center"||(((Z=c.position)==null?void 0:Z.includes("right"))||((J=c.position)==null?void 0:J.includes("end")))&&"flex-end"||null)},[c,f,i,a,s,n,u,o,l,g]}class qi extends B{constructor(e){super(),P(this,e,Gi,Ri,D,{toast:0,setHeight:6})}}function Kt(r,e,t){const n=r.slice();return n[11]=e[t],n}function Xt(r,e){let t,n,s;function a(...i){return e[10](e[11],...i)}return n=new qi({props:{toast:e[11],setHeight:a}}),{key:r,first:null,c(){t=z(),M(n.$$.fragment),this.h()},l(i){t=z(),N(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,l){w(i,t,l),A(n,i,l),s=!0},p(i,l){e=i;const o={};l&4&&(o.toast=e[11]),l&4&&(o.setHeight=a),n.$set(o)},i(i){s||(p(n.$$.fragment,i),s=!0)},o(i){y(n.$$.fragment,i),s=!1},d(i){i&&h(t),T(n,i)}}}function Fi(r){let e,t=[],n=new Map,s,a,i,l,o=r[2];const c=u=>u[11].id;for(let u=0;u<o.length;u+=1){let f=Kt(r,o,u),g=c(f);n.set(g,t[u]=Xt(g,f))}return{c(){e=k("div");for(let u=0;u<t.length;u+=1)t[u].c();this.h()},l(u){e=C(u,"DIV",{class:!0,style:!0,role:!0});var f=v(e);for(let g=0;g<t.length;g+=1)t[g].l(f);f.forEach(h),this.h()},h(){d(e,"class",s="toaster "+(r[1]||"")+" svelte-1phplh9"),d(e,"style",r[0]),d(e,"role","alert")},m(u,f){w(u,e,f);for(let g=0;g<t.length;g+=1)t[g]&&t[g].m(e,null);a=!0,i||(l=[te(e,"mouseenter",r[4].startPause),te(e,"mouseleave",r[4].endPause)],i=!0)},p(u,[f]){f&20&&(o=u[2],x(),t=gt(t,f,c,1,u,o,n,e,yn,Xt,null,Kt),$()),(!a||f&2&&s!==(s="toaster "+(u[1]||"")+" svelte-1phplh9"))&&d(e,"class",s),(!a||f&1)&&d(e,"style",u[0])},i(u){if(!a){for(let f=0;f<o.length;f+=1)p(t[f]);a=!0}},o(u){for(let f=0;f<t.length;f+=1)y(t[f]);a=!1},d(u){u&&h(e);for(let f=0;f<t.length;f+=1)t[f].d();i=!1,we(l)}}}function Ui(r,e,t){let n,{reverseOrder:s=!1}=e,{position:a="top-center"}=e,{toastOptions:i=void 0}=e,{gutter:l=8}=e,{containerStyle:o=void 0}=e,{containerClassName:c=void 0}=e;const{toasts:u,handlers:f}=ii(i);V(r,u,_=>t(9,n=_));let g;const m=(_,E)=>f.updateHeight(_.id,E);return r.$$set=_=>{"reverseOrder"in _&&t(5,s=_.reverseOrder),"position"in _&&t(6,a=_.position),"toastOptions"in _&&t(7,i=_.toastOptions),"gutter"in _&&t(8,l=_.gutter),"containerStyle"in _&&t(0,o=_.containerStyle),"containerClassName"in _&&t(1,c=_.containerClassName)},r.$$.update=()=>{r.$$.dirty&864&&t(2,g=n.map(_=>({..._,position:_.position||a,offset:f.calculateOffset(_,n,{reverseOrder:s,gutter:l,defaultPosition:a})})))},[o,c,g,u,f,s,a,i,l,n,m]}class Wi extends B{constructor(e){super(),P(this,e,Ui,Fi,D,{reverseOrder:5,position:6,toastOptions:7,gutter:8,containerStyle:0,containerClassName:1})}}const Et=(r,e,t)=>{const{loading:n,success:s}=t;oe.promise(r,{loading:n,success:s,error:()=>e})},Zi=r=>JSON.stringify({geojson:r,name:_e.retrieve().name}),Jn=async()=>{const r=pt();tt(r),_t();const e=Zi(r);let t=Qe;const n=new Promise(async(s,a)=>{try{const i=await Sn(e,Ae.geojsonEndpoint);if(!i.ok)throw i.statusText&&(t=Qe),new Error;const l=await i.json();s()}catch{a()}});ee.saving.disable(),xe(),Et(n,t,pr)},Qn=()=>{ee.saving.retrieve()&&(vr()&&Jn(),ee.saving.disable())},Kn=r=>{ye.getName()!==r.name&&(Qn(),ee.saving.disable(),ee.samMaskRequest.disable(),ye.set(r),Fn())},Ji=r=>{const e=r.getBounds();K.retrieve().fitBounds(e)};function Qi(){const r=ue(0),{subscribe:e,set:t}=r;return{subscribe:e,set:n=>t(n)}}const Me=Qi(),Ki=(r,e)=>{if(r<0)return;const t=Xi(r);Me.set(t),Yi(e)},Xi=r=>Math.floor(r/ge)*ge,Yi=r=>{const e=document.getElementById("image-selector"),t=document.getElementById(r);!e||!t||t.scrollIntoView({behavior:"smooth"})},Xn=()=>{const r=K.retrieve();r&&Y.init(r)},Yn=()=>{const r=K.retrieve();r&&(yr(),Y.remove(r))},xi=()=>{Yn(),Xn()},$i=r=>{tt(r),wt(r)},el=async()=>{var a;const r=Oe.retrieve();Be.markAnnotationsAsLoading();const e=(a=_e.retrieve())==null?void 0:a.name;if(!e)return;const t=r+Ae.geojsonEndpoint+"/"+e,n=await fetch(t);if(!n.ok)return;const s=await n.json();if(!s.status_code)return s},ct=async r=>{const e=_e.retrieve().name;if(r.name===e)return;Qn(),ee.saving.disable(),ee.samMaskRequest.disable(),_e.store(r),yt(),xi(),ke.empty(),He.empty();const t=await el();Be.markAnnotationsAsLoaded(),!(!t||!t.features)&&$i(t)},tl=r=>{if(!r.length)return;const e=nl(r),t=rl(e,r);return sl(t)},nl=r=>r.map(t=>{const n=t.bbox,s=L.latLng(n[1],n[0]),a=L.latLng(n[3],n[2]);return L.latLngBounds(s,a)}),rl=(r,e)=>r.map((t,n)=>L.rectangle(t,{color:"blue",weight:2,fillOpacity:0}).on("click",()=>{var s;ct(e[n]),Kn($n),Ki(n,(s=e[n])==null?void 0:s.name)})),sl=r=>{const e=K.retrieve(),t=L.featureGroup(r).addTo(e);return X(ot)&&Ji(t),t};function al(r){let e,t,n,s,a,i,l,o,c,u,f,g,m,_,E,j,Z,J;return t=new nt({props:{labelAction:ze}}),{c(){e=k("section"),M(t.$$.fragment),n=O(),s=k("div"),a=k("label"),i=k("input"),l=O(),o=k("span"),c=G("Zoom out on Quick selection"),u=O(),f=k("label"),g=k("input"),m=O(),_=k("span"),E=G("Zoom in on selecting image"),this.h()},l(W){e=C(W,"SECTION",{class:!0});var le=v(e);N(t.$$.fragment,le),n=H(le),s=C(le,"DIV",{class:!0});var ie=v(s);a=C(ie,"LABEL",{class:!0,for:!0});var pe=v(a);i=C(pe,"INPUT",{type:!0,id:!0,class:!0}),l=H(pe),o=C(pe,"SPAN",{class:!0});var fe=v(o);c=q(fe,"Zoom out on Quick selection"),fe.forEach(h),pe.forEach(h),u=H(ie),f=C(ie,"LABEL",{class:!0,for:!0});var me=v(f);g=C(me,"INPUT",{type:!0,id:!0,class:!0}),m=H(me),_=C(me,"SPAN",{class:!0});var Ee=v(_);E=q(Ee,"Zoom in on selecting image"),Ee.forEach(h),me.forEach(h),ie.forEach(h),le.forEach(h),this.h()},h(){d(i,"type","checkbox"),d(i,"id","zoom-out"),d(i,"class","checkbox checkbox-info"),d(o,"class","label-text text-gray-600"),d(a,"class","label cursor-pointer flex justify-start gap-5 text-slate-400"),d(a,"for","zoom-out"),d(g,"type","checkbox"),d(g,"id","zoom-in"),d(g,"class","checkbox checkbox-info"),d(_,"class","label-text text-gray-600"),d(f,"class","label cursor-pointer flex justify-start gap-5 text-slate-400"),d(f,"for","zoom-in"),d(s,"class","form-control"),d(e,"class","flex-1 flex flex-col justify-between")},m(W,le){w(W,e,le),A(t,e,null),b(e,n),b(e,s),b(s,a),b(a,i),i.checked=r[0],b(a,l),b(a,o),b(o,c),b(s,u),b(s,f),b(f,g),g.checked=r[1],b(f,m),b(f,_),b(_,E),j=!0,Z||(J=[te(i,"change",r[3]),te(g,"change",r[4])],Z=!0)},p(W,[le]){le&1&&(i.checked=W[0]),le&2&&(g.checked=W[1])},i(W){j||(p(t.$$.fragment,W),j=!0)},o(W){y(t.$$.fragment,W),j=!1},d(W){W&&h(e),T(t),Z=!1,we(J)}}}function il(r,e,t){let n,s,a;V(r,et,c=>t(2,n=c)),V(r,ot,c=>t(0,s=c)),V(r,lt,c=>t(1,a=c));let i=[];Le(()=>{i.clearLayers&&(i==null||i.clearLayers())});function l(){s=this.checked,ot.set(s)}function o(){a=this.checked,lt.set(a)}return r.$$.update=()=>{r.$$.dirty&4&&n.length&&(i=tl(n))},[s,a,n,l,o]}class ll extends B{constructor(e){super(),P(this,e,il,al,D,{})}}const ol=()=>{const{prompts:r}=Y.retrieve(),e=Lr(r),t=wr(e),n=kr(e),s=_e.retrieve().name,a=ae.retrieve().name,{bands:i,stretch:l}=ce.retrieve();return JSON.stringify({points:t,pointsLabel:n,image:s,label:a,bands:{bands:i,stretch:l}})},cl=r=>{ml();const e=ul(r);wt(e),xe()},ul=r=>{const e=fl();return{...e,features:[...e.features,...r.features]}},fl=()=>{var s;const r=ae.retrieve().name,e=He.retrieve(),t=(s=e==null?void 0:e.features)==null?void 0:s.filter(a=>{var i;return a.geometry.type!=="MultiPolygon"||!((i=a.properties)!=null&&i.labels.includes(r))});return{...e,features:t}},ml=()=>{const r=X(K);Y.clear(r)},dl=async()=>{tt(pt()),Cr(),_t(),In();const r=ol();let e=Qe;const t=new Promise(async(n,s)=>{try{const a=await Sn(r,Ae.samEndpoint);if(!a.ok)throw a.statusText&&(e=Qe),new Error;const i=await a.json();cl(i),n()}catch{s()}});Et(t,e,Er),t.finally(()=>{ee.saving.enable(),xe()})};function hl(r){let e,t,n,s,a,i,l,o,c;return t=new nt({props:{labelAction:ze}}),{c(){e=k("section"),M(t.$$.fragment),n=O(),s=k("button"),a=G("Generate mask"),this.h()},l(u){e=C(u,"SECTION",{class:!0});var f=v(e);N(t.$$.fragment,f),n=H(f),s=C(f,"BUTTON",{class:!0});var g=v(s);a=q(g,"Generate mask"),g.forEach(h),f.forEach(h),this.h()},h(){d(s,"class",i=`btn w-full btn-neutral text-white text-lg my-5 font-bold ${!r[0].samMaskRequest&&"btn-disabled"}`),d(e,"class","flex-1 flex flex-col items-start w-full")},m(u,f){w(u,e,f),A(t,e,null),b(e,n),b(e,s),b(s,a),l=!0,o||(c=te(s,"click",dl),o=!0)},p(u,[f]){(!l||f&1&&i!==(i=`btn w-full btn-neutral text-white text-lg my-5 font-bold ${!u[0].samMaskRequest&&"btn-disabled"}`))&&d(s,"class",i)},i(u){l||(p(t.$$.fragment,u),l=!0)},o(u){y(t.$$.fragment,u),l=!1},d(u){u&&h(e),T(t),o=!1,c()}}}function gl(r,e,t){let n;return V(r,ee,s=>t(0,n=s)),[n]}class bl extends B{constructor(e){super(),P(this,e,gl,hl,D,{})}}function _l(r){let e,t;return e=new nt({props:{labelAction:ze}}),{c(){M(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},p:I,i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}class xn extends B{constructor(e){super(),P(this,e,null,_l,D,{})}}function Yt(r){let e,t;return{c(){e=F("desc"),t=G(r[7])},l(n){e=U(n,"desc",{});var s=v(e);t=q(s,r[7]),s.forEach(h)},m(n,s){w(n,e,s),b(e,t)},p(n,s){s&128&&ne(t,n[7])},d(n){n&&h(e)}}}function xt(r){let e,t;return{c(){e=F("title"),t=G(r[6])},l(n){e=U(n,"title",{});var s=v(e);t=q(s,r[6]),s.forEach(h)},m(n,s){w(n,e,s),b(e,t)},p(n,s){s&64&&ne(t,n[6])},d(n){n&&h(e)}}}function pl(r){let e,t,n,s=r[7]&&Yt(r),a=r[6]&&xt(r);return{c(){e=F("svg"),s&&s.c(),t=z(),a&&a.c(),n=F("path"),this.h()},l(i){e=U(i,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var l=v(e);s&&s.l(l),t=z(),a&&a.l(l),n=U(l,"path",{d:!0,fill:!0}),v(n).forEach(h),l.forEach(h),this.h()},h(){d(n,"d","M7.5,5.6L5,7L6.4,4.5L5,2L7.5,3.4L10,2L8.6,4.5L10,7L7.5,5.6M19.5,15.4L22,14L20.6,16.5L22,19L19.5,17.6L17,19L18.4,16.5L17,14L19.5,15.4M22,2L20.6,4.5L22,7L19.5,5.6L17,7L18.4,4.5L17,2L19.5,3.4L22,2M13.34,12.78L15.78,10.34L13.66,8.22L11.22,10.66L13.34,12.78M14.37,7.29L16.71,9.63C17.1,10 17.1,10.65 16.71,11.04L5.04,22.71C4.65,23.1 4,23.1 3.63,22.71L1.29,20.37C0.9,20 0.9,19.35 1.29,18.96L12.96,7.29C13.35,6.9 14,6.9 14.37,7.29Z"),d(n,"fill",r[2]),d(e,"viewBox",r[3]),d(e,"width",r[0]),d(e,"height",r[1]),d(e,"class",r[8]),d(e,"aria-label",r[4]),d(e,"aria-hidden",r[5])},m(i,l){w(i,e,l),s&&s.m(e,null),b(e,t),a&&a.m(e,null),b(e,n)},p(i,[l]){i[7]?s?s.p(i,l):(s=Yt(i),s.c(),s.m(e,t)):s&&(s.d(1),s=null),i[6]?a?a.p(i,l):(a=xt(i),a.c(),a.m(e,n)):a&&(a.d(1),a=null),l&4&&d(n,"fill",i[2]),l&8&&d(e,"viewBox",i[3]),l&1&&d(e,"width",i[0]),l&2&&d(e,"height",i[1]),l&256&&d(e,"class",i[8]),l&16&&d(e,"aria-label",i[4]),l&32&&d(e,"aria-hidden",i[5])},i:I,o:I,d(i){i&&h(e),s&&s.d(),a&&a.d()}}}function vl(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:a=n}=e,{color:i="currentColor"}=e,{viewBox:l="0 0 24 24"}=e,{ariaLabel:o=void 0}=e,{ariaHidden:c=void 0}=e,{title:u=void 0}=e,{desc:f=void 0}=e,{class:g=void 0}=e;return r.$$set=m=>{"size"in m&&t(9,n=m.size),"width"in m&&t(0,s=m.width),"height"in m&&t(1,a=m.height),"color"in m&&t(2,i=m.color),"viewBox"in m&&t(3,l=m.viewBox),"ariaLabel"in m&&t(4,o=m.ariaLabel),"ariaHidden"in m&&t(5,c=m.ariaHidden),"title"in m&&t(6,u=m.title),"desc"in m&&t(7,f=m.desc),"class"in m&&t(8,g=m.class)},[s,a,i,l,o,c,u,f,g,n]}class yl extends B{constructor(e){super(),P(this,e,vl,pl,D,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function $t(r){let e,t;return{c(){e=F("desc"),t=G(r[7])},l(n){e=U(n,"desc",{});var s=v(e);t=q(s,r[7]),s.forEach(h)},m(n,s){w(n,e,s),b(e,t)},p(n,s){s&128&&ne(t,n[7])},d(n){n&&h(e)}}}function en(r){let e,t;return{c(){e=F("title"),t=G(r[6])},l(n){e=U(n,"title",{});var s=v(e);t=q(s,r[6]),s.forEach(h)},m(n,s){w(n,e,s),b(e,t)},p(n,s){s&64&&ne(t,n[6])},d(n){n&&h(e)}}}function Ll(r){let e,t,n,s=r[7]&&$t(r),a=r[6]&&en(r);return{c(){e=F("svg"),s&&s.c(),t=z(),a&&a.c(),n=F("path"),this.h()},l(i){e=U(i,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var l=v(e);s&&s.l(l),t=z(),a&&a.l(l),n=U(l,"path",{d:!0,fill:!0}),v(n).forEach(h),l.forEach(h),this.h()},h(){d(n,"d","M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z"),d(n,"fill",r[2]),d(e,"viewBox",r[3]),d(e,"width",r[0]),d(e,"height",r[1]),d(e,"class",r[8]),d(e,"aria-label",r[4]),d(e,"aria-hidden",r[5])},m(i,l){w(i,e,l),s&&s.m(e,null),b(e,t),a&&a.m(e,null),b(e,n)},p(i,[l]){i[7]?s?s.p(i,l):(s=$t(i),s.c(),s.m(e,t)):s&&(s.d(1),s=null),i[6]?a?a.p(i,l):(a=en(i),a.c(),a.m(e,n)):a&&(a.d(1),a=null),l&4&&d(n,"fill",i[2]),l&8&&d(e,"viewBox",i[3]),l&1&&d(e,"width",i[0]),l&2&&d(e,"height",i[1]),l&256&&d(e,"class",i[8]),l&16&&d(e,"aria-label",i[4]),l&32&&d(e,"aria-hidden",i[5])},i:I,o:I,d(i){i&&h(e),s&&s.d(),a&&a.d()}}}function wl(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:a=n}=e,{color:i="currentColor"}=e,{viewBox:l="0 0 24 24"}=e,{ariaLabel:o=void 0}=e,{ariaHidden:c=void 0}=e,{title:u=void 0}=e,{desc:f=void 0}=e,{class:g=void 0}=e;return r.$$set=m=>{"size"in m&&t(9,n=m.size),"width"in m&&t(0,s=m.width),"height"in m&&t(1,a=m.height),"color"in m&&t(2,i=m.color),"viewBox"in m&&t(3,l=m.viewBox),"ariaLabel"in m&&t(4,o=m.ariaLabel),"ariaHidden"in m&&t(5,c=m.ariaHidden),"title"in m&&t(6,u=m.title),"desc"in m&&t(7,f=m.desc),"class"in m&&t(8,g=m.class)},[s,a,i,l,o,c,u,f,g,n]}class kl extends B{constructor(e){super(),P(this,e,wl,Ll,D,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function tn(r){let e,t;return{c(){e=F("desc"),t=G(r[7])},l(n){e=U(n,"desc",{});var s=v(e);t=q(s,r[7]),s.forEach(h)},m(n,s){w(n,e,s),b(e,t)},p(n,s){s&128&&ne(t,n[7])},d(n){n&&h(e)}}}function nn(r){let e,t;return{c(){e=F("title"),t=G(r[6])},l(n){e=U(n,"title",{});var s=v(e);t=q(s,r[6]),s.forEach(h)},m(n,s){w(n,e,s),b(e,t)},p(n,s){s&64&&ne(t,n[6])},d(n){n&&h(e)}}}function Cl(r){let e,t,n,s=r[7]&&tn(r),a=r[6]&&nn(r);return{c(){e=F("svg"),s&&s.c(),t=z(),a&&a.c(),n=F("path"),this.h()},l(i){e=U(i,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var l=v(e);s&&s.l(l),t=z(),a&&a.l(l),n=U(l,"path",{d:!0,fill:!0}),v(n).forEach(h),l.forEach(h),this.h()},h(){d(n,"d","M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.66L7.86,15.62C8.63,16.5 9.68,17.14 10.87,17.38L11.24,20H12.76L13.13,17.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.66L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z"),d(n,"fill",r[2]),d(e,"viewBox",r[3]),d(e,"width",r[0]),d(e,"height",r[1]),d(e,"class",r[8]),d(e,"aria-label",r[4]),d(e,"aria-hidden",r[5])},m(i,l){w(i,e,l),s&&s.m(e,null),b(e,t),a&&a.m(e,null),b(e,n)},p(i,[l]){i[7]?s?s.p(i,l):(s=tn(i),s.c(),s.m(e,t)):s&&(s.d(1),s=null),i[6]?a?a.p(i,l):(a=nn(i),a.c(),a.m(e,n)):a&&(a.d(1),a=null),l&4&&d(n,"fill",i[2]),l&8&&d(e,"viewBox",i[3]),l&1&&d(e,"width",i[0]),l&2&&d(e,"height",i[1]),l&256&&d(e,"class",i[8]),l&16&&d(e,"aria-label",i[4]),l&32&&d(e,"aria-hidden",i[5])},i:I,o:I,d(i){i&&h(e),s&&s.d(),a&&a.d()}}}function El(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:a=n}=e,{color:i="currentColor"}=e,{viewBox:l="0 0 24 24"}=e,{ariaLabel:o=void 0}=e,{ariaHidden:c=void 0}=e,{title:u=void 0}=e,{desc:f=void 0}=e,{class:g=void 0}=e;return r.$$set=m=>{"size"in m&&t(9,n=m.size),"width"in m&&t(0,s=m.width),"height"in m&&t(1,a=m.height),"color"in m&&t(2,i=m.color),"viewBox"in m&&t(3,l=m.viewBox),"ariaLabel"in m&&t(4,o=m.ariaLabel),"ariaHidden"in m&&t(5,c=m.ariaHidden),"title"in m&&t(6,u=m.title),"desc"in m&&t(7,f=m.desc),"class"in m&&t(8,g=m.class)},[s,a,i,l,o,c,u,f,g,n]}class Sl extends B{constructor(e){super(),P(this,e,El,Cl,D,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function rn(r){let e,t;return{c(){e=F("desc"),t=G(r[7])},l(n){e=U(n,"desc",{});var s=v(e);t=q(s,r[7]),s.forEach(h)},m(n,s){w(n,e,s),b(e,t)},p(n,s){s&128&&ne(t,n[7])},d(n){n&&h(e)}}}function sn(r){let e,t;return{c(){e=F("title"),t=G(r[6])},l(n){e=U(n,"title",{});var s=v(e);t=q(s,r[6]),s.forEach(h)},m(n,s){w(n,e,s),b(e,t)},p(n,s){s&64&&ne(t,n[6])},d(n){n&&h(e)}}}function Il(r){let e,t,n,s=r[7]&&rn(r),a=r[6]&&sn(r);return{c(){e=F("svg"),s&&s.c(),t=z(),a&&a.c(),n=F("path"),this.h()},l(i){e=U(i,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var l=v(e);s&&s.l(l),t=z(),a&&a.l(l),n=U(l,"path",{d:!0,fill:!0}),v(n).forEach(h),l.forEach(h),this.h()},h(){d(n,"d","M9.37 4L10.78 6.5L9.37 9H6.63L5.23 6.5L6.63 4H9.37M10.25 2H5.75C5.56 2 5.39 2.11 5.31 2.26L3.09 6.22L3 6.5L3.09 6.78L5.31 10.74C5.39 10.89 5.56 11 5.75 11H10.25C10.44 11 10.61 10.89 10.69 10.74L12.91 6.78L13 6.5L12.91 6.22L10.69 2.26C10.61 2.11 10.44 2 10.25 2M18.62 9.5L20 12L18.62 14.5H15.88L14.5 12L15.88 9.5H18.62M19.5 7.5H15C14.81 7.5 14.64 7.61 14.56 7.76L12.34 11.72L12.25 12L12.34 12.28L14.56 16.24C14.64 16.39 14.81 16.5 15 16.5H19.5C19.69 16.5 19.86 16.39 19.94 16.24L22.16 12.28L22.25 12L22.16 11.72L19.94 7.76C19.86 7.61 19.69 7.5 19.5 7.5M9.37 15L10.78 17.5L9.37 20H6.63L5.23 17.5L6.63 15H9.37M10.25 13H5.75C5.56 13 5.39 13.11 5.31 13.26L3.09 17.22L3 17.5L3.09 17.78L5.31 21.74C5.39 21.89 5.56 22 5.75 22H10.25C10.44 22 10.61 21.89 10.69 21.74L12.91 17.78L13 17.5L12.91 17.22L10.69 13.26C10.61 13.11 10.44 13 10.25 13Z"),d(n,"fill",r[2]),d(e,"viewBox",r[3]),d(e,"width",r[0]),d(e,"height",r[1]),d(e,"class",r[8]),d(e,"aria-label",r[4]),d(e,"aria-hidden",r[5])},m(i,l){w(i,e,l),s&&s.m(e,null),b(e,t),a&&a.m(e,null),b(e,n)},p(i,[l]){i[7]?s?s.p(i,l):(s=rn(i),s.c(),s.m(e,t)):s&&(s.d(1),s=null),i[6]?a?a.p(i,l):(a=sn(i),a.c(),a.m(e,n)):a&&(a.d(1),a=null),l&4&&d(n,"fill",i[2]),l&8&&d(e,"viewBox",i[3]),l&1&&d(e,"width",i[0]),l&2&&d(e,"height",i[1]),l&256&&d(e,"class",i[8]),l&16&&d(e,"aria-label",i[4]),l&32&&d(e,"aria-hidden",i[5])},i:I,o:I,d(i){i&&h(e),s&&s.d(),a&&a.d()}}}function Ml(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:a=n}=e,{color:i="currentColor"}=e,{viewBox:l="0 0 24 24"}=e,{ariaLabel:o=void 0}=e,{ariaHidden:c=void 0}=e,{title:u=void 0}=e,{desc:f=void 0}=e,{class:g=void 0}=e;return r.$$set=m=>{"size"in m&&t(9,n=m.size),"width"in m&&t(0,s=m.width),"height"in m&&t(1,a=m.height),"color"in m&&t(2,i=m.color),"viewBox"in m&&t(3,l=m.viewBox),"ariaLabel"in m&&t(4,o=m.ariaLabel),"ariaHidden"in m&&t(5,c=m.ariaHidden),"title"in m&&t(6,u=m.title),"desc"in m&&t(7,f=m.desc),"class"in m&&t(8,g=m.class)},[s,a,i,l,o,c,u,f,g,n]}class Al extends B{constructor(e){super(),P(this,e,Ml,Il,D,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function an(r){let e,t;return{c(){e=F("desc"),t=G(r[7])},l(n){e=U(n,"desc",{});var s=v(e);t=q(s,r[7]),s.forEach(h)},m(n,s){w(n,e,s),b(e,t)},p(n,s){s&128&&ne(t,n[7])},d(n){n&&h(e)}}}function ln(r){let e,t;return{c(){e=F("title"),t=G(r[6])},l(n){e=U(n,"title",{});var s=v(e);t=q(s,r[6]),s.forEach(h)},m(n,s){w(n,e,s),b(e,t)},p(n,s){s&64&&ne(t,n[6])},d(n){n&&h(e)}}}function Tl(r){let e,t,n,s=r[7]&&an(r),a=r[6]&&ln(r);return{c(){e=F("svg"),s&&s.c(),t=z(),a&&a.c(),n=F("path"),this.h()},l(i){e=U(i,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var l=v(e);s&&s.l(l),t=z(),a&&a.l(l),n=U(l,"path",{d:!0,fill:!0}),v(n).forEach(h),l.forEach(h),this.h()},h(){d(n,"d","M12,1C7.59,1 4,4.59 4,9C4,14.57 10.96,22.34 11.26,22.67L12,23.5L12.74,22.67C13.04,22.34 20,14.57 20,9C20,4.59 16.41,1 12,1M12,20.47C9.82,17.86 6,12.54 6,9A6,6 0 0,1 12,3A6,6 0 0,1 18,9C18,12.83 13.75,18.36 12,20.47M11.13,14H12.88V15.75H11.13M12,5A3.5,3.5 0 0,0 8.5,8.5H10.25A1.75,1.75 0 0,1 12,6.75A1.75,1.75 0 0,1 13.75,8.5C13.75,10.26 11.13,10.04 11.13,12.88H12.88C12.88,10.91 15.5,10.69 15.5,8.5A3.5,3.5 0 0,0 12,5Z"),d(n,"fill",r[2]),d(e,"viewBox",r[3]),d(e,"width",r[0]),d(e,"height",r[1]),d(e,"class",r[8]),d(e,"aria-label",r[4]),d(e,"aria-hidden",r[5])},m(i,l){w(i,e,l),s&&s.m(e,null),b(e,t),a&&a.m(e,null),b(e,n)},p(i,[l]){i[7]?s?s.p(i,l):(s=an(i),s.c(),s.m(e,t)):s&&(s.d(1),s=null),i[6]?a?a.p(i,l):(a=ln(i),a.c(),a.m(e,n)):a&&(a.d(1),a=null),l&4&&d(n,"fill",i[2]),l&8&&d(e,"viewBox",i[3]),l&1&&d(e,"width",i[0]),l&2&&d(e,"height",i[1]),l&256&&d(e,"class",i[8]),l&16&&d(e,"aria-label",i[4]),l&32&&d(e,"aria-hidden",i[5])},i:I,o:I,d(i){i&&h(e),s&&s.d(),a&&a.d()}}}function Bl(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:a=n}=e,{color:i="currentColor"}=e,{viewBox:l="0 0 24 24"}=e,{ariaLabel:o=void 0}=e,{ariaHidden:c=void 0}=e,{title:u=void 0}=e,{desc:f=void 0}=e,{class:g=void 0}=e;return r.$$set=m=>{"size"in m&&t(9,n=m.size),"width"in m&&t(0,s=m.width),"height"in m&&t(1,a=m.height),"color"in m&&t(2,i=m.color),"viewBox"in m&&t(3,l=m.viewBox),"ariaLabel"in m&&t(4,o=m.ariaLabel),"ariaHidden"in m&&t(5,c=m.ariaHidden),"title"in m&&t(6,u=m.title),"desc"in m&&t(7,f=m.desc),"class"in m&&t(8,g=m.class)},[s,a,i,l,o,c,u,f,g,n]}class Pl extends B{constructor(e){super(),P(this,e,Bl,Tl,D,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function on(r){let e,t;return{c(){e=F("desc"),t=G(r[7])},l(n){e=U(n,"desc",{});var s=v(e);t=q(s,r[7]),s.forEach(h)},m(n,s){w(n,e,s),b(e,t)},p(n,s){s&128&&ne(t,n[7])},d(n){n&&h(e)}}}function cn(r){let e,t;return{c(){e=F("title"),t=G(r[6])},l(n){e=U(n,"title",{});var s=v(e);t=q(s,r[6]),s.forEach(h)},m(n,s){w(n,e,s),b(e,t)},p(n,s){s&64&&ne(t,n[6])},d(n){n&&h(e)}}}function Dl(r){let e,t,n,s=r[7]&&on(r),a=r[6]&&cn(r);return{c(){e=F("svg"),s&&s.c(),t=z(),a&&a.c(),n=F("path"),this.h()},l(i){e=U(i,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var l=v(e);s&&s.l(l),t=z(),a&&a.l(l),n=U(l,"path",{d:!0,fill:!0}),v(n).forEach(h),l.forEach(h),this.h()},h(){d(n,"d","M21.41,11.58L12.41,2.58C12.04,2.21 11.53,2 11,2H4A2,2 0 0,0 2,4V11C2,11.53 2.21,12.04 2.59,12.41L3,12.81C3.9,12.27 4.94,12 6,12A6,6 0 0,1 12,18C12,19.06 11.72,20.09 11.18,21L11.58,21.4C11.95,21.78 12.47,22 13,22C13.53,22 14.04,21.79 14.41,21.41L21.41,14.41C21.79,14.04 22,13.53 22,13C22,12.47 21.79,11.96 21.41,11.58M5.5,7A1.5,1.5 0 0,1 4,5.5A1.5,1.5 0 0,1 5.5,4A1.5,1.5 0 0,1 7,5.5A1.5,1.5 0 0,1 5.5,7M10,19H7V22H5V19H2V17H5V14H7V17H10V19Z"),d(n,"fill",r[2]),d(e,"viewBox",r[3]),d(e,"width",r[0]),d(e,"height",r[1]),d(e,"class",r[8]),d(e,"aria-label",r[4]),d(e,"aria-hidden",r[5])},m(i,l){w(i,e,l),s&&s.m(e,null),b(e,t),a&&a.m(e,null),b(e,n)},p(i,[l]){i[7]?s?s.p(i,l):(s=on(i),s.c(),s.m(e,t)):s&&(s.d(1),s=null),i[6]?a?a.p(i,l):(a=cn(i),a.c(),a.m(e,n)):a&&(a.d(1),a=null),l&4&&d(n,"fill",i[2]),l&8&&d(e,"viewBox",i[3]),l&1&&d(e,"width",i[0]),l&2&&d(e,"height",i[1]),l&256&&d(e,"class",i[8]),l&16&&d(e,"aria-label",i[4]),l&32&&d(e,"aria-hidden",i[5])},i:I,o:I,d(i){i&&h(e),s&&s.d(),a&&a.d()}}}function Nl(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:a=n}=e,{color:i="currentColor"}=e,{viewBox:l="0 0 24 24"}=e,{ariaLabel:o=void 0}=e,{ariaHidden:c=void 0}=e,{title:u=void 0}=e,{desc:f=void 0}=e,{class:g=void 0}=e;return r.$$set=m=>{"size"in m&&t(9,n=m.size),"width"in m&&t(0,s=m.width),"height"in m&&t(1,a=m.height),"color"in m&&t(2,i=m.color),"viewBox"in m&&t(3,l=m.viewBox),"ariaLabel"in m&&t(4,o=m.ariaLabel),"ariaHidden"in m&&t(5,c=m.ariaHidden),"title"in m&&t(6,u=m.title),"desc"in m&&t(7,f=m.desc),"class"in m&&t(8,g=m.class)},[s,a,i,l,o,c,u,f,g,n]}class Ol extends B{constructor(e){super(),P(this,e,Nl,Dl,D,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}const Hl={name:"Segmentation",icon:kl,component:xn,control:wa,usesLabels:!0},zl={name:"Quick Selection",icon:Al,component:ll,usesLabels:!0},$n={name:"Classification",icon:Ol,component:Qs,usesLabels:!0},jl={name:"Detection",icon:Pl,component:xn,control:ta,usesLabels:!0},Vl={name:"SAM",icon:yl,component:bl,control:ha,usesLabels:!0},Rl={name:"Options",icon:Sl,component:Ua},ut=[zl,$n,Hl,jl,Vl,Rl];function Gl(){const r=ue(ut[0]),{subscribe:e,set:t}=r;return{subscribe:e,set:n=>t(n),getName:()=>X(r).name}}const ye=Gl();function ql(r){let e,t,n=r[0].name+"",s;return{c(){e=k("header"),t=k("h2"),s=G(n),this.h()},l(a){e=C(a,"HEADER",{class:!0});var i=v(e);t=C(i,"H2",{});var l=v(t);s=q(l,n),l.forEach(h),i.forEach(h),this.h()},h(){d(e,"class","w-full bg-info py-2 px-3 text-white text-lg flex gap-5 items-center flex-row rounded-t-md justify-center")},m(a,i){w(a,e,i),b(e,t),b(t,s)},p(a,[i]){i&1&&n!==(n=a[0].name+"")&&ne(s,n)},i:I,o:I,d(a){a&&h(e)}}}function Fl(r,e,t){let n;return V(r,ye,s=>t(0,n=s)),[n]}class Ul extends B{constructor(e){super(),P(this,e,Fl,ql,D,{})}}function Wl(r){let e,t,n,s,a,i;return{c(){e=k("button"),t=G("Save"),this.h()},l(l){e=C(l,"BUTTON",{class:!0});var o=v(e);t=q(o,"Save"),o.forEach(h),this.h()},h(){d(e,"class",n="w-full bg-action hover:bg-hover py-2 px-3 text-white text-lg flex gap-5 items-center flex-row rounded-b-md justify-center border-b "+(!r[0].saving&&" bg-slate-400 hover:bg-slate-400")),e.disabled=s=!r[0].saving},m(l,o){w(l,e,o),b(e,t),a||(i=te(e,"click",r[1]),a=!0)},p(l,[o]){o&1&&n!==(n="w-full bg-action hover:bg-hover py-2 px-3 text-white text-lg flex gap-5 items-center flex-row rounded-b-md justify-center border-b "+(!l[0].saving&&" bg-slate-400 hover:bg-slate-400"))&&d(e,"class",n),o&1&&s!==(s=!l[0].saving)&&(e.disabled=s)},i:I,o:I,d(l){l&&h(e),a=!1,i()}}}function Zl(r,e,t){let n;return V(r,ee,a=>t(0,n=a)),[n,()=>Jn()]}class Jl extends B{constructor(e){super(),P(this,e,Zl,Wl,D,{})}}function un(r,e,t){const n=r.slice();return n[3]=e[t],n}function fn(r){let e,t,n,s,a,i,l;var o=r[3].icon;function c(f){return{props:{size:f[1]}}}o&&(t=de(o,c(r)));function u(){return r[2](r[3])}return{c(){e=k("button"),t&&M(t.$$.fragment),n=O(),this.h()},l(f){e=C(f,"BUTTON",{class:!0,"aria-label":!0});var g=v(e);t&&N(t.$$.fragment,g),n=H(g),g.forEach(h),this.h()},h(){d(e,"class",s=`btn btn-primary px-2 rounded-none 
			${r[3].name===r[0].name&&"btn-active"}
			`),d(e,"aria-label",r[3].name)},m(f,g){w(f,e,g),t&&A(t,e,null),b(e,n),a=!0,i||(l=te(e,"click",u),i=!0)},p(f,g){if(r=f,o!==(o=r[3].icon)){if(t){x();const m=t;y(m.$$.fragment,1,0,()=>{T(m,1)}),$()}o?(t=de(o,c(r)),M(t.$$.fragment),p(t.$$.fragment,1),A(t,e,n)):t=null}(!a||g&1&&s!==(s=`btn btn-primary px-2 rounded-none 
			${r[3].name===r[0].name&&"btn-active"}
			`))&&d(e,"class",s)},i(f){a||(t&&p(t.$$.fragment,f),a=!0)},o(f){t&&y(t.$$.fragment,f),a=!1},d(f){f&&h(e),t&&T(t),i=!1,l()}}}function Ql(r){let e,t,n=ut,s=[];for(let i=0;i<n.length;i+=1)s[i]=fn(un(r,n,i));const a=i=>y(s[i],1,1,()=>{s[i]=null});return{c(){e=k("div");for(let i=0;i<s.length;i+=1)s[i].c();this.h()},l(i){e=C(i,"DIV",{class:!0});var l=v(e);for(let o=0;o<s.length;o+=1)s[o].l(l);l.forEach(h),this.h()},h(){d(e,"class","col-span-1 bg-slate-100 flex flex-col items-centergap-3")},m(i,l){w(i,e,l);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null);t=!0},p(i,[l]){if(l&3){n=ut;let o;for(o=0;o<n.length;o+=1){const c=un(i,n,o);s[o]?(s[o].p(c,l),p(s[o],1)):(s[o]=fn(c),s[o].c(),p(s[o],1),s[o].m(e,null))}for(x(),o=n.length;o<s.length;o+=1)a(o);$()}},i(i){if(!t){for(let l=0;l<n.length;l+=1)p(s[l]);t=!0}},o(i){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)y(s[l]);t=!1},d(i){i&&h(e),nr(s,i)}}}function Kl(r,e,t){let n;return V(r,ye,i=>t(0,n=i)),[n,Sr,i=>Kn(i)]}class Xl extends B{constructor(e){super(),P(this,e,Kl,Ql,D,{})}}const Yl=async()=>{const r=Oe.retrieve(),e=await fetch(r+Ae.imagesEndpoint);if(!e.ok)return;const t=await e.json(),n=t.sort((s,a)=>s.name.localeCompare(a.name,navigator.languages[0]||navigator.language,{numeric:!0,ignorePunctuation:!0}));return et.store(n),t},xl=async()=>{const r=Oe.retrieve(),e=await fetch(r+Ae.labelsEndpoint);if(!e.ok)return;const t=await e.json();if(!t.status_code){const{labels:n}=t;n.length&&$l(n)}},$l=r=>{for(let t of r)be.add(t);const e=be.retrieve();ae.store(e[0])},eo=async()=>{_t(),In(),await xl(),Be.markLabelsAsLoaded();const r=new Promise(async(t,n)=>{try{if(await Yl(),Be.markImagesAsLoaded(),et.retrieve().length===0)throw new Error;t()}catch{n()}});Et(r,"No images found.",Ir),r.finally(()=>xe())};function to(r,e,t){let n;return V(r,K,s=>t(0,n=s)),Xn(),Le(()=>{n&&Yn()}),[]}class no extends B{constructor(e){super(),P(this,e,to,null,D,{})}}let Je;function ro(){Je=new IntersectionObserver(r=>{r.forEach(e=>{const t=e.isIntersecting?"enterViewport":"exitViewport";e.target.dispatchEvent(new CustomEvent(t))})})}function so(r){return Je||ro(),Je.observe(r),{destroy(){Je.unobserve(r)}}}function mn(r,e,t){const n=r.slice();return n[12]=e[t],n[14]=t,n}function dn(r){let e,t,n=`${r[1]+1}-${r[1]+ge<r[0].length?r[1]+ge:r[0].length} of ${r[0].length}`,s,a,i,l=[],o=new Map,c,u,f=r[2];const g=m=>m[12].name;for(let m=0;m<f.length;m+=1){let _=mn(r,f,m),E=g(_);o.set(E,l[m]=hn(E,_))}return{c(){e=k("div"),t=k("span"),s=G(n),a=O(),i=k("ul");for(let m=0;m<l.length;m+=1)l[m].c();this.h()},l(m){e=C(m,"DIV",{class:!0});var _=v(e);t=C(_,"SPAN",{class:!0,"aria-label":!0});var E=v(t);s=q(E,n),E.forEach(h),a=H(_),i=C(_,"UL",{class:!0,id:!0});var j=v(i);for(let Z=0;Z<l.length;Z+=1)l[Z].l(j);j.forEach(h),_.forEach(h),this.h()},h(){d(t,"class","px-2 text-gray-500 text-sm mt-5 flex justify-end"),d(t,"aria-label","Pagination information"),d(i,"class","w-full justify-end overflow-y-auto block"),d(i,"id","image-selector"),d(e,"class","flex-1 overflow-y-auto")},m(m,_){w(m,e,_),b(e,t),b(t,s),b(e,a),b(e,i);for(let E=0;E<l.length;E+=1)l[E]&&l[E].m(i,null);c||(u=te(i,"scroll",r[8]),c=!0)},p(m,_){_&3&&n!==(n=`${m[1]+1}-${m[1]+ge<m[0].length?m[1]+ge:m[0].length} of ${m[0].length}`)&&ne(s,n),_&28&&(f=m[2],l=gt(l,_,g,1,m,f,o,i,rr,hn,null,mn))},d(m){m&&h(e);for(let _=0;_<l.length;_+=1)l[_].d();c=!1,u()}}}function hn(r,e){let t,n,s=e[12].name+"",a,i,l,o,c,u;return{key:r,first:null,c(){t=k("li"),n=k("button"),a=G(s),l=O(),this.h()},l(f){t=C(f,"LI",{id:!0});var g=v(t);n=C(g,"BUTTON",{class:!0});var m=v(n);a=q(m,s),m.forEach(h),l=H(g),g.forEach(h),this.h()},h(){d(n,"class",i=`max-h-7 tab text-xs ${e[12].name===e[3].name&&"text-[#202124] bg-lightgray"} w-full justify-between pl-2 pr-0 hover:text-[#2576E8]`),d(t,"id",o=e[12].name.split("/").pop()),this.first=t},m(f,g){w(f,t,g),b(t,n),b(n,a),b(t,l),c||(u=[te(n,"click",function(){Dt(ct(e[12]))&&ct(e[12]).apply(this,arguments)}),sr(so.call(null,t)),te(t,"enterViewport",function(){Dt((e[14]===e[2].length-1||e[14]===0)&&e[4](e[14]))&&((e[14]===e[2].length-1||e[14]===0)&&e[4](e[14])).apply(this,arguments)})],c=!0)},p(f,g){e=f,g&4&&s!==(s=e[12].name+"")&&ne(a,s),g&12&&i!==(i=`max-h-7 tab text-xs ${e[12].name===e[3].name&&"text-[#202124] bg-lightgray"} w-full justify-between pl-2 pr-0 hover:text-[#2576E8]`)&&d(n,"class",i),g&4&&o!==(o=e[12].name.split("/").pop())&&d(t,"id",o)},d(f){f&&h(t),c=!1,we(u)}}}function ao(r){let e,t=r[2].length&&dn(r);return{c(){t&&t.c(),e=z()},l(n){t&&t.l(n),e=z()},m(n,s){t&&t.m(n,s),w(n,e,s)},p(n,[s]){n[2].length?t?t.p(n,s):(t=dn(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:I,o:I,d(n){t&&t.d(n),n&&h(e)}}}function io(r,e,t){let n,s,a,i,l;V(r,Me,E=>t(1,a=E)),V(r,et,E=>t(7,i=E)),V(r,_e,E=>t(3,l=E));let{filterInput:o=""}=e;function c(E){E===0&&m(),E!==n.length-1&&E===s.length-1&&u()}function u(){Fe(Me,a+=ge/4,a),t(2,s=n.slice(a,a+ge))}let f=!1;const g=()=>{f=!0};async function m(){if(!f||a===0)return;f=!1;const E=document.getElementById(s[0].name.split("/").pop());Fe(Me,a-=ge/4,a),a<0&&Fe(Me,a=0,a),t(2,s=n.slice(a,a+ge)),await Ne(),E.scrollIntoView({behavior:"instant",block:"start",inline:"nearest"})}const _=()=>g();return r.$$set=E=>{"filterInput"in E&&t(6,o=E.filterInput)},r.$$.update=()=>{r.$$.dirty&192&&t(0,n=i.length?i.filter(E=>E.name.toLowerCase().includes(o.toLowerCase())):[]),r.$$.dirty&64&&o&&Fe(Me,a=0,a),r.$$.dirty&3&&t(2,s=n.slice(a,a+ge))},[n,a,s,l,c,g,o,i,_]}class lo extends B{constructor(e){super(),P(this,e,io,ao,D,{filterInput:6})}}function oo(r){let e,t,n,s,a,i,l,o,c;function u(g){r[1](g)}let f={};return r[0]!==void 0&&(f.filterInput=r[0]),t=new lo({props:f}),Ln.push(()=>ar(t,"filterInput",u)),{c(){e=k("section"),M(t.$$.fragment),s=O(),a=k("form"),i=k("input"),this.h()},l(g){e=C(g,"SECTION",{class:!0,"aria-label":!0});var m=v(e);N(t.$$.fragment,m),s=H(m),a=C(m,"FORM",{class:!0});var _=v(a);i=C(_,"INPUT",{name:!0,type:!0,placeholder:!0,class:!0}),_.forEach(h),m.forEach(h),this.h()},h(){d(i,"name","filter"),d(i,"type","text"),d(i,"placeholder","Filter..."),d(i,"class","input input-bordered rounded-md w-full"),d(a,"class","flex flex-col justify-end mt-5"),d(e,"class","flex-1 flex flex-col max-h-[40vh]"),d(e,"aria-label","Image selector")},m(g,m){w(g,e,m),A(t,e,null),b(e,s),b(e,a),b(a,i),ve(i,r[0]),l=!0,o||(c=[te(i,"input",r[2]),te(a,"submit",wn(co))],o=!0)},p(g,[m]){const _={};!n&&m&1&&(n=!0,_.filterInput=g[0],ir(()=>n=!1)),t.$set(_),m&1&&i.value!==g[0]&&ve(i,g[0])},i(g){l||(p(t.$$.fragment,g),l=!0)},o(g){y(t.$$.fragment,g),l=!1},d(g){g&&h(e),T(t),o=!1,we(c)}}}const co=()=>{};function uo(r,e,t){let n="";function s(i){n=i,t(0,n)}function a(){n=this.value,t(0,n)}return[n,s,a]}class fo extends B{constructor(e){super(),P(this,e,uo,oo,D,{})}}const mo=(r,e)=>{r&&(ho(r,e)||(go(r,e),ze({name:r,color:e}),An()))},ho=(r,e)=>{const t=be.retrieve(),n=t.some(a=>a.name===r),s=t.some(a=>a.color===e);return n?(oe.error(`The label "${r}" already exists`),!0):s?(oe.error("A label with this color already exists"),!0):!1},go=(r,e)=>{be.add({name:r,color:e})};function bo(r){let e,t,n,s,a,i,l,o,c,u,f,g,m;return{c(){e=k("form"),t=k("label"),n=k("input"),s=O(),a=k("button"),i=G("+"),l=O(),o=k("div"),c=k("input"),this.h()},l(_){e=C(_,"FORM",{});var E=v(e);t=C(E,"LABEL",{type:!0,name:!0,class:!0});var j=v(t);n=C(j,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0,autocomplete:!0}),s=H(j),a=C(j,"BUTTON",{class:!0});var Z=v(a);i=q(Z,"+"),Z.forEach(h),l=H(j),o=C(j,"DIV",{class:!0,style:!0});var J=v(o);c=C(J,"INPUT",{type:!0,name:!0,class:!0,style:!0}),J.forEach(h),j.forEach(h),E.forEach(h),this.h()},h(){d(n,"type","text"),d(n,"name","name"),d(n,"placeholder","New label"),d(n,"class","input input-bordered w-full rounded-none rounded-l-md border-r-0 focus:outline-none focus:placeholder-gray-300 focus:border-gray-600 focus:border-r-0"),d(n,"autocomplete","off"),d(a,"class","btn btn-neutral text-white font-bold text-2xl px-2 rounded-none"),d(c,"type","color"),d(c,"name","color"),d(c,"class","h-auto box-border"),d(c,"style",u=`opacity: ${r[2]};`),d(o,"class","flex box-border"),d(o,"style",f=`border: 1px solid ${r[1]}; 	border-radius: 0px 6px 6px 0px;`),d(t,"type","text"),d(t,"name","New label"),d(t,"class","flex")},m(_,E){w(_,e,E),b(e,t),b(t,n),ve(n,r[0]),b(t,s),b(t,a),b(a,i),b(t,l),b(t,o),b(o,c),ve(c,r[1]),g||(m=[te(n,"input",r[5]),te(c,"input",r[6]),te(e,"submit",wn(r[3]))],g=!0)},p(_,[E]){E&1&&n.value!==_[0]&&ve(n,_[0]),E&4&&u!==(u=`opacity: ${_[2]};`)&&d(c,"style",u),E&2&&ve(c,_[1]),E&2&&f!==(f=`border: 1px solid ${_[1]}; 	border-radius: 0px 6px 6px 0px;`)&&d(o,"style",f)},i:I,o:I,d(_){_&&h(e),g=!1,we(m)}}}function _o(r,e,t){let n,s,a;V(r,ce,f=>t(4,s=f)),V(r,be,f=>t(7,a=f));let i=Mr,l=Ar;const o=()=>{const f=a.length;mo(i,l),f+1===a.length&&t(0,i="")};function c(){i=this.value,t(0,i)}function u(){l=this.value,t(1,l)}return r.$$.update=()=>{r.$$.dirty&16&&t(2,{opacity:n}=s,n)},[i,l,n,o,s,c,u]}class po extends B{constructor(e){super(),P(this,e,_o,bo,D,{})}}function gn(r){let e,t;return e=new no({}),{c(){M(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function bn(r){let e,t,n,s,a=r[1].usesLabels&&_n();var i=r[1].component;function l(o){return{}}return i&&(n=de(i,l())),{c(){e=k("div"),a&&a.c(),t=O(),n&&M(n.$$.fragment),this.h()},l(o){e=C(o,"DIV",{class:!0});var c=v(e);a&&a.l(c),t=H(c),n&&N(n.$$.fragment,c),c.forEach(h),this.h()},h(){d(e,"class","flex-1 flex flex-col")},m(o,c){w(o,e,c),a&&a.m(e,null),b(e,t),n&&A(n,e,null),s=!0},p(o,c){if(o[1].usesLabels?a?c&2&&p(a,1):(a=_n(),a.c(),p(a,1),a.m(e,t)):a&&(x(),y(a,1,1,()=>{a=null}),$()),c&2&&i!==(i=o[1].component)){if(n){x();const u=n;y(u.$$.fragment,1,0,()=>{T(u,1)}),$()}i?(n=de(i,l()),M(n.$$.fragment),p(n.$$.fragment,1),A(n,e,null)):n=null}},i(o){s||(p(a),n&&p(n.$$.fragment,o),s=!0)},o(o){y(a),n&&y(n.$$.fragment,o),s=!1},d(o){o&&h(e),a&&a.d(),n&&T(n)}}}function _n(r){let e,t;return e=new po({}),{c(){M(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function pn(r){let e,t,n=!r[0].areAnnotationsLoading&&vn(r);return{c(){n&&n.c(),e=z()},l(s){n&&n.l(s),e=z()},m(s,a){n&&n.m(s,a),w(s,e,a),t=!0},p(s,a){s[0].areAnnotationsLoading?n&&(x(),y(n,1,1,()=>{n=null}),$()):n?(n.p(s,a),a&1&&p(n,1)):(n=vn(s),n.c(),p(n,1),n.m(e.parentNode,e))},i(s){t||(p(n),t=!0)},o(s){y(n),t=!1},d(s){n&&n.d(s),s&&h(e)}}}function vn(r){let e,t,n;var s=r[1].control;function a(i){return{}}return s&&(e=de(s,a())),{c(){e&&M(e.$$.fragment),t=z()},l(i){e&&N(e.$$.fragment,i),t=z()},m(i,l){e&&A(e,i,l),w(i,t,l),n=!0},p(i,l){if(l&2&&s!==(s=i[1].control)){if(e){x();const o=e;y(o.$$.fragment,1,0,()=>{T(o,1)}),$()}s?(e=de(s,a()),M(e.$$.fragment),p(e.$$.fragment,1),A(e,t.parentNode,t)):e=null}},i(i){n||(e&&p(e.$$.fragment,i),n=!0)},o(i){e&&y(e.$$.fragment,i),n=!1},d(i){i&&h(t),e&&T(e,i)}}}function vo(r){let e,t,n,s,a,i,l=!r[0].areImagesLoading&&!r[0].areLabelsLoading&&gn(),o=r[1]&&bn(r),c=r[1].control&&pn(r);return a=new fo({}),{c(){l&&l.c(),e=O(),t=k("div"),o&&o.c(),n=O(),c&&c.c(),s=O(),M(a.$$.fragment),this.h()},l(u){l&&l.l(u),e=H(u),t=C(u,"DIV",{class:!0});var f=v(t);o&&o.l(f),n=H(f),c&&c.l(f),s=H(f),N(a.$$.fragment,f),f.forEach(h),this.h()},h(){d(t,"class","p-5 w-[280px] flex flex-col justify-between")},m(u,f){l&&l.m(u,f),w(u,e,f),w(u,t,f),o&&o.m(t,null),b(t,n),c&&c.m(t,null),b(t,s),A(a,t,null),i=!0},p(u,[f]){!u[0].areImagesLoading&&!u[0].areLabelsLoading?l?f&1&&p(l,1):(l=gn(),l.c(),p(l,1),l.m(e.parentNode,e)):l&&(x(),y(l,1,1,()=>{l=null}),$()),u[1]?o?(o.p(u,f),f&2&&p(o,1)):(o=bn(u),o.c(),p(o,1),o.m(t,n)):o&&(x(),y(o,1,1,()=>{o=null}),$()),u[1].control?c?(c.p(u,f),f&2&&p(c,1)):(c=pn(u),c.c(),p(c,1),c.m(t,s)):c&&(x(),y(c,1,1,()=>{c=null}),$())},i(u){i||(p(l),p(o),p(c),p(a.$$.fragment,u),i=!0)},o(u){y(l),y(o),y(c),y(a.$$.fragment,u),i=!1},d(u){l&&l.d(u),u&&h(e),u&&h(t),o&&o.d(),c&&c.d(),T(a)}}}function yo(r,e,t){let n,s;return V(r,Be,a=>t(0,n=a)),V(r,ye,a=>t(1,s=a)),[n,s]}class Lo extends B{constructor(e){super(),P(this,e,yo,vo,D,{})}}function wo(r){let e,t,n,s,a,i,l,o,c,u;return t=new Ul({}),a=new Xl({}),l=new Lo({}),c=new Jl({}),{c(){e=k("section"),M(t.$$.fragment),n=O(),s=k("div"),M(a.$$.fragment),i=O(),M(l.$$.fragment),o=O(),M(c.$$.fragment),this.h()},l(f){e=C(f,"SECTION",{class:!0,style:!0});var g=v(e);N(t.$$.fragment,g),n=H(g),s=C(g,"DIV",{class:!0});var m=v(s);N(a.$$.fragment,m),i=H(m),N(l.$$.fragment,m),m.forEach(h),o=H(g),N(c.$$.fragment,g),g.forEach(h),this.h()},h(){d(s,"class","grid grid-cols-8 h-full"),d(e,"class","fixed z-20 bg-[#fafdfe] flex flex-col m-6 rounded-md h-full w-[320px]"),Q(e,"height","-webkit-fill-available")},m(f,g){w(f,e,g),A(t,e,null),b(e,n),b(e,s),A(a,s,null),b(s,i),A(l,s,null),b(e,o),A(c,e,null),u=!0},p:I,i(f){u||(p(t.$$.fragment,f),p(a.$$.fragment,f),p(l.$$.fragment,f),p(c.$$.fragment,f),u=!0)},o(f){y(t.$$.fragment,f),y(a.$$.fragment,f),y(l.$$.fragment,f),y(c.$$.fragment,f),u=!1},d(f){f&&h(e),T(t),T(a),T(l),T(c)}}}function ko(r,e,t){let n,s;return V(r,K,a=>t(0,n=a)),V(r,or,a=>t(1,s=a)),r.$$.update=()=>{r.$$.dirty&3&&s.url.origin&&n&&eo()},[n,s]}class Co extends B{constructor(e){super(),P(this,e,ko,wo,D,{})}}function Eo(r){let e,t,n,s;return e=new Co({}),n=new Jr({}),{c(){M(e.$$.fragment),t=O(),M(n.$$.fragment)},l(a){N(e.$$.fragment,a),t=H(a),N(n.$$.fragment,a)},m(a,i){A(e,a,i),w(a,t,i),A(n,a,i),s=!0},i(a){s||(p(e.$$.fragment,a),p(n.$$.fragment,a),s=!0)},o(a){y(e.$$.fragment,a),y(n.$$.fragment,a),s=!1},d(a){T(e,a),a&&h(t),T(n,a)}}}function So(r){let e,t,n,s,a,i;e=new Wi({}),s=new Or({});let l=Eo();return{c(){M(e.$$.fragment),t=O(),n=k("main"),M(s.$$.fragment),a=O(),l&&l.c(),this.h()},l(o){N(e.$$.fragment,o),t=H(o),n=C(o,"MAIN",{class:!0});var c=v(n);N(s.$$.fragment,c),a=H(c),l&&l.l(c),c.forEach(h),this.h()},h(){d(n,"class","min-w-full relative min-h-full")},m(o,c){A(e,o,c),w(o,t,c),w(o,n,c),A(s,n,null),b(n,a),l&&l.m(n,null),i=!0},p:I,i(o){i||(p(e.$$.fragment,o),p(s.$$.fragment,o),p(l),i=!0)},o(o){y(e.$$.fragment,o),y(s.$$.fragment,o),y(l),i=!1},d(o){T(e,o),o&&h(t),o&&h(n),T(s),l&&l.d()}}}class Do extends B{constructor(e){super(),P(this,e,null,So,D,{})}}export{Do as component};
