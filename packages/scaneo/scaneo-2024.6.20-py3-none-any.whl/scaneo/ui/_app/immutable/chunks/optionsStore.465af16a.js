import{w as c}from"./singletons.cb14eaab.js";import{M as n}from"./index.a81f82fa.js";const u={labelsEndpoint:"labels",geojsonEndpoint:"geojson",imagesEndpoint:"images",samEndpoint:"sam"},m={defaultUrl:"",...u};function d(e){const t=c(e),{subscribe:s,set:o}=t;return{subscribe:s,retrieve:()=>n(t),store:r=>o(r)}}const g=d(m.defaultUrl);function p(){const e=c({}),{subscribe:t,set:s}=e;return{subscribe:t,store:o=>s(o),retrieve:()=>n(e)}}const f=p(),y={bands:{red:4,green:3,blue:2},stretch:{minimum:0,maximum:3e3}},b=.3,D="",E="#ff8000",P=22,C="Somethig went wrong...",O="topright",T={loading:"Processing...",success:"Mask generated successfully!"},I={loading:"Processing...",success:"Saved!"},M={loading:"Loading...",success:"Loaded!"},A=.4,F={type:"FeatureCollection",features:[]},q="viridis",B={pane:"default"},N={polyline:!1,circlemarker:!1,circle:!1,marker:{repeatMode:!0},rectangle:!1,polygon:!1},U={polyline:!1,circlemarker:!1,circle:!1,marker:!1,polygon:!1,rectangle:{repeatMode:!0,showArea:!0,showLength:!0,shapeOptions:{weight:1}}},l=0,h=1,z=100,K=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},j=e=>{const t=localStorage.getItem(e);return t?JSON.parse(t):null},W=e=>{const t=L.latLng(e[1],e[0]),s=L.latLng(e[3],e[2]);return L.latLngBounds(t,s)},J=e=>[e.getSouthWest(),e.getSouthEast(),e.getNorthEast(),e.getNorthWest()],_=e=>{const s=e.geometry.coordinates.flat();let o,r;return s.length?[o,r]=s[0]:[o,r]=s,[o,r]},i=e=>{e.preventDefault()},x=()=>{const e=document.querySelector(".blocker");e&&(e.classList.add("z-[999]"),document.addEventListener("keydown",i))},G=()=>{const e=document.querySelector(".blocker");e&&(e.style.opacity="0",setTimeout(()=>{e.classList.remove("z-[999]"),document.removeEventListener("keydown",i)},150))},H=()=>{const e=document.querySelector(".blocker");e&&(e.style.transition="opacity 0.5s ease-in-out",e.style.opacity="0.4")},R=()=>{const e=document.querySelector('[title="Cancel drawing"]');e&&e.click()},V=e=>{const t=f.retrieve().name;return e.getLayers().filter(o=>{var r,a;return(a=(r=o.feature)==null?void 0:r.properties)==null?void 0:a.labels.includes(t)})},Q=e=>e.map(s=>{const{lat:o,lng:r}=s._latlng;return[r,o]}),X=e=>e.map(t=>{var s,o;return((o=(s=t.feature)==null?void 0:s.properties)==null?void 0:o.background)===l?l:h}),Y=()=>window.confirm("Do you want to save your progress?"),Z=e=>e.charAt(0).toUpperCase()+e.slice(1),$=()=>{const e=document.querySelector('[title="Cancel editing, discards all changes"]');e&&e.click()},ee=(e,t)=>{Object.keys(t).forEach(o=>{e.addLayer(t[o])})},te=(e,t)=>{Object.keys(t).forEach(o=>{e==null||e.removeLayer(t[o])})},se=async(e,t)=>await fetch(g.retrieve()+t,{method:"POST",headers:{"Content-Type":"application/json"},body:e}),k={...y,opacity:b};function v(){const e=c(k),{subscribe:t,update:s,set:o}=e;return{subscribe:t,bands:{red:{store:r=>s(a=>({...a,bands:{...a.bands,red:r}})),retrieve:()=>n(e).bands.red},green:{store:r=>s(a=>({...a,bands:{...a.bands,green:r}})),retrieve:()=>n(e).bands.green},blue:{store:r=>s(a=>({...a,bands:{...a.bands,blue:r}})),retrieve:()=>n(e).bands.blue}},stretch:{minimum:{store:r=>s(a=>({...a,stretch:{...a.stretch,minimum:r}})),retrieve:()=>n(e).stretch.minimum},maximum:{store:r=>s(a=>({...a,stretch:{...a.stretch,maximum:r}})),retrieve:()=>n(e).stretch.maximum}},opacity:{store:r=>s(a=>({...a,opacity:r})),retrieve:()=>n(e).opacity},retrieve:()=>n(e),setOptions:r=>o(r)}}const re=v();export{z as A,$ as B,V as C,Q as D,X as E,R as F,H as G,T as H,P as I,M as J,D as K,E as L,ee as a,te as b,J as c,u as d,f as e,F as f,W as g,l as h,Z as i,O as j,q as k,B as l,K as m,_ as n,re as o,U as p,A as q,j as r,N as s,x as t,g as u,se as v,C as w,G as x,I as y,Y as z};
