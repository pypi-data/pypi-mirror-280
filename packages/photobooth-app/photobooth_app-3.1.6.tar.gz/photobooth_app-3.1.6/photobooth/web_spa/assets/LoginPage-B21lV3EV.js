import{v as q,N as F,r as $,a0 as E,a1 as I,a2 as A,a3 as R,t as D,P as L,a4 as N,a5 as Q,a6 as j,a7 as O,a8 as T,j as K,c as M,a9 as U,f as Y,n as z,p as c,q as i,I as k,aa as p,B as v,D as g,C as G,Y as H,ab as J,_ as W}from"./index-DZMgBGND.js";import{Q as X}from"./QInput-DcrmGcqH.js";import{Q as Z}from"./QPage-uukoRX2b.js";import"./use-key-composition-DoP7cOVq.js";import"./use-id-BfnrbiJy.js";const ee=q({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(u,{slots:b,emit:d}){const h=F(),o=$(null);let a=0;const s=[];function y(e){const l=typeof e=="boolean"?e:u.noErrorFocus!==!0,m=++a,C=(t,n)=>{d(`validation${t===!0?"Success":"Error"}`,n)},P=t=>{const n=t.validate();return typeof n.then=="function"?n.then(r=>({valid:r,comp:t}),r=>({valid:!1,comp:t,err:r})):Promise.resolve({valid:n,comp:t})};return(u.greedy===!0?Promise.all(s.map(P)).then(t=>t.filter(n=>n.valid!==!0)):s.reduce((t,n)=>t.then(()=>P(n).then(r=>{if(r.valid===!1)return Promise.reject(r)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return m===a&&C(!0),!0;if(m===a){const{comp:n,err:r}=t[0];if(r!==void 0&&console.error(r),C(!1,n),l===!0){const V=t.find(({comp:B})=>typeof B.focus=="function"&&N(B.$)===!1);V!==void 0&&V.comp.focus()}}return!1})}function _(){a++,s.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function x(e){e!==void 0&&Q(e);const l=a+1;y().then(m=>{l===a&&m===!0&&(u.onSubmit!==void 0?d("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function S(e){e!==void 0&&Q(e),d("reset"),j(()=>{_(),u.autofocus===!0&&u.noResetFocus!==!0&&f()})}function f(){O(()=>{if(o.value===null)return;const e=o.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||o.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||o.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(o.value.querySelectorAll("[tabindex]"),l=>l.tabIndex!==-1);e?.focus({preventScroll:!0})})}E(T,{bindComponent(e){s.push(e)},unbindComponent(e){const l=s.indexOf(e);l!==-1&&s.splice(l,1)}});let w=!1;return I(()=>{w=!0}),A(()=>{w===!0&&u.autofocus===!0&&f()}),R(()=>{u.autofocus===!0&&f()}),Object.assign(h.proxy,{validate:y,resetValidation:_,submit:x,reset:S,focus:f,getValidationComponents:()=>s}),()=>D("form",{class:"q-form",ref:o,onSubmit:x,onReset:S},L(b.default))}}),te={class:"text-h5 text-weight-bold"},oe={class:""},ae={class:""},ne={href:"http://photobooth-app.org/setup/admincenter/",target:"_blank",class:"text-weight-bold",style:{"text-decoration":"none"}},se=K({__name:"LoginPage",setup(u){const b=M(),d=U({username:"admin",password:null}),h=async()=>{try{await J(d),b.push("/admin")}catch(o){console.error(o)}};return(o,a)=>(Y(),z(Z,{id:"login-page",class:"flex flex-center"},{default:c(()=>[i(H,{class:"q-pa-md no-shadow login-card",bordered:""},{default:c(()=>[i(k,{flat:"",color:"grey",icon:"arrow_back_ios_new",onClick:a[0]||(a[0]=s=>o.$router.go(-1))}),i(ee,{ref:"form",class:"q-gutter-md",onSubmit:h},{default:c(()=>[i(p,{class:"text-center"},{default:c(()=>[v("div",te,g(o.$t("Sign in")),1),v("div",oe,g(o.$t("Sign in below to access the admin dashboard.")),1)]),_:1}),i(p,null,{default:c(()=>[i(X,{modelValue:d.password,"onUpdate:modelValue":a[1]||(a[1]=s=>d.password=s),filled:"",type:"password",label:"Password"},null,8,["modelValue"])]),_:1}),i(p,null,{default:c(()=>[i(k,{rounded:"",color:"primary",label:"Sign in",class:"full-width",type:"submit"})]),_:1}),i(p,{class:"text-center"},{default:c(()=>[v("div",ae,[G(g(o.$t("Looking for the default password or issues signing in?"))+" ",1),v("a",ne,g(o.$t("Check the documentation.")),1)])]),_:1})]),_:1},512)]),_:1})]),_:1}))}}),fe=W(se,[["__file","LoginPage.vue"]]);export{fe as default};
