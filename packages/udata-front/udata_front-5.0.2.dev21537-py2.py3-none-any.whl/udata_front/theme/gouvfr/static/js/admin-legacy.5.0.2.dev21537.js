!function(){function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(r)}function r(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function t(r,t,n){return(t=function(r){var t=function(r,t){if("object"!==e(r)||null===r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var a=n.call(r,t||"default");if("object"!==e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}(r,"string");return"symbol"===e(t)?t:String(t)}(t))in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function n(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */n=function(){return t};var r,t={},a=Object.prototype,o=a.hasOwnProperty,i=Object.defineProperty||function(e,r,t){e[r]=t.value},l="function"==typeof Symbol?Symbol:{},u=l.iterator||"@@iterator",s=l.asyncIterator||"@@asyncIterator",c=l.toStringTag||"@@toStringTag";function d(e,r,t){return Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[r]}try{d({},"")}catch(r){d=function(e,r,t){return e[r]=t}}function f(e,r,t,n){var a=r&&r.prototype instanceof y?r:y,o=Object.create(a.prototype),l=new A(n||[]);return i(o,"_invoke",{value:L(e,t,l)}),o}function m(e,r,t){try{return{type:"normal",arg:e.call(r,t)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var p="suspendedStart",v="suspendedYield",h="executing",b="completed",g={};function y(){}function _(){}function w(){}var k={};d(k,u,(function(){return this}));var x=Object.getPrototypeOf,O=x&&x(x(q([])));O&&O!==a&&o.call(O,u)&&(k=O);var j=w.prototype=y.prototype=Object.create(k);function E(e){["next","throw","return"].forEach((function(r){d(e,r,(function(e){return this._invoke(r,e)}))}))}function z(r,t){function n(a,i,l,u){var s=m(r[a],r,i);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==e(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,l,u)}),(function(e){n("throw",e,l,u)})):t.resolve(d).then((function(e){c.value=e,l(c)}),(function(e){return n("throw",e,l,u)}))}u(s.arg)}var a;i(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}})}function L(e,t,n){var a=p;return function(o,i){if(a===h)throw new Error("Generator is already running");if(a===b){if("throw"===o)throw i;return{value:r,done:!0}}for(n.method=o,n.arg=i;;){var l=n.delegate;if(l){var u=C(l,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=h;var s=m(e,t,n);if("normal"===s.type){if(a=n.done?b:v,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=b,n.method="throw",n.arg=s.arg)}}}function C(e,t){var n=t.method,a=e.iterator[n];if(a===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=r,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=m(a,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,g;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,g):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function P(e){var r={tryLoc:e[0]};1 in e&&(r.catchLoc=e[1]),2 in e&&(r.finallyLoc=e[2],r.afterLoc=e[3]),this.tryEntries.push(r)}function S(e){var r=e.completion||{};r.type="normal",delete r.arg,e.completion=r}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function q(t){if(t||""===t){var n=t[u];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function e(){for(;++a<t.length;)if(o.call(t,a))return e.value=t[a],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}throw new TypeError(e(t)+" is not iterable")}return _.prototype=w,i(j,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:_,configurable:!0}),_.displayName=d(w,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var r="function"==typeof e&&e.constructor;return!!r&&(r===_||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,d(e,c,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},E(z.prototype),d(z.prototype,s,(function(){return this})),t.AsyncIterator=z,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new z(f(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(j),d(j,c,"Generator"),d(j,u,(function(){return this})),d(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var r=Object(e),t=[];for(var n in r)t.push(n);return t.reverse(),function e(){for(;t.length;){var n=t.pop();if(n in r)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=q,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,a){return l.type="throw",l.arg=e,t.next=n,a&&(t.method="next",t.arg=r),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),s=o.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,r){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=r,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),g},finish:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),S(t),g}},catch:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.tryLoc===e){var n=t.completion;if("throw"===n.type){var a=n.arg;S(t)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:q(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),g}},t}function a(e,r,t,n,a,o,i){try{var l=e[o](i),u=l.value}catch(s){return void t(s)}l.done?r(u):Promise.resolve(u).then(n,a)}function o(e){return function(){var r=this,t=arguments;return new Promise((function(n,o){var i=e.apply(r,t);function l(e){a(i,n,o,l,u,"next",e)}function u(e){a(i,n,o,l,u,"throw",e)}l(void 0)}))}}System.register(["vue","./sentry-legacy.5.0.2.dev21537.js","./_commonjsHelpers-legacy.5.0.2.dev21537.js"],(function(e,a){"use strict";var i,l,u,s,c,d,f,m,p,v,h,b,g,y,_,w,k,x,O,j,E,z,L,C,P,S,A,q,M,T,R,N,V,B,D,I,G,H,Y,F,U,W,$,Z,J,K,Q,X,ee,re,te,ne,ae,oe,ie,le,ue,se,ce;return{setters:[function(e){i=e.defineComponent,l=e.resolveComponent,u=e.openBlock,s=e.createElementBlock,c=e.createElementVNode,d=e.normalizeClass,f=e.createCommentVNode,m=e.createVNode,p=e.withCtx,v=e.createTextVNode,h=e.toDisplayString,b=e.unref,g=e.ref,y=e.onMounted,_=e.Fragment,w=e.renderList,k=e.createBlock,x=e.renderSlot,O=e.watchEffect,j=e.Teleport,E=e.withModifiers,z=e.computed,L=e.createApp},function(e){C=e._,P=e.c,S=e.i,A=e.C,q=e.b,M=e.q,T=e.s,R=e.at,N=e.e,V=e.a,B=e.j,D=e.G,I=e.a3,G=e.au,H=e.av,Y=e.aw,F=e.ax,U=e.a9,W=e.ay,$=e.az,Z=e.aA,J=e.aB,K=e.aC,Q=e.d,X=e.aj,ee=e.af,re=e.am,te=e.an,ne=e.aa,ae=e.ao,oe=e.U,ie=e.aD,le=e.aE,ue=e.ap,se=e.aq,ce=e.ar},null],execute:function(){var e=document.createElement("style");e.textContent=".fr-sidemenu__link[data-v-6240fbee]{padding:.25rem .375rem}.fr-sidemenu__link[aria-current][data-v-6240fbee]:before{width:0}.fr-sidemenu__link[data-v-6240fbee]:has(>[aria-current]){border-radius:2px;background-color:var(--background-alt-grey);color:var(--text-default-grey);font-weight:800}.fr-sidemenu__link[data-v-6240fbee]:has(>[aria-current]):hover{background-color:var(--background-alt-grey-hover)}.fr-sidemenu__link[data-v-6240fbee]:has(>[aria-current]):active{background-color:var(--background-alt-grey-active)}.fr-sidemenu__btn[data-v-88e26365]{background-color:var(--background-alt-grey);border-bottom:1px solid var(--border-default-grey)}.fr-sidemenu__btn[data-v-88e26365]:hover{background-color:var(--background-alt-grey-hover)}.fr-sidemenu__btn[data-v-88e26365]:active{background-color:var(--background-alt-grey-active)}.fr-sidemenu__btn[aria-current][data-v-88e26365]{background-color:var(--background-default-grey);color:var(--text-default-grey)}.fr-sidemenu__btn[aria-current][data-v-88e26365]:before{width:0}.fr-sidemenu__btn[aria-current][data-v-88e26365]:hover{background-color:var(--hover-tint)}.fr-sidemenu__btn[aria-current][data-v-88e26365]:active{background-color:var(--active-tint)}html,body{height:100%}@media (min-width: 48em){.fr-sidemenu,.fr-sidemenu__inner{height:100%}}#app{display:flex;flex-direction:column;height:100%}.fr-sidemenu{padding:0}.fr-sidemenu .fr-sidemenu__inner{padding:0;box-shadow:1px 0 0 0 var(--border-default-grey);background-color:var(--background-default-grey)}.fr-sidemenu .fr-sidemenu__item:first-child:before,.fr-sidemenu .fr-sidemenu__item:last-child:before,.fr-sidemenu .fr-sidemenu__item:before{box-shadow:none}\n",document.head.appendChild(e);var a,de={class:"fr-sidemenu__item"},fe=["innerHTML"],me=C(i({__name:"AdminSidebarLink",props:{label:{},icon:{},iconHtml:{},to:{}},setup:function(e){return function(e,r){var t=l("router-link");return u(),s("li",de,[c("div",{class:d([{"fr-icon-svg fr-icon--sm":e.iconHtml},"fr-enlarge-link fr-sidemenu__link fr-mb-1w"])},[e.iconHtml?(u(),s("div",{key:0,class:"fr-mr-1w fr-grid-row",innerHTML:e.iconHtml},null,8,fe)):e.icon?(u(),s("div",{key:1,class:d([e.icon,"fr-mr-1w fr-icon--sm"]),"aria-hidden":"true"},null,2)):f("",!0),m(t,{to:e.to},{default:p((function(){return[v(h(e.label),1)]})),_:1},8,["to"])],2)])}}}),[["__scopeId","data-v-6240fbee"]]),pe=["aria-expanded","aria-controls","aria-current"],ve={class:"logo logo--sm"},he={class:"fr-mx-1w fr-col text-overflow-ellipsis"},be=["id"],ge={class:"fr-sidemenu__list fr-mx-1w fr-my-3v"},ye=i({__name:"AdminSidebarOrganizationMenu",props:{organization:{},isOpened:{type:Boolean}},setup:function(e){var r=P().t,t=S("organization-menu");return function(e,n){return u(),s("li",{class:d(["fr-sidemenu__item",{"fr-sidemenu__item--active":e.isOpened}])},[c("button",{class:"fr-sidemenu__btn","aria-expanded":e.isOpened,"aria-controls":b(t),"aria-current":e.isOpened},[c("div",ve,[m(A,{type:"organization",src:e.organization.logo_thumbnail,size:20},null,8,["src"])]),c("p",he,h(e.organization.name),1)],8,pe),c("div",{class:"fr-collapse","data-fr-js-collapse":"",id:b(t)},[c("ul",ge,[m(me,{iconHtml:b('<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M5 12V18C5 18 5 21 12 21C19 21 19 18 19 18V12" stroke="currentColor" stroke-width="1.5"/>\n<path d="M5 6V12C5 12 5 15 12 15C19 15 19 12 19 12V6" stroke="currentColor" stroke-width="1.5"/>\n<path d="M12 3C19 3 19 6 19 6C19 6 19 9 12 9C5 9 5 6 5 6C5 6 5 3 12 3Z" stroke="currentColor" stroke-width="1.5"/>\n</svg>\n'),label:b(r)("Datasets"),to:{name:"organization-datasets",params:{oid:e.organization.id}}},null,8,["iconHtml","label","to"]),m(me,{icon:"fr-icon-line-chart-line",label:b(r)("Reuses"),to:{name:"organization-reuses",params:{oid:e.organization.id}}},null,8,["label","to"]),m(me,{icon:"fr-icon-parent-line",label:b(r)("Members"),to:{name:"organization-members",params:{oid:e.organization.id}}},null,8,["label","to"])])],8,be)],2)}}}),_e=C(ye,[["__scopeId","data-v-88e26365"]]);function we(){return q(),a||(a=M.get(T("me/")).then((function(e){return e.data})))}var ke={class:"fr-container--fluid h-100"},xe={class:"fr-grid-row h-100 bg-grey-50"},Oe={class:"fr-col-12 fr-col-md-4 fr-col-lg-3 fr-col-xl-2"},je=["aria-label"],Ee={class:"fr-sidemenu__inner"},ze=["aria-controls"],Le=["id"],Ce={class:"fr-sidemenu__list"},Pe={class:"fr-sidemenu__item"},Se=["aria-controls"],Ae={class:"fr-mx-1v"},qe=["id"],Me={class:"fr-col-12 fr-col-md-8 fr-col-lg-9 fr-col-xl-10 h-100 fr-px-2w"},Te=i({__name:"Admin",setup:function(e){var r=P().t,t=R(),a=S("menu"),i=S("profil-submenu"),d=g(null),p=g(null);return y(o(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we();case 2:d.value=e.sent,d.value.organizations.length>0&&(t.params.oid?p.value=t.params.oid:p.value=d.value.organizations[0].id);case 4:case"end":return e.stop()}}),e)})))),function(e,n){var o=l("router-view");return u(),s("div",ke,[c("div",xe,[c("div",Oe,[c("nav",{class:"fr-sidemenu","aria-label":b(r)("Administration menu")},[c("div",Ee,[c("button",{class:"fr-sidemenu__btn",hidden:"","aria-controls":b(a),"aria-expanded":"false"},h(b(r)("Open menu")),9,ze),c("div",{class:"fr-collapse",id:b(a)},[c("ul",Ce,[c("li",Pe,[c("button",{class:"fr-sidemenu__btn border-bottom border-default-grey","aria-expanded":"false","aria-controls":b(i)},[m(N,{user:b(V),size:24,rounded:!0},null,8,["user"]),c("p",Ae,h(b(r)("My Profil")),1)],8,Se),c("div",{class:"fr-collapse",id:b(i)},[m(me,{icon:"fr-icon-account-circle-line",label:b(r)("Me"),to:"/me"},null,8,["label"])],8,qe)]),d.value?(u(!0),s(_,{key:0},w(d.value.organizations,(function(e){return u(),k(_e,{organization:e,"is-opened":(r=e.id,r===p.value)},null,8,["organization","is-opened"]);var r})),256)):f("",!0)])],8,Le)])],8,je)]),c("div",Me,[(u(),k(o,{key:b(t).fullPath}))])])])}}}),Re=["aria-label"],Ne={class:"fr-breadcrumb__list"},Ve={__name:"Breadcrumb",setup:function(e){var r=P().t;return function(e,t){return u(),s("nav",{rol:"navigation","aria-label":b(r)("You're here:"),class:"fr-breadcrumb fr-mb-5v"},[c("ol",Ne,[x(e.$slots,"default")])],8,Re)}}},Be={class:"fr-container--fluid"},De={key:0},Ie={class:"fr-breadcrumb__link","aria-current":"page"},Ge={class:"fr-alert fr-alert--info"},He={class:"fr-alert__title"},Ye=i({__name:"Datasets",props:{oid:{}},setup:function(e){var r=P().t,t=e,a="/admin/organization/".concat(t.oid,"/"),i=g(null),d=g(null);return y(o(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we();case 2:return e.abrupt("return",i.value=e.sent);case 3:case"end":return e.stop()}}),e)})))),O((function(){var e,r;d.value=null!==(e=null===(r=i.value)||void 0===r?void 0:r.organizations.find((function(e){return e.id===t.oid})))&&void 0!==e?e:null})),function(e,t){var n=l("router-link");return u(),s("div",Be,[m(Ve,null,{default:p((function(){return[c("li",null,[m(n,{class:"fr-breadcrumb__link",to:"/"},{default:p((function(){return[v(h(b(r)("Administration")),1)]})),_:1})]),d.value?(u(),s("li",De,[m(n,{class:"fr-breadcrumb__link",to:"/"},{default:p((function(){return[v(h(d.value.name),1)]})),_:1})])):f("",!0),c("li",null,[c("a",Ie,h(b(r)("Datasets")),1)])]})),_:1}),c("div",Ge,[c("h3",He,h(b(r)("This is a WIP page")),1),c("p",null,[c("a",{href:a},h(b(r)("You can manage your datasets on the current admin.")),1)])])])}}}),Fe={class:"fr-container--fluid"},Ue={key:0},We={class:"fr-breadcrumb__link","aria-current":"page"},$e={class:"fr-alert fr-alert--info"},Ze={class:"fr-alert__title"},Je=i({__name:"Reuses",props:{oid:{}},setup:function(e){var r=P().t,t=e,a="/admin/organization/".concat(t.oid,"/"),i=g(null),d=g(null);return y(o(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we();case 2:return e.abrupt("return",i.value=e.sent);case 3:case"end":return e.stop()}}),e)})))),O((function(){var e,r;d.value=null!==(e=null===(r=i.value)||void 0===r?void 0:r.organizations.find((function(e){return e.id===t.oid})))&&void 0!==e?e:null})),function(e,t){var n=l("router-link");return u(),s("div",Fe,[m(Ve,null,{default:p((function(){return[c("li",null,[m(n,{class:"fr-breadcrumb__link",to:"/"},{default:p((function(){return[v(h(b(r)("Administration")),1)]})),_:1})]),d.value?(u(),s("li",Ue,[m(n,{class:"fr-breadcrumb__link",to:"/"},{default:p((function(){return[v(h(d.value.name),1)]})),_:1})])):f("",!0),c("li",null,[c("a",We,h(b(r)("Reuses")),1)])]})),_:1}),c("div",$e,[c("h3",Ze,h(b(r)("This is a WIP page")),1),c("p",null,[c("a",{href:a},h(b(r)("You can manage your reuses on the current admin.")),1)])])])}}}),Ke={class:"fr-container--fluid"},Qe={class:"fr-breadcrumb__link","aria-current":"page"},Xe={key:0,class:"fr-h1"},er={class:"fr-alert fr-alert--info"},rr={class:"fr-alert__title"},tr={href:"/admin/me/"},nr=i({__name:"Me",setup:function(e){var r=P().t,t=g(null);return y(o(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we();case 2:return e.abrupt("return",t.value=e.sent);case 3:case"end":return e.stop()}}),e)})))),function(e,n){var a=l("router-link");return u(),s("div",Ke,[m(Ve,null,{default:p((function(){return[c("li",null,[m(a,{class:"fr-breadcrumb__link",to:"/"},{default:p((function(){return[v(h(b(r)("Administration")),1)]})),_:1})]),c("li",null,[c("a",Qe,h(b(r)("Me")),1)])]})),_:1}),t.value?(u(),s("h1",Xe,h(t.value.first_name)+" "+h(t.value.last_name),1)):f("",!0),c("div",er,[c("h3",rr,h(b(r)("This is a WIP page")),1),c("p",null,[c("a",tr,h(b(r)("You can edit your profil on the current admin.")),1)])])])}}}),ar={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--middle"},or=i({__name:"AdminDangerZone",setup:function(e){return function(e,r){return u(),k(b(B),{color:"error",type:"secondary",weight:"regular"},{default:p((function(){return[c("div",ar,[x(e.$slots,"default")])]})),_:3})}}}),ir={class:"fr-mt-n9v fr-mb-2w"},lr={class:"fr-badge fr-badge--info fr-badge--no-icon"},ur=c("span",{class:"fr-icon-user-add-line","aria-hidden":"true"},null,-1),sr={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--middle"},cr={class:"fr-col"},dr={class:"fr-grid-row fr-grid-row--middle"},fr={class:"fr-ml-3v fr-mt-1-5v fr-mb-0 filet filet-default-grey fr-text--sm"},mr={key:0,class:"fr-col-auto fr-grid-row flex-direction-column"},pr=["disabled"],vr=["disabled","aria-controls"],hr=["aria-labelledby","id"],br={class:"fr-container fr-container--fluid fr-container-md"},gr={class:"fr-grid-row fr-grid-row--center"},yr={class:"fr-col-12 fr-col-md-8"},_r={class:"fr-modal__body"},wr={class:"fr-modal__header"},kr=["title","aria-controls"],xr={class:"fr-modal__content"},Or=["id"],jr={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--right"},Er={class:"fr-col-auto"},zr=["disabled"],Lr={class:"fr-col-auto"},Cr=["disabled"],Pr=i({__name:"MembershipRequest",props:{loading:{type:Boolean},oid:{},request:{},showActions:{type:Boolean}},emits:["accept","refuse"],setup:function(e,r){var t=r.emit,n=e,a=t,o=P().t,i=g(""),d=S("modal"),y=S("modalTitle");function _(){var e=document.getElementById(d);globalThis.dsfr(e).modal.conceal()}function w(){a("refuse",n.request.id,i.value),_()}function x(){i.value="",_()}return function(e,r){var t=l("MembershipRequest",!0);return u(),k(D,{class:"drop-shadow rounded-xxs fr-mt-3w"},{default:p((function(){return[c("div",ir,[c("p",lr,[ur,v(" "+h(b(o)("Membership Request")),1)])]),c("div",sr,[c("div",cr,[c("div",dr,[m(N,{class:"fr-mr-1v",user:e.request.user,rounded:!0,size:24},null,8,["user"]),v(" "+h(b(o)("{fullName} asks to join the organization.",{fullName:e.request.user.first_name+" "+e.request.user.last_name})),1)]),c("div",fr,h(e.request.comment),1)]),e.showActions?(u(),s("div",mr,[c("button",{class:"fr-btn fr-btn--sm fr-btn--icon-left fr-mb-1w fr-icon-check-line",onClick:r[0]||(r[0]=function(r){return e.$emit("accept",e.request.id)}),disabled:e.loading,"data-testid":"accept"},h(b(o)("Accept request")),9,pr),c("button",{class:"fr-btn fr-btn--icon-left fr-btn--sm fr-btn--secondary fr-btn--secondary--error fr-icon-close-line",disabled:e.loading,"data-fr-opened":"false","aria-controls":b(d),"data-testid":"refuse"},h(b(o)("Refuse")),9,vr),(u(),k(j,{to:"body"},[c("dialog",{"aria-labelledby":b(y),role:"dialog",id:b(d),class:"fr-modal","data-testid":"modal"},[c("div",br,[c("div",gr,[c("div",yr,[c("div",_r,[c("div",wr,[c("button",{class:"fr-btn--close fr-btn",title:b(o)("Close the modal dialog"),"aria-controls":b(d),onClick:E(x,["prevent"])},h(b(o)("Close")),9,kr)]),c("div",xr,[c("h1",{id:b(y),class:"fr-modal__title fr-mb-2w"},h(b(o)("Refuse membership request")),9,Or),m(t,{class:"fr-mt-4w fr-mb-2w",loading:!1,oid:e.oid,request:e.request,"show-actions":!1},null,8,["oid","request"]),c("form",{onSubmit:E(w,["prevent"]),onReset:x},[m(I,{label:b(o)("You can provide the refusal reason:"),modelValue:i.value,"onUpdate:modelValue":r[1]||(r[1]=function(e){return i.value=e}),"data-testid":"comment-group"},null,8,["label","modelValue"]),c("div",jr,[c("div",Er,[c("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500",type:"reset",disabled:e.loading,"data-testid":"cancel-modal-button"},h(b(o)("Cancel")),9,zr)]),c("div",Lr,[c("button",{class:"fr-btn",type:"submit",disabled:e.loading,"data-testid":"refuse-modal-button"},h(b(o)("Refuse request")),9,Cr)])])],32)])])])])])],8,hr)]))])):f("",!0)])]})),_:1})}}}),Sr={key:0},Ar=c("li",null,null,-1),qr={class:"fr-h1 fr-mb-2w"},Mr={class:"subtitle subtitle--uppercase"},Tr={class:"subtitle subtitle--uppercase fr-mt-2w fr-mb-1v"},Rr={class:"fr-table fr-table--layout-fixed"},Nr={scope:"col"},Vr={scope:"col"},Br={key:0,scope:"col"},Dr={class:"fr-badge"},Ir={key:0},Gr=["aria-controls"],Hr=["aria-labelledby","id"],Yr={class:"fr-container fr-container--fluid fr-container-md"},Fr={class:"fr-grid-row fr-grid-row--center"},Ur={class:"fr-col-12 fr-col-md-8"},Wr={class:"fr-modal__body"},$r={class:"fr-modal__header"},Zr=["title","aria-controls"],Jr={class:"fr-modal__content"},Kr=["id"],Qr={class:"fr-grid-row fr-grid-row--middle fr-text--bold fr-mb-2w"},Xr=["onSubmit"],et={class:"fr-col"},rt={class:"fr-col-auto"},tt=["disabled"],nt={class:"fr-col"},at={class:"fr-m-0 text-grey-500"},ot={class:"fr-m-0 fr-text--xs text-default-error"},it={class:"fr-col-auto"},lt=["disabled","onClick"],ut=i({__name:"Members",props:{oid:{}},setup:function(e){var a=e,i=P().t,d=Q().toast,x=g([]),L=z((function(){return G||A.value.some((function(e){var r;return e.user.id===(null===(r=V)||void 0===r?void 0:r.id)&&"admin"===e.role}))})),C=g([]),S={name:"SomeName"},A=g([]),q=g(!1);function M(e){return"fr-modal-user-"+e}function T(e){return"fr-modal-title-user-"+e}function R(e){var r=document.getElementById(M(e));globalThis.dsfr(r).modal.conceal()}function B(){return(B=o(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.newRole){e.next=3;break}return R(r.user.id),e.abrupt("return");case 3:return e.prev=3,q.value=!0,e.next=7,W(a.oid,r.user.id,r.newRole);case 7:X(),R(r.user.id),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),d.error(i("An error occurred while updating the member role."));case 14:return e.prev=14,q.value=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[3,11,14,17]])})))).apply(this,arguments)}function D(){return(D=o(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,q.value=!0,e.next=4,$(a.oid,r.user.id);case 4:X(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),d.error(i("An error occurred while removing this member."));case 10:return e.prev=10,q.value=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})))).apply(this,arguments)}function I(e){return C.value.map((function(n){var a=function(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?r(Object(a),!0).forEach((function(r){t(e,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))}))}return e}({},n);return a.value===e&&(a.selected=!0),a}))}function X(){return ee.apply(this,arguments)}function ee(){return(ee=o(n().mark((function e(){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(a.oid);case 2:r=e.sent,A.value=r.members;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return te.apply(this,arguments)}function te(){return(te=o(n().mark((function e(){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(a.oid);case 2:r=e.sent,x.value=r;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e){return ae.apply(this,arguments)}function ae(){return(ae=o(n().mark((function e(r){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.value=!0,t=[],e.prev=2,e.next=5,J(a.oid,r);case 5:t.push(re()),t.push(X()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),d.error(i("An error occurred while accepting this membership."));case 12:return e.prev=12,Promise.all(t).finally((function(){return q.value=!1})),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})))).apply(this,arguments)}function oe(e,r){return ie.apply(this,arguments)}function ie(){return(ie=o(n().mark((function e(r,t){var o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.value=!0,o=[],e.prev=2,e.next=5,K(a.oid,r,t);case 5:o.push(re()),o.push(X()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),d.error(i("An error occurred while refusing this membership."));case 12:return e.prev=12,Promise.all(o).finally((function(){return q.value=!1})),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})))).apply(this,arguments)}return O((function(){L.value&&H(a.oid).then((function(e){return x.value=e}))})),y((function(){Y().then(F).then((function(e){return C.value=e})),X()})),function(e,r){var t=l("router-link");return u(),s("div",null,[m(Ve,null,{default:p((function(){return[c("li",null,[m(t,{class:"fr-breadcrumb__link",to:"/"},{default:p((function(){return[v(h(b(i)("Administration")),1)]})),_:1})]),S?(u(),s("li",Sr,[m(t,{class:"fr-breadcrumb__link",to:"/"},{default:p((function(){return[v(h(S.name),1)]})),_:1})])):f("",!0),Ar]})),_:1}),c("h1",qr,h(b(i)("Members")),1),x.value.length?(u(),s(_,{key:0},[c("h2",Mr,h(b(i)("{n} requests",{n:x.value.length})),1),(u(!0),s(_,null,w(x.value,(function(r){return u(),k(Pr,{class:"fr-mb-4w",key:r.id,loading:q.value,oid:e.oid,request:r,"show-actions":!0,onAccept:ne,onRefuse:oe},null,8,["loading","oid","request"])})),128))],64)):f("",!0),c("h2",Tr,h(b(i)("{n} members",{n:A.value.length})),1),c("div",Rr,[c("table",null,[c("thead",null,[c("tr",null,[c("th",Nr,h(b(i)("Members")),1),c("th",Vr,h(b(i)("Status")),1),L.value?(u(),s("th",Br,h(b(i)("Action")),1)):f("",!0)])]),c("tbody",null,[(u(!0),s(_,null,w(A.value,(function(e){return u(),s("tr",{key:e.user.id},[c("td",null,h(e.user.first_name)+" "+h(e.user.last_name),1),c("td",null,[c("p",Dr,h((r=e.role,null!==(t=null===(n=C.value.find((function(e){return e.value===r})))||void 0===n?void 0:n.label)&&void 0!==t?t:r)),1)]),L.value?(u(),s("td",Ir,[c("button",{class:"fr-btn fr-btn--sm fr-btn--tertiary-no-outline fr-icon-pencil-line","data-fr-opened":"false","aria-controls":M(e.user.id)},h(b(i)("Edit")),9,Gr),(u(),k(j,{to:"body"},[c("dialog",{"aria-labelledby":T(e.user.id),role:"dialog",id:M(e.user.id),class:"fr-modal"},[c("div",Yr,[c("div",Fr,[c("div",Ur,[c("div",Wr,[c("div",$r,[c("button",{class:"fr-btn--close fr-btn",title:b(i)("Close the modal dialog"),"aria-controls":M(e.user.id)},h(b(i)("Close")),9,Zr)]),c("div",Jr,[c("h1",{id:T(e.user.id),class:"fr-modal__title fr-mb-2w"},h(b(i)("Edit member")),9,Kr),c("p",Qr,[m(N,{class:"fr-mr-1v",user:e.user,rounded:!0,size:24},null,8,["user"]),v(" "+h(e.user.first_name)+" "+h(e.user.last_name),1)]),c("form",{class:"fr-grid-row fr-grid-row--gutters fr-grid-row--bottom",onSubmit:E((function(r){return function(e){return B.apply(this,arguments)}(e)}),["prevent"])},[c("div",et,[C.value.length>0?(u(),k(U,{key:0,label:b(i)("Role of the member"),"model-value":e.role,"onUpdate:modelValue":function(r){return e.newRole=r},options:I(e.role)},null,8,["label","model-value","onUpdate:modelValue","options"])):f("",!0)]),c("div",rt,[c("button",{class:"fr-btn",type:"submit",disabled:q.value},h(b(i)("Validate")),9,tt)])],40,Xr),m(or,{class:"fr-mt-2w"},{default:p((function(){return[c("div",nt,[c("p",at,h(b(i)("Remove member from the organization")),1),c("p",ot,h(b(i)("Be careful, this action can't be reverse.")),1)]),c("div",it,[c("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary--error fr-btn--icon-left fr-icon-logout-box-r-line",disabled:q.value,onClick:function(r){return function(e){return D.apply(this,arguments)}(e)}},h(b(i)("Remove member")),9,lt)])]})),_:2},1024)])])])])])],8,Hr)]))])):f("",!0)]);var r,t,n})),128))])])])])}}});X({admin_root:ee,default_lang:re.global.locale.value,explorable_resources:te,only_locales:re.global.locale.value,schema_documentation_url:ne,schema_validata_url:ae,show_copy_resource_permalink:!0,title:oe});var st=[{path:"/me",component:nr},{path:"/organizations/:oid",children:[{path:"datasets",component:Ye,props:!0,name:"organization-datasets"},{path:"reuses",component:Je,props:!0,name:"organization-reuses"},{path:"members",component:ut,props:!0,name:"organization-members"}]}],ct=ie({history:le(),routes:st}),dt=L(Te);ue(dt),dt.use(se),dt.use(ce),dt.use(re),dt.use(ct),dt.mount("#admin"),globalThis.dsfr.start(),console.log("JS is injected !")}}}))}();
