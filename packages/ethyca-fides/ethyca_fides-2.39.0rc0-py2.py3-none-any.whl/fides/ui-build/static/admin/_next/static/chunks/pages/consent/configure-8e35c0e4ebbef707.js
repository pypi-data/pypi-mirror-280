(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3709],{65535:function(e,n,t){"use strict";t.d(n,{ZS:function(){return a},a4:function(){return r}});var s=t(80406),i=t(28703).u.injectEndpoints({endpoints:function(e){return{getPurposes:e.query({query:function(){return"purposes"}})}}}),r=i.useGetPurposesQuery,o={purposes:{},special_purposes:{}},a=(0,s.P1)(i.endpoints.getPurposes.select(),(function(e){return e.data||o}))},56566:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return I}});var s=t(28841),i=t(27378),r=t(51471),o=t(90849),a=t(92222),u=t(59003),l=t(90768),c=t(55162),d=t(86677),p=t(90089),f=t(24246),h=["resetFilters","isOpen","onClose","children"];function x(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,s)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?x(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var j=function(e,n){var t=e.filter((function(e){return e.isChecked}));return t.length>0?"".concat(n,"=").concat(t.map((function(e){return e.value})).join("&".concat(n,"="))):void 0},C=function(e){var n=e.value,t=e.displayText,i=e.isChecked,r=e.onCheckboxChange;return(0,f.jsx)(s.XZJ,{value:n,height:"20px",mb:"25px",isChecked:i,onChange:function(e){var t=e.target;r(n,t.checked)},_focusWithin:{bg:"gray.100"},colorScheme:"complimentary",children:(0,f.jsx)(s.xvT,{fontSize:"sm",lineHeight:5,textOverflow:"ellipsis",overflow:"hidden",children:t})},n)},b=function(e){var n=e.options,t=e.header,r=e.onCheckboxChange,o=e.columns,a=void 0===o?3:o,u=e.numDefaultOptions,l=void 0===u?15:u,c=(0,i.useState)(!1),d=c[0],p=c[1],h=d?n:n.slice(0,l),x=n.length>l;return(0,f.jsxs)(s.Qdk,{border:"0px",padding:"12px 8px 8px 12px",children:[(0,f.jsx)(s.X6q,{height:"56px",children:(0,f.jsxs)(s.KFZ,{height:"100%",children:[(0,f.jsx)(s.xuv,{flex:"1",alignItems:"center",justifyContent:"center",textAlign:"left",fontWeight:600,children:t}),(0,f.jsx)(s.XEm,{})]})}),(0,f.jsxs)(s.Hk3,{id:"panel-".concat(t),children:[(0,f.jsx)(s.MIq,{columns:a,children:h.map((function(e){return(0,f.jsx)(C,g(g({},e),{},{onCheckboxChange:r}),e.value)}))}),!d&&x?(0,f.jsx)(s.zxk,{size:"sm",variant:"ghost",onClick:function(){p(!0)},children:"View more"}):null,d&&x?(0,f.jsx)(s.zxk,{size:"sm",variant:"ghost",onClick:function(){p(!1)},children:"View less"}):null]})]})},v=function(e){var n=e.heading,t=e.children;return(0,f.jsxs)(s.xuv,{padding:"12px 8px 8px 12px",maxHeight:600,children:[n?(0,f.jsx)(s.X6q,{size:"md",lineHeight:6,fontWeight:"bold",mb:2,children:n}):null,t]})},m=function(e){var n=e.resetFilters,t=e.isOpen,i=e.onClose,r=e.children,o=(0,p.Z)(e,h);return(0,f.jsxs)(s.u_l,g(g({isOpen:t,onClose:i,isCentered:!0,size:"2xl"},o),{},{children:[(0,f.jsx)(s.ZAr,{}),(0,f.jsxs)(s.hzk,{children:[(0,f.jsx)(s.xBx,{children:"Filters"}),(0,f.jsx)(s.olH,{}),(0,f.jsx)(s.izJ,{}),(0,f.jsx)(s.fef,{maxH:"85vh",padding:"0px",overflowX:"auto",style:{scrollbarGutter:"stable"},children:r}),(0,f.jsx)(s.mzw,{children:(0,f.jsxs)(s.xuv,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,f.jsx)(s.zxk,{variant:"outline",size:"sm",mr:3,onClick:n,flexGrow:1,children:"Reset filters"}),(0,f.jsx)(s.zxk,{colorScheme:"primary",size:"sm",onClick:i,flexGrow:1,children:"Done"})]})})]})]}))},O=t(60709),y=t(36523),k=t(73679),P=t(6848),w=t(65535),_=t(75846);function z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,s)}return t}function D(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?z(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var S=function(e){var n=e.isOpen,t=e.isTcfEnabled,i=e.onClose,r=e.resetFilters,o=e.purposeOptions,a=e.onPurposeChange,u=e.dataUseOptions,l=e.onDataUseChange,c=e.legalBasisOptions,d=e.onLegalBasisChange,p=e.consentCategoryOptions,h=e.onConsentCategoryChange;return(0,f.jsx)(m,{isOpen:n,onClose:i,resetFilters:r,children:(0,f.jsx)(s.UQy,{children:(0,f.jsxs)(v,{children:[t?(0,f.jsx)(b,{options:o,onCheckboxChange:a,header:"TCF purposes",columns:1,numDefaultOptions:5}):null,(0,f.jsx)(b,{options:u,onCheckboxChange:l,header:"Data uses"}),t?(0,f.jsx)(b,{options:c,onCheckboxChange:d,header:"Legal basis"}):null,t?null:(0,f.jsx)(b,{options:p,onCheckboxChange:h,header:"Consent categories"})]})})})},T=t(97865),E=t(34090),F=t(43139),M=t(44047),R=function(e){var n=e.isOpen,t=e.onClose,i=e.fidesKey,r=(0,M.ho)(i),o=r.data,a=r.isLoading;return(0,f.jsxs)(s.u_l,{isOpen:n,onClose:t,size:"xxl",returnFocusOnClose:!1,isCentered:!0,children:[(0,f.jsx)(s.ZAr,{}),(0,f.jsxs)(s.hzk,{maxWidth:"800px",children:[(0,f.jsx)(s.xBx,{children:"Vendor"}),(0,f.jsx)(s.fef,{children:a?(0,f.jsx)(s.kCb,{width:"100%",height:"324px",alignItems:"center",justifyContent:"center",children:(0,f.jsx)(s.$jN,{})}):(0,f.jsx)(E.J9,{initialValues:o,enableReinitialize:!0,onSubmit:function(){},children:function(e){var n=e.values;return(0,f.jsxs)(E.l0,{children:[(0,f.jsx)(s.xuv,{mb:6,children:(0,f.jsx)(F.j0,{label:"Vendor Name",variant:"stacked",name:"name",disabled:!0})}),Object.entries((null===n||void 0===n?void 0:n.purposes)||{}).length>0?(0,f.jsx)(F.__,{children:" Purposes "}):null,(0,f.jsx)(E.F2,{name:"purposes",render:function(){return(0,f.jsx)(s.UQy,{allowMultiple:!0,children:Object.entries(n.purposes).map((function(e,n){var t=(0,T.Z)(e,1)[0];return(0,f.jsx)(s.Qdk,{children:function(e){var n=e.isExpanded;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(s.KFZ,{backgroundColor:n?"gray.50":"unset",children:[(0,f.jsx)(s.xuv,{flex:"1",textAlign:"left",children:t}),(0,f.jsx)(s.XEm,{})]}),(0,f.jsxs)(s.Hk3,{backgroundColor:"gray.50",children:[(0,f.jsx)(s.xuv,{my:4,children:(0,f.jsx)(F.VT,{label:"Data Uses",isMulti:!0,disableMenu:!0,isDisabled:!0,options:[],variant:"stacked",name:"purposes['".concat(t,"'].data_uses")})}),(0,f.jsx)(F.VT,{label:"Legal Basis",isMulti:!0,disableMenu:!0,isDisabled:!0,options:[],variant:"stacked",name:"purposes['".concat(t,"'].legal_bases")})]})]})}},n)}))})}}),(0,f.jsx)(s.xuv,{my:4,children:(0,f.jsx)(F.VT,{label:"Features",isMulti:!0,options:[],disableMenu:!0,isDisabled:!0,variant:"stacked",name:"features"})}),(0,f.jsx)(F.VT,{label:"Data Categories",isMulti:!0,options:[],disableMenu:!0,isDisabled:!0,variant:"stacked",name:"data_categories"})]})}})}),(0,f.jsxs)(s.mzw,{children:[(0,f.jsxs)(s.zxk,{variant:"outline",size:"sm",onClick:t,children:["Close"," "]}),(0,f.jsx)(s.LZC,{})]})]})]})};function Z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,s)}return t}function V(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Z(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var U=(0,a.Cl)(),L={items:[],total:0,page:1,size:25,pages:1},A=function(){var e=(0,l.hz)(),n=e.tcf,t=e.dictionaryService,r=(0,M.x8)().isLoading,o=function(){var e=(0,s.qY0)();return{isOpen:e.isOpen,onOpen:e.onOpen,onClose:e.onClose}}(),p=o.isOpen,h=o.onOpen,x=o.onClose,g=(0,d.useRouter)(),C=(0,i.useState)(),b=C[0],v=C[1],m=function(){var e=(0,s.qY0)(),n=e.isOpen,t=e.onClose,r=e.onOpen;(0,_.fd)();var o=(0,P.C)(_.U3);(0,w.a4)();var a=(0,P.C)(w.ZS),u=(0,i.useState)([]),l=u[0],c=u[1],d=(0,i.useState)([]),p=d[0],f=d[1],h=(0,i.useState)([{displayText:"Consent",value:"Consent",isChecked:!1},{displayText:"Legitimate Interest",value:"Legitimate interests",isChecked:!1}]),x=h[0],g=h[1],j=(0,i.useState)([{displayText:"Advertising",value:"advertising",isChecked:!1},{displayText:"Analytics",value:"analytics",isChecked:!1},{displayText:"Functional",value:"functional",isChecked:!1},{displayText:"Essential",value:"essential",isChecked:!1}]),C=j[0],b=j[1];(0,i.useEffect)((function(){0===p.length&&f(o.map((function(e){return{value:e.fides_key,displayText:e.name||e.fides_key,isChecked:!1}})))}),[o,p,f]),(0,i.useEffect)((function(){0===l.length&&c([].concat((0,k.Z)(Object.entries(a.purposes).map((function(e){return{value:"normal.".concat(e[0]),displayText:e[1].name,isChecked:!1}}))),(0,k.Z)(Object.entries(a.special_purposes).map((function(e){return{value:"special.".concat(e[0]),displayText:e[1].name,isChecked:!1}})))))}),[a,l,f]);var v=function(e,n,t,s){s(t.map((function(t){return t.value===e?D(D({},t),{},{isChecked:n}):t})))};return{isOpen:n,onClose:t,onOpen:r,resetFilters:function(){f((function(e){return e.map((function(e){return D(D({},e),{},{isChecked:!1})}))})),g((function(e){return e.map((function(e){return D(D({},e),{},{isChecked:!1})}))})),c((function(e){return e.map((function(e){return D(D({},e),{},{isChecked:!1})}))})),b((function(e){return e.map((function(e){return D(D({},e),{},{isChecked:!1})}))}))},purposeOptions:l,onPurposeChange:function(e,n){v(e,n,l,c)},dataUseOptions:p,onDataUseChange:function(e,n){v(e,n,p,f)},legalBasisOptions:x,onLegalBasisChange:function(e,n){v(e,n,x,g)},consentCategoryOptions:C,onConsentCategoryChange:function(e,n){v(e,n,C,b)}}}(),z=m.isOpen,T=m.onOpen,E=m.onClose,F=m.resetFilters,Z=m.purposeOptions,A=m.onPurposeChange,B=m.dataUseOptions,I=m.onDataUseChange,N=m.legalBasisOptions,H=m.onLegalBasisChange,X=m.consentCategoryOptions,q=m.onConsentCategoryChange,G=(0,i.useMemo)((function(){return j(B,"data_uses")}),[B]),Q=(0,i.useMemo)((function(){return j(N,"legal_bases")}),[N]),K=(0,i.useMemo)((function(){var e=Z.filter((function(e){return e.value.includes("normal")})).map((function(e){return V(V({},e),{},{value:e.value.split(".")[1]})}));return j(e,"purposes")}),[Z]),W=(0,i.useMemo)((function(){var e=Z.filter((function(e){return e.value.includes("special")})).map((function(e){return V(V({},e),{},{value:e.value.split(".")[1]})}));return j(e,"special_purposes")}),[Z]),J=(0,i.useMemo)((function(){return j(X,"consent_category")}),[X]),Y=(0,c.oi)(),$=Y.PAGE_SIZES,ee=Y.pageSize,ne=Y.setPageSize,te=Y.onPreviousPageClick,se=Y.isPreviousPageDisabled,ie=Y.onNextPageClick,re=Y.isNextPageDisabled,oe=Y.startRange,ae=Y.endRange,ue=Y.pageIndex,le=Y.setTotalPages,ce=Y.resetPageIndexToDefault,de=(0,i.useState)(),pe=de[0],fe=de[1],he=(0,M.de)({pageIndex:ue,pageSize:ee,dataUses:G,search:pe,legalBasis:Q,purposes:K,specialPurposes:W,consentCategories:J}),xe=he.isFetching,ge=he.isLoading,je=he.data,Ce=(0,i.useMemo)((function(){return je||L}),[je]),be=Ce.items,ve=Ce.total,me=Ce.pages;(0,i.useEffect)((function(){le(me)}),[me,le]);var Oe=(0,i.useMemo)((function(){return[U.accessor((function(e){return e.name}),{id:"name",cell:function(e){return(0,f.jsx)(c.G3,{value:e.getValue()})},header:function(e){return(0,f.jsx)(c.Rr,V({value:"Vendor"},e))}}),U.accessor((function(e){return e.data_uses}),{id:"tcf_purpose",cell:function(e){return(0,f.jsx)(c.A4,{suffix:"purposes",value:e.getValue()})},header:function(e){return(0,f.jsx)(c.Rr,V({value:"TCF purpose"},e))}}),U.accessor((function(e){return e.data_uses}),{id:"data_uses",cell:function(e){return(0,f.jsx)(c.A4,{suffix:"data uses",value:e.getValue()})},header:function(e){return(0,f.jsx)(c.Rr,V({value:"Data use"},e))}}),U.accessor((function(e){return e.legal_bases}),{id:"legal_bases",cell:function(e){return(0,f.jsx)(c.A4,{suffix:"bases",value:e.getValue()})},header:function(e){return(0,f.jsx)(c.Rr,V({value:"Legal basis"},e))}}),U.accessor((function(e){return e.consent_categories}),{id:"consent_categories",cell:function(e){return(0,f.jsx)(c.A4,{suffix:"Categories",value:e.getValue()})},header:function(e){return(0,f.jsx)(c.Rr,V({value:"Categories"},e))}}),U.accessor((function(e){return e.cookies}),{id:"cookies",cell:function(e){return(0,f.jsx)(c.A4,{suffix:"Cookies",value:e.getValue()})},header:function(e){return(0,f.jsx)(c.Rr,V({value:"Cookies"},e))}})]}),[]),ye=(0,u.b7)({columns:Oe,data:be,state:{columnVisibility:{tcf_purpose:n,data_uses:n,legal_bases:n,consent_categories:!n,cookies:!n}},getCoreRowModel:(0,a.sC)(),columnResizeMode:"onChange",enableColumnResizing:!0});return ge||r?(0,f.jsx)(c.I4,{rowHeight:36,numRows:15}):(0,f.jsxs)(s.kCb,{flex:1,direction:"column",overflow:"auto",children:[p&&b?(0,f.jsx)(R,{isOpen:p,fidesKey:b,onClose:x}):null,(0,f.jsxs)(c.Q$,{children:[(0,f.jsx)(c.HO,{globalFilter:pe,setGlobalFilter:function(e){ce(),fe(e)},placeholder:"Search"}),(0,f.jsx)(S,{isOpen:z,isTcfEnabled:n,onClose:E,resetFilters:F,purposeOptions:Z,onPurposeChange:A,dataUseOptions:B,onDataUseChange:I,legalBasisOptions:N,onLegalBasisChange:H,consentCategoryOptions:X,onConsentCategoryChange:q}),(0,f.jsxs)(s.Ugi,{alignItems:"center",spacing:4,children:[(0,f.jsx)(y.Z,{buttonLabel:"Add vendors",buttonVariant:"outline",onButtonClick:t?function(){g.push(O.Gg)}:void 0}),(0,f.jsx)(s.zxk,{onClick:T,"data-testid":"filter-multiple-systems-btn",size:"xs",variant:"outline",children:"Filter"})]})]}),(0,f.jsx)(c.ZK,{tableInstance:ye,onRowClick:function(e){v(e.fides_key),h()}}),(0,f.jsx)(c.s8,{totalRows:ve,pageSizes:$,setPageSize:ne,onPreviousPageClick:te,isPreviousPageDisabled:se||xe,onNextPageClick:ie,isNextPageDisabled:re||xe,startRange:oe,endRange:ae})]})},B=function(e){var n=e.title,t=e.description;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.xuv,{mb:4,children:(0,f.jsx)(s.X6q,{fontSize:"2xl",fontWeight:"semibold",mb:2,"data-testid":"header",children:n})}),(0,f.jsx)(s.kCb,{children:(0,f.jsx)(s.xvT,{fontSize:"sm",mb:8,width:{base:"100%",lg:"50%"},children:t})})]})},I=function(){return(0,f.jsxs)(r.Z,{title:"Configure consent",children:[(0,f.jsx)(B,{title:"Manage your vendors",description:"Use the table below to manage your vendors. Modify the legal basis for a vendor if permitted and view and group your views by applying different filters"}),(0,f.jsx)(A,{})]})}},54727:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/consent/configure",function(){return t(56566)}])}},function(e){e.O(0,[2160,2142,338,3139,5162,589,6523,9774,2888,179],(function(){return n=54727,e(e.s=n);var n}));var n=e.O();_N_E=n}]);