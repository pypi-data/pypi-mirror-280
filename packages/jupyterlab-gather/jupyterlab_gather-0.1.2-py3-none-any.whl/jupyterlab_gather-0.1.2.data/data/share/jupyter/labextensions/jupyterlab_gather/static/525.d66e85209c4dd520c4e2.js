"use strict";(self.webpackChunkjupyterlab_gather=self.webpackChunkjupyterlab_gather||[]).push([[525],{1525:(e,t,r)=>{r.r(t),r.d(t,{DeviceType:()=>l.bq,DomainCategory:()=>l.TN,EventBus:()=>l.l7,HLSPlaylistType:()=>l.ae,HMSAudioPluginType:()=>l.QX,HMSLogLevel:()=>l.JZ,HMSMessageType:()=>l.WZ,HMSNotificationSeverity:()=>l.t$,HMSNotificationTypes:()=>l.fP,HMSPlaylistType:()=>l.hw,HMSPluginUnsupportedTypes:()=>l.sn,HMSReactiveStore:()=>l.JC,HMSRecordingState:()=>l.Jl,HMSRoomProvider:()=>g,HMSRoomState:()=>l.zb,HMSStats:()=>l.W9,HMSVideoPluginCanvasContextType:()=>l.iu,HMSVideoPluginType:()=>l.Nq,createDefaultStatsStore:()=>l.km,createDefaultStoreState:()=>l.qK,getPeersWithTiles:()=>Pe,parsedUserAgent:()=>l.IP,selectAppData:()=>l.oz,selectAppDataByPath:()=>l.qr,selectAudioPlaylist:()=>l.BR,selectAudioPlaylistTrackByPeerID:()=>l.a9,selectAudioTrackByID:()=>l.g$,selectAudioTrackByPeerID:()=>l.uW,selectAudioTrackVolume:()=>l._x,selectAudioVolumeByPeerID:()=>l.To,selectAuxiliaryAudioByPeerID:()=>l.lF,selectAuxiliaryTracksByPeerID:()=>l.dX,selectAvailableRoleNames:()=>l.yu,selectBroadcastMessages:()=>l.mI,selectBroadcastMessagesUnreadCount:()=>l.aB,selectCameraStreamByPeerID:()=>l.Kd,selectConnectionQualities:()=>l.cE,selectConnectionQualityByPeerID:()=>l.iV,selectDegradedTracks:()=>l.P8,selectDevices:()=>l.ox,selectDidIJoinWithin:()=>l.Gp,selectDominantSpeaker:()=>l._j,selectEffectsKey:()=>l.M5,selectErrors:()=>l.Ot,selectFullAppData:()=>l.RB,selectHLSState:()=>l.TI,selectHMSBroadcastMessages:()=>l.UG,selectHMSMessages:()=>l.NT,selectHMSMessagesCount:()=>l.wM,selectHMSStats:()=>l.Z5,selectHandRaisedPeers:()=>l.DX,selectHasPeerHandRaised:()=>l.Qe,selectIsAllowedToPreviewMedia:()=>l.s6,selectIsAllowedToPublish:()=>l.VO,selectIsAllowedToSubscribe:()=>l.EW,selectIsAudioLocallyMuted:()=>l.Ic,selectIsConnectedToRoom:()=>l.a3,selectIsEffectsEnabled:()=>l.yF,selectIsInPreview:()=>l.Ob,selectIsLargeRoom:()=>l.nm,selectIsLocalAudioEnabled:()=>l.VP,selectIsLocalAudioPluginPresent:()=>l.Qx,selectIsLocalScreenShared:()=>l.L1,selectIsLocalVideoDisplayEnabled:()=>l.yG,selectIsLocalVideoEnabled:()=>l.wB,selectIsLocalVideoPluginPresent:()=>l.JP,selectIsLocallyMutedByPeerID:()=>l.WD,selectIsPeerAudioEnabled:()=>l.Kr,selectIsPeerVideoEnabled:()=>l.Ns,selectIsRoleAllowedToPublish:()=>l.ly,selectIsScreenShareLocallyMutedByPeerID:()=>l.X_,selectIsSomeoneScreenSharing:()=>l.rZ,selectLocalAudioTrackID:()=>l.ui,selectLocalMediaSettings:()=>l.pA,selectLocalPeer:()=>l.s3,selectLocalPeerID:()=>l.Ze,selectLocalPeerName:()=>l.Di,selectLocalPeerRole:()=>l.Yl,selectLocalPeerRoleName:()=>l.ow,selectLocalTrackIDs:()=>l.Pe,selectLocalVideoTrackID:()=>l.R7,selectMessageByMessageID:()=>l.DN,selectMessageIDsInOrder:()=>l.VR,selectMessagesByPeerID:()=>l.do,selectMessagesByRole:()=>l.CO,selectMessagesMap:()=>l.nT,selectMessagesUnreadCountByPeerID:()=>l.BO,selectMessagesUnreadCountByRole:()=>l.i8,selectPeerAudioByID:()=>l.j7,selectPeerByCondition:()=>l.nZ,selectPeerByID:()=>l.BI,selectPeerCount:()=>l.de,selectPeerMetadata:()=>l.SO,selectPeerName:()=>l.cY,selectPeerNameByID:()=>l.a$,selectPeerScreenSharing:()=>l.dr,selectPeerSharingAudio:()=>l.p$,selectPeerSharingAudioPlaylist:()=>l.$p,selectPeerSharingVideoPlaylist:()=>l.ao,selectPeers:()=>l.ws,selectPeersByCondition:()=>l.cb,selectPeersByRole:()=>l.Tw,selectPeersByRoles:()=>l.yW,selectPeersMap:()=>l._Q,selectPeersScreenSharing:()=>l.k6,selectPeersWithAudioStatus:()=>l.QS,selectPermissions:()=>l.b,selectPollByID:()=>l.am,selectPolls:()=>l.B4,selectPollsMap:()=>l.JQ,selectPreviewRole:()=>l.X4,selectPreviewRoleName:()=>l.cT,selectRTMPState:()=>l.zS,selectRecentError:()=>l.EB,selectRecordingState:()=>l.vz,selectRemotePeers:()=>l.Oq,selectRoleByRoleName:()=>l.wi,selectRoleChangeRequest:()=>l.cO,selectRolesMap:()=>l.ym,selectRoom:()=>l.Gz,selectRoomID:()=>l.vm,selectRoomStartTime:()=>l.bW,selectRoomStarted:()=>l.PS,selectRoomState:()=>l.VH,selectScreenAudioTrackByID:()=>l.UT,selectScreenShareAudioByPeerID:()=>l.mx,selectScreenShareByPeerID:()=>l.sj,selectScreenSharesByPeerId:()=>l.Fu,selectScreenVideoTrackByID:()=>l.j6,selectScreenshareAudioVolumeByPeerID:()=>l.Qp,selectSessionId:()=>l.eJ,selectSessionMetadata:()=>l.My,selectSessionStore:()=>l.q8,selectSimulcastLayerByTrack:()=>l.Xj,selectSpeakers:()=>l.ZD,selectTemplateAppData:()=>l.mX,selectTrackAudioByID:()=>l.yz,selectTrackByID:()=>l._8,selectTracksMap:()=>l.FM,selectUnreadHMSBroadcastMessagesCount:()=>l.K6,selectUnreadHMSMessagesCount:()=>l.vX,selectVideoPlaylist:()=>l.Gn,selectVideoPlaylistAudioTrackByPeerID:()=>l.DU,selectVideoPlaylistVideoTrackByPeerID:()=>l.Ki,selectVideoTrackByID:()=>l.kU,selectVideoTrackByPeerID:()=>l.Xi,selectWhiteboard:()=>l.wQ,selectWhiteboards:()=>l.pv,simulcastMapping:()=>l.yi,throwErrorHandler:()=>E,useAVToggle:()=>O,useAudioLevelStyles:()=>ke,useAutoplayError:()=>De,useAwayNotifications:()=>We,useCustomEvent:()=>Te,useDevices:()=>Me,useEmbedShare:()=>He,useHMSActions:()=>w,useHMSNotifications:()=>S,useHMSStatsStore:()=>y,useHMSStore:()=>p,useHMSVanillaNotifications:()=>b,useHMSVanillaStore:()=>m,usePDFShare:()=>Ae,usePaginatedParticipants:()=>Be,useParticipantList:()=>Ie,useParticipants:()=>Ce,usePreviewJoin:()=>I,useRecordingStreaming:()=>Oe,useRemoteAVToggle:()=>H,useScreenShare:()=>T,useVideo:()=>D,useVideoList:()=>Ee,useWhiteboard:()=>Le});var n=r(3345),i=r.n(n);const o="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?n.useEffect:n.useLayoutEffect;function s(e){const t="function"==typeof e?function(e){let t;const r=new Set,n=(e,n)=>{const i="function"==typeof e?e(t):e;if(i!==t){const e=t;t=n?i:Object.assign({},t,i),r.forEach((r=>r(t,e)))}},i=()=>t,o={setState:n,getState:i,subscribe:(e,n,o)=>n||o?((e,n=i,o=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let s=n(t);function a(){const r=n(t);if(!o(s,r)){const t=s;e(s=r,t)}}return r.add(a),()=>r.delete(a)})(e,n,o):(r.add(e),()=>r.delete(e)),destroy:()=>r.clear()};return t=e(n,i,o),o}(e):e,r=(e=t.getState,r=Object.is)=>{const[,i]=(0,n.useReducer)((e=>e+1),0),s=t.getState(),a=(0,n.useRef)(s),c=(0,n.useRef)(e),l=(0,n.useRef)(r),u=(0,n.useRef)(!1),d=(0,n.useRef)();let f;void 0===d.current&&(d.current=e(s));let h=!1;(a.current!==s||c.current!==e||l.current!==r||u.current)&&(f=e(s),h=!r(d.current,f)),o((()=>{h&&(d.current=f),a.current=s,c.current=e,l.current=r,u.current=!1}));const v=(0,n.useRef)(s);o((()=>{const e=()=>{try{const e=t.getState(),r=c.current(e);l.current(d.current,r)||(a.current=e,d.current=r,i())}catch(e){u.current=!0,i()}},r=t.subscribe(e);return t.getState()!==v.current&&e(),r}),[]);const g=h?f:d.current;return(0,n.useDebugValue)(g),g};return Object.assign(r,t),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[r,t];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},r}var a,c,l=r(6469);function u(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(let n=0;n<r.length;n++)if(!Object.prototype.hasOwnProperty.call(t,r[n])||!Object.is(e[r[n]],t[r[n]]))return!1;return!0}(c=a||(a={}))[c.VERBOSE=0]="VERBOSE",c[c.DEBUG=1]="DEBUG",c[c.INFO=2]="INFO",c[c.WARN=3]="WARN",c[c.ERROR=4]="ERROR",c[c.NONE=5]="NONE";class d{static v(e,...t){this.log(a.VERBOSE,e,...t)}static d(e,...t){this.log(a.DEBUG,e,...t)}static i(e,...t){this.log(a.INFO,e,...t)}static w(e,...t){this.log(a.WARN,e,...t)}static e(e,...t){this.log(a.ERROR,e,...t)}static log(e,t,...r){if(!(this.level.valueOf()>e.valueOf()))switch(e){case a.VERBOSE:console.log("HMSui-components: ",t,...r);break;case a.DEBUG:console.debug("HMSui-components: ",t,...r);break;case a.INFO:console.info("HMSui-components: ",t,...r);break;case a.WARN:console.warn("HMSui-components: ",t,...r);break;case a.ERROR:console.error("HMSui-components: ",t,...r)}}}d.level=a.VERBOSE;const f="It seems like you forgot to add your component within a top level HMSRoomProvider, please refer to 100ms react docs(https://www.100ms.live/docs/javascript/v2/how-to-guides/install-the-sdk/integration#react-hooks) to check on the required steps for using this hook. If the provider is present\n  at the top level, check the yarn.lock/package-lock.json, if there are multiple versions of @100mslive/react-sdk. Please ensure the versions of @100mslive/react-sdk and @100mslive/roomkit-react are the same versions from the release notes(https://www.100ms.live/docs/javascript/v2/changelog/release-notes) that you are trying to update to.",h="undefined"!=typeof window,v=(0,n.createContext)(null),g=({children:e,actions:t,store:r,notifications:o,stats:a,isHMSStatsOn:c=!1,leaveOnUnload:u=!0})=>{const d=(0,n.useMemo)((()=>{let e;const n=()=>{throw new Error("modifying store is not allowed")};if(t&&r)e={actions:t,store:s(Object.assign(Object.assign({},r),{setState:n,destroy:n}))},o&&(e.notifications=o),a&&(e.statsStore=s({getState:a.getState,subscribe:a.subscribe,setState:n,destroy:n}));else{const t=new l.JC;if(e={actions:t.getActions(),store:s(Object.assign(Object.assign({},t.getStore()),{setState:n,destroy:n})),notifications:t.getNotifications()},c){const r=t.getStats();e.statsStore=s({getState:r.getState,subscribe:r.subscribe,setState:n,destroy:n})}}return e.actions.setFrameworkInfo({type:"react-web",version:i().version,sdkVersion:"0.10.3"}),e}),[t,r,o,a,c]);return(0,n.useEffect)((()=>{if(h&&u){const e=()=>d.actions.leave();return window.addEventListener("unload",e),()=>{window.removeEventListener("unload",e)}}return()=>{}}),[u,d]),i().createElement(v.Provider,{value:d},e)},p=function(e){return(t,r=u)=>{t||d.w("fetching full store without passing any selector may have a heavy performance impact on your website.");const i=(0,n.useContext)(e);if(!i)throw new Error(f);return(0,i.store)(t,r)}}(v),y=function(e){return(t,r=u)=>{t||d.w("fetching full store without passing any selector may have a heavy performance impact on your website.");const i=(0,n.useContext)(e);if(!i)throw new Error(f);const o=i.statsStore;return null==o?void 0:o(t,r)}}(v),m=()=>{const e=(0,n.useContext)(v);if(!e)throw new Error(f);return e.store},b=()=>{const e=(0,n.useContext)(v);if(!e)throw new Error(f);return e.notifications},w=()=>{const e=(0,n.useContext)(v);if(!e)throw new Error(f);return e.actions},S=e=>{const t=(0,n.useContext)(v),[r,i]=(0,n.useState)(null);if(!t)throw new Error(f);return(0,n.useEffect)((()=>{if(t.notifications)return t.notifications.onNotification((e=>{i(e)}),e)}),[t.notifications,e]),r};function P(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;const R=(e,t)=>d.e("react-sdk",t,e),E=e=>{throw e};function k(e){const t=(0,n.useRef)();return(0,n.useEffect)((()=>{t.current=e})),t.current}const M=["blink"].some((e=>{var t,r;return(null===(r=null===(t=l.IP.getEngine())||void 0===t?void 0:t.name)||void 0===r?void 0:r.toLowerCase())===e})),I=({name:e="",token:t,metadata:r,handleError:i=R,initEndpoint:o,initialSettings:s,captureNetworkQualityInPreview:a,asRole:c,autoManageVideo:u,autoManageWakeLock:d})=>{const f=w(),h=p(l.VH),v=p(l.a3)||!1,g=h===l.zb.Preview,y=(0,n.useMemo)((()=>({userName:e,authToken:t,metaData:r,rememberDeviceSelection:!0,settings:s,initEndpoint:o,asRole:c,captureNetworkQualityInPreview:a,autoManageVideo:u,autoManageWakeLock:d})),[e,t,r,o,s,a,c,u,d]),m=(0,n.useCallback)((()=>P(void 0,void 0,void 0,(function*(){if(t)try{(v||h!==l.zb.Disconnected)&&(yield f.leave().catch((()=>{}))),yield f.preview(y)}catch(e){i(e,"preview")}}))),[t,v,h,f,y,i]);return{enableJoin:g,join:(0,n.useCallback)((()=>P(void 0,void 0,void 0,(function*(){if(t)try{yield f.join(y)}catch(e){i(e,"join")}}))),[f,y,i,t]),isConnected:v,preview:m}},O=(e=R)=>{const t=p(l.VP),r=p(l.wB),i=p(l.Ob),o=p(i?l.s6:l.VO),s=w(),a=(0,n.useCallback)((()=>P(void 0,void 0,void 0,(function*(){try{yield s.setLocalAudioEnabled(!t)}catch(t){e(t,"toggleAudio")}}))),[s,t,e]),c=(0,n.useCallback)((()=>P(void 0,void 0,void 0,(function*(){try{yield s.setLocalVideoEnabled(!r)}catch(t){e(t,"toggleVideo")}}))),[s,r,e]);return{isLocalAudioEnabled:t,isLocalVideoEnabled:r,toggleAudio:(null==o?void 0:o.audio)?a:void 0,toggleVideo:(null==o?void 0:o.video)?c:void 0}},D=({trackId:e,attach:t})=>{const r=w(),i=(0,n.useRef)(null),o=p((0,l.kU)(e)),s=(0,n.useRef)(),a=(0,n.useCallback)((e=>{e&&(i.current=e)}),[]);return(0,n.useEffect)((()=>{s.current?(null==o?void 0:o.id)&&s.current!==(null==o?void 0:o.id)&&P(void 0,void 0,void 0,(function*(){if(i.current)try{d.d("detaching because different track is passed"),yield r.detachVideo(s.current,i.current)}catch(e){d.w("detach video error for track",s.current,e)}s.current=null==o?void 0:o.id})):s.current=null==o?void 0:o.id}),[null==o?void 0:o.id,r]),(0,n.useEffect)((()=>{P(void 0,void 0,void 0,(function*(){(null==o?void 0:o.id)&&i.current&&(!1!==t?yield r.attachVideo(o.id,i.current):yield r.detachVideo(o.id,i.current))}))}),[o,t,r]),(0,n.useEffect)((()=>()=>{P(void 0,void 0,void 0,(function*(){if(i.current&&o)try{yield r.detachVideo(o.id,i.current)}catch(e){d.w("detach video error for track",o.id,e)}}))}),[]),{videoRef:a}},T=(e=R)=>{var t,r;const i=w(),o=p(l.L1),s=p(l.dr),a=p((0,l.Fu)(null==s?void 0:s.id)),c=(0,n.useCallback)((t=>P(void 0,void 0,void 0,(function*(){try{yield i.setScreenShareEnabled(!o,t)}catch(t){e(t,"toggleScreenShare")}}))),[i,o,e]);return{amIScreenSharing:o,screenSharingPeerId:null==s?void 0:s.id,screenSharingPeerName:null==s?void 0:s.name,screenShareVideoTrackId:null===(t=null==a?void 0:a.video)||void 0===t?void 0:t.id,screenShareAudioTrackId:null===(r=null==a?void 0:a.audio)||void 0===r?void 0:r.id,toggleScreenShare:c}},C=(e,t,r)=>P(void 0,void 0,void 0,(function*(){if(t)try{yield e.setRemoteTrackEnabled(t.id,!t.enabled)}catch(e){r(e,"remoteToggle")}})),H=(e,t,r=R)=>{const i=w(),o=p((0,l.g$)(e)),s=p((0,l.kU)(t)),a=p((0,l._x)(null==o?void 0:o.id)),c=p(l.b),u=(null==s?void 0:s.enabled)?null==c?void 0:c.mute:null==c?void 0:c.unmute,d=(null==o?void 0:o.enabled)?null==c?void 0:c.mute:null==c?void 0:c.unmute,f=(0,n.useCallback)((()=>P(void 0,void 0,void 0,(function*(){yield C(i,o,r)}))),[i,o,r]),h=(0,n.useCallback)((()=>P(void 0,void 0,void 0,(function*(){yield C(i,s,r)}))),[i,r,s]),v=(0,n.useCallback)((e=>{o&&i.setVolume(e,o.id)}),[i,o]);return{isAudioEnabled:!!(null==o?void 0:o.enabled),isVideoEnabled:!!(null==s?void 0:s.enabled),volume:a,toggleAudio:o&&d?f:void 0,toggleVideo:"regular"===(null==s?void 0:s.source)&&u?h:void 0,setVolume:o?v:void 0}};var A=r(7628),N=function(e,t){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},N(e,t)};var B=function(){return B=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},B.apply(this,arguments)};var L="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{},W=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},F="object"==typeof L&&L&&L.Object===Object&&L,j="object"==typeof self&&self&&self.Object===Object&&self,V=F||j||Function("return this")(),x=V,q=/\s/,z=/^\s+/,U=V.Symbol,_=U,Q=Object.prototype,J=Q.hasOwnProperty,G=Q.toString,$=_?_.toStringTag:void 0,X=Object.prototype.toString,Z=function(e){var t=J.call(e,$),r=e[$];try{e[$]=void 0;var n=!0}catch(e){}var i=G.call(e);return n&&(t?e[$]=r:delete e[$]),i},K=U?U.toStringTag:void 0,Y=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":K&&K in Object(e)?Z(e):function(e){return X.call(e)}(e)},ee=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&q.test(e.charAt(t)););return t}(e)+1).replace(z,""):e},te=W,re=/^[-+]0x[0-9a-f]+$/i,ne=/^0b[01]+$/i,ie=/^0o[0-7]+$/i,oe=parseInt,se=W,ae=function(){return x.Date.now()},ce=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&"[object Symbol]"==Y(e)}(e))return NaN;if(te(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=te(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=ee(e);var r=ne.test(e);return r||ie.test(e)?oe(e.slice(2),r?2:8):re.test(e)?NaN:+e},le=Math.max,ue=Math.min,de=function(e,t,r){var n,i,o,s,a,c,l=0,u=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var r=n,o=i;return n=i=void 0,l=t,s=e.apply(o,r)}function v(e){var r=e-c;return void 0===c||r>=t||r<0||d&&e-l>=o}function g(){var e=ae();if(v(e))return p(e);a=setTimeout(g,function(e){var r=t-(e-c);return d?ue(r,o-(e-l)):r}(e))}function p(e){return a=void 0,f&&n?h(e):(n=i=void 0,s)}function y(){var e=ae(),r=v(e);if(n=arguments,i=this,c=e,r){if(void 0===a)return function(e){return l=e,a=setTimeout(g,t),u?h(e):s}(c);if(d)return clearTimeout(a),a=setTimeout(g,t),h(c)}return void 0===a&&(a=setTimeout(g,t)),s}return t=ce(t)||0,se(r)&&(u=!!r.leading,o=(d="maxWait"in r)?le(ce(r.maxWait)||0,t):o,f="trailing"in r?!!r.trailing:f),y.cancel=function(){void 0!==a&&clearTimeout(a),l=0,n=c=i=a=void 0},y.flush=function(){return void 0===a?s:p(ae())},y},fe=de,he=W,ve=function(e,t,r,n){switch(t){case"debounce":return de(e,r,n);case"throttle":return function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return he(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),fe(e,t,{leading:n,maxWait:t,trailing:i})}(e,r,n);default:return e}},ge=function(e){return"function"==typeof e},pe=function(){return"undefined"==typeof window},ye=function(e){return e instanceof Element||e instanceof HTMLDocument},me=function(e,t,r,n){return function(i){var o=i.width,s=i.height;t((function(t){return t.width===o&&t.height===s||t.width===o&&!n||t.height===s&&!r?t:(e&&ge(e)&&e(o,s),{width:o,height:s})}))}};!function(e){function t(t){var r=e.call(this,t)||this;r.cancelHandler=function(){r.resizeHandler&&r.resizeHandler.cancel&&(r.resizeHandler.cancel(),r.resizeHandler=null)},r.attachObserver=function(){var e=r.props,t=e.targetRef,n=e.observerOptions;if(!pe()){t&&t.current&&(r.targetRef.current=t.current);var i=r.getElement();i&&(r.observableElement&&r.observableElement===i||(r.observableElement=i,r.resizeObserver.observe(i,n)))}},r.getElement=function(){var e=r.props,t=e.querySelector,n=e.targetDomEl;if(pe())return null;if(t)return document.querySelector(t);if(n&&ye(n))return n;if(r.targetRef&&ye(r.targetRef.current))return r.targetRef.current;var i=(0,A.findDOMNode)(r);if(!i)return null;switch(r.getRenderType()){case"renderProp":case"childFunction":case"child":case"childArray":return i;default:return i.parentElement}},r.createResizeHandler=function(e){var t=r.props,n=t.handleWidth,i=void 0===n||n,o=t.handleHeight,s=void 0===o||o,a=t.onResize;if(i||s){var c=me(a,r.setState.bind(r),i,s);e.forEach((function(e){var t=e&&e.contentRect||{},n=t.width,i=t.height;!r.skipOnMount&&!pe()&&c({width:n,height:i}),r.skipOnMount=!1}))}},r.getRenderType=function(){var e=r.props,t=e.render,i=e.children;return ge(t)?"renderProp":ge(i)?"childFunction":(0,n.isValidElement)(i)?"child":Array.isArray(i)?"childArray":"parent"};var i=t.skipOnMount,o=t.refreshMode,s=t.refreshRate,a=void 0===s?1e3:s,c=t.refreshOptions;return r.state={width:void 0,height:void 0},r.skipOnMount=i,r.targetRef=(0,n.createRef)(),r.observableElement=null,pe()||(r.resizeHandler=ve(r.createResizeHandler,o,a,c),r.resizeObserver=new window.ResizeObserver(r.resizeHandler)),r}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}N(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(t,e),t.prototype.componentDidMount=function(){this.attachObserver()},t.prototype.componentDidUpdate=function(){this.attachObserver()},t.prototype.componentWillUnmount=function(){pe()||(this.observableElement=null,this.resizeObserver.disconnect(),this.cancelHandler())},t.prototype.render=function(){var e,t=this.props,r=t.render,i=t.children,o=t.nodeType,s=void 0===o?"div":o,a=this.state,c={width:a.width,height:a.height,targetRef:this.targetRef};switch(this.getRenderType()){case"renderProp":return r&&r(c);case"childFunction":return(e=i)(c);case"child":if((e=i).type&&"string"==typeof e.type){var l=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(c,["targetRef"]);return(0,n.cloneElement)(e,l)}return(0,n.cloneElement)(e,c);case"childArray":return(e=i).map((function(e){return!!e&&(0,n.cloneElement)(e,c)}));default:return n.createElement(s,null)}}}(n.PureComponent);var be=pe()?n.useEffect:n.useLayoutEffect;const we=e=>function(e){if(0===e.length)return null;const t={};let r=e[0],n=1;for(let i=0;i<e.length;i++){const o=e[i];null===t[o]?t[o]=1:t[o]++,t[o]>n&&(r=o,n=t[o])}return r}(e.filter((e=>{var t,r;return(null===(t=e.track)||void 0===t?void 0:t.width)&&(null===(r=e.track)||void 0===r?void 0:r.height)})).map((e=>{var t,r;return((null===(t=e.track)||void 0===t?void 0:t.width)||1)/((null===(r=e.track)||void 0===r?void 0:r.height)||1)}))),Se=(e,t,r,n,i)=>{if(e<0||t<0)throw new Error("Container must have a non-negative area");if(r<1||!Number.isInteger(r))throw new Error("Number of shapes to place must be a positive integer");const o=n&&i&&n/i;if(void 0!==o&&isNaN(o))throw new Error("Aspect ratio must be a number");let s={area:0,cols:0,rows:0,width:0,height:0};if(void 0!==o)for(let n=r;n>0;n+=-1){const i=Math.ceil(r/n);let a,c;e/(n*o)<=t/i?(a=e/n,c=a/o):(c=t/i,a=c*o);const l=a*c;l>s.area&&(s={area:l,width:a,height:c,rows:i,cols:n})}return s};const Pe=(e,t,r,n=!0)=>{if(!e||!t||!r)return[];const i=[];for(const o of e)if(void 0===o.videoTrack&&o.audioTrack&&t[o.audioTrack]?i.push({peer:o}):o.videoTrack&&t[o.videoTrack]?i.push({track:t[o.videoTrack],peer:o}):n||i.push({peer:o}),o.auxiliaryTracks.length>0&&o.auxiliaryTracks.forEach((e=>{const r=t[e];"video"===(null==r?void 0:r.type)&&"regular"===(null==r?void 0:r.source)&&i.push({track:r,peer:o})})),r(o)&&o.auxiliaryTracks.length>0){const e=o.auxiliaryTracks.find((e=>{const r=t[e];return"video"===(null==r?void 0:r.type)&&"screen"===(null==r?void 0:r.source)}));e&&i.push({track:t[e],peer:o})}return i},Re={width:1,height:1},Ee=({peers:e,maxTileCount:t,maxColCount:r,maxRowCount:i,includeScreenShareForPeer:o=(()=>!1),aspectRatio:s=Re,filterNonPublishingPeers:a=!0,offsetY:c=0})=>{const{width:u=0,height:d=0,ref:f}=function(e){void 0===e&&(e={});var t=e.skipOnMount,r=void 0!==t&&t,i=e.refreshMode,o=e.refreshRate,s=void 0===o?1e3:o,a=e.refreshOptions,c=e.handleWidth,l=void 0===c||c,u=e.handleHeight,d=void 0===u||u,f=e.targetRef,h=e.observerOptions,v=e.onResize,g=(0,n.useRef)(r),p=(0,n.useRef)(null),y=null!=f?f:p,m=(0,n.useRef)(),b=(0,n.useState)({width:void 0,height:void 0}),w=b[0],S=b[1];return be((function(){if(!pe()){var e=me(v,S,l,d);m.current=ve((function(t){(l||d)&&t.forEach((function(t){var r=t&&t.contentRect||{},n=r.width,i=r.height;!g.current&&!pe()&&e({width:n,height:i}),g.current=!1}))}),i,s,a);var t=new window.ResizeObserver(m.current);return y.current&&t.observe(y.current,h),function(){t.disconnect();var e=m.current;e&&e.cancel&&e.cancel()}}}),[i,s,a,l,d,v,h,y.current]),B({ref:y},w)}(),h=m().getState(l.FM),v=Pe(e,h,o,a),g=(0,n.useMemo)((()=>s||{width:we(v)||1,height:1}),[s,v]),p=v.length,{tilesInFirstPage:y,defaultWidth:b,defaultHeight:w,lastPageWidth:S,lastPageHeight:P,isLastPageDifferentFromFirstPage:R}=(0,n.useMemo)((()=>function({count:e,parentWidth:t,parentHeight:r,maxTileCount:n,maxRowCount:i,maxColCount:o,aspectRatio:s}){let a=0,c=0,l=0,u=0,d=!1,f=0;if(0===e)return{tilesInFirstPage:f,defaultWidth:a,defaultHeight:c,lastPageWidth:l,lastPageHeight:u,isLastPageDifferentFromFirstPage:d};if(n)({tilesInFirstPage:f,defaultWidth:a,defaultHeight:c,lastPageWidth:l,lastPageHeight:u,isLastPageDifferentFromFirstPage:d}=(({parentWidth:e,parentHeight:t,count:r,maxCount:n,aspectRatio:i})=>{let o=0,s=0,a=0,c=0,l=!1,u=0,d=0;const{width:f,height:h}=Se(e,t,Math.min(r,n),i.width,i.height);if(o=f,s=h,u=Math.min(r,n),d=r%n,l=d>0&&r>n,l){const{width:r,height:n}=Se(e,t,d,i.width,i.height);a=r,c=n}return{tilesInFirstPage:u,defaultWidth:o,defaultHeight:s,lastPageWidth:a,lastPageHeight:c,isLastPageDifferentFromFirstPage:l}})({parentWidth:t,parentHeight:r,count:e,maxCount:n,aspectRatio:s}));else if(i)({tilesInFirstPage:f,defaultWidth:a,defaultHeight:c,lastPageWidth:l,lastPageHeight:u,isLastPageDifferentFromFirstPage:d}=(({parentWidth:e,parentHeight:t,count:r,maxCount:n,aspectRatio:i})=>{let o=0,s=0,a=0,c=0,l=!1,u=0,d=0;const f=Math.min(Math.ceil(Math.sqrt(r*(i.width/i.height)/(e/t))),n),h=t/f,v=h*(i.width/i.height),g=Math.floor(e/v);if(o=v,s=h,u=Math.min(r,f*g),d=r%(f*g),l=d>0&&r>f*g,l){const r=t/Math.min(Math.ceil(Math.sqrt(d*(i.width/i.height)/(e/t))),n);c=r,a=r*(i.width/i.height)}return{tilesInFirstPage:u,defaultWidth:o,defaultHeight:s,lastPageWidth:a,lastPageHeight:c,isLastPageDifferentFromFirstPage:l}})({parentWidth:t,parentHeight:r,count:e,maxCount:i,aspectRatio:s}));else if(o)({tilesInFirstPage:f,defaultWidth:a,defaultHeight:c,lastPageWidth:l,lastPageHeight:u,isLastPageDifferentFromFirstPage:d}=(({parentWidth:e,parentHeight:t,count:r,maxCount:n,aspectRatio:i})=>{let o=0,s=0,a=0,c=0,l=!1,u=0,d=0;const f=Math.min(Math.ceil(Math.sqrt(r*(e/t)/(i.width/i.height))),n);let h=e/f,v=h/(i.width/i.height);v>t&&(v=t,h=v/(i.height/i.width));const g=Math.floor(t/v);if(s=v,o=h,u=Math.min(r,g*f),d=r%(g*f),l=d>0&&r>g*f,l){let r=e/Math.min(Math.ceil(Math.sqrt(d*(e/t)/(i.width/i.height))),n),o=r/(i.width/i.height);o>t&&(o=t,r=o/(i.height/i.width)),c=o,a=r}return{tilesInFirstPage:u,defaultWidth:o,defaultHeight:s,lastPageWidth:a,lastPageHeight:c,isLastPageDifferentFromFirstPage:l}})({parentWidth:t,parentHeight:r,count:e,maxCount:o,aspectRatio:s}));else{const{width:n,height:i}=Se(t,r,e,s.width,s.height);a=n,c=i,f=e}return{tilesInFirstPage:f,defaultWidth:a,defaultHeight:c,lastPageWidth:l,lastPageHeight:u,isLastPageDifferentFromFirstPage:d}}({count:p,parentWidth:Math.floor(u),parentHeight:Math.floor(d)-Math.min(d,c),maxTileCount:t,maxRowCount:i,maxColCount:r,aspectRatio:g})),[p,u,d,t,i,r,g,c]);return{pagesWithTiles:(0,n.useMemo)((()=>(({elements:e,tilesInFirstPage:t,onlyOnePage:r,isLastPageDifferentFromFirstPage:n,defaultWidth:i,defaultHeight:o,lastPageWidth:s,lastPageHeight:a})=>{const c=((e,t,r)=>e.reduce(((e,n,i)=>{const o=Math.floor(i/t);return o>0&&r||(e[o]||(e[o]=[]),e[o].push(n)),e}),[]))(e,t,r);return c.map(((e,t)=>e.map((e=>{const r=t===c.length-1,l=n&&r?s:i,u=n&&r?a:o;return Object.assign(Object.assign({},e),{height:u,width:l})}))))})({elements:v,tilesInFirstPage:y,onlyOnePage:!1,isLastPageDifferentFromFirstPage:R,defaultWidth:b,defaultHeight:w,lastPageWidth:S,lastPageHeight:P})),[v,y,R,b,w,S,P]),ref:f}};function ke({trackId:e,getStyle:t,ref:r}){const i=m();(0,n.useEffect)((()=>i.subscribe((e=>{if(!r.current)return;const n=t(e);for(const e in n)r.current.style[e]=n[e]}),(0,l.yz)(e))),[t,r,i,e])}const Me=(e=R)=>{const t=w(),r=p(l.ox),i=p(l.pA),o=p(l.Ob),s=p(o?l.s6:l.VO),a={[l.bq.audioOutput]:i.audioOutputDeviceId},c={[l.bq.audioOutput]:r.audioOutput};return s.video&&(c[l.bq.videoInput]=r.videoInput,a[l.bq.videoInput]=i.videoInputDeviceId),s.audio&&(c[l.bq.audioInput]=r.audioInput,a[l.bq.audioInput]=i.audioInputDeviceId),{allDevices:c,selectedDeviceIDs:a,updateDevice:(0,n.useCallback)((({deviceType:r,deviceId:n})=>P(void 0,void 0,void 0,(function*(){try{switch(r){case l.bq.audioInput:yield t.setAudioSettings({deviceId:n});break;case l.bq.videoInput:yield t.setVideoSettings({deviceId:n});break;case l.bq.audioOutput:yield t.setAudioOutputDevice(n)}}catch(t){e(t,"updateDevices")}}))),[e,t])}},Ie=()=>{const e=p(l.a3),t=p(e?l.ws:l.Oq),r=p(l.de),i=(0,n.useMemo)((()=>(e=>e&&Array.isArray(e)&&0!==e.length?e.reduce(((e,t)=>t.roleName?(e[t.roleName]||(e[t.roleName]=[]),e[t.roleName].push(t),e):e),{}):{})(t)),[t]);return{roles:Object.keys(i),participantsByRoles:i,peerCount:r,isConnected:e}},Oe=()=>{const e=p(l.vz),t=p(l.zS),r=p(l.TI),n=e.server.running,i=e.browser.running,o=e.hls.running,s=n||i||o;return{isServerRecordingOn:n,isBrowserRecordingOn:i,isHLSRecordingOn:o,isStreamingOn:r.running||t.running,isHLSRunning:r.running,isRTMPRunning:t.running,isRecordingOn:s}},De=()=>{const e=S(l.fP.ERROR),[t,r]=(0,n.useState)(""),i=w(),o=(0,n.useCallback)((()=>P(void 0,void 0,void 0,(function*(){yield i.unblockAudio()}))),[i]);return(0,n.useEffect)((()=>{3008===(null==e?void 0:e.data.code)&&r(null==e?void 0:e.data.message)}),[e]),{error:t,unblockAudio:o,resetError:()=>r("")}},Te=({type:e,json:t=!0,onEvent:r,handleError:i=R})=>{const o=w(),s=b();return(0,n.useEffect)((()=>{o.ignoreMessageTypes([e])}),[o,e]),(0,n.useEffect)((()=>{if(s)return s.onNotification((n=>{const o=n.data;if(o&&o.type===e)try{const e=t?JSON.parse(o.message):o.message;null==r||r(e)}catch(n){i(n,"handleCustomEvent")}}),l.fP.NEW_MESSAGE)}),[s,e,t,r,i]),{sendEvent:(0,n.useCallback)(((n,s)=>P(void 0,void 0,void 0,(function*(){try{const i=((e,t)=>t?JSON.stringify(e||""):e)(n,t);s&&Array.isArray(null==s?void 0:s.roleNames)?yield o.sendGroupMessage(i,s.roleNames,e):"string"==typeof(null==s?void 0:s.peerId)?yield o.sendDirectMessage(i,s.peerId,e):yield o.sendBroadcastMessage(i,e),null==r||r(n)}catch(e){i(e,"sendCustomEvent")}}))),[o,i,r,e,t])}},Ce=e=>{var t;const r=p(l.a3),n=p(l.de),i=p(l.yu);let o=p(r?l.ws:l.Oq);const s=Array.from(new Set(o.map((e=>e.roleName)))),a=m();if((null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.isHandRaised)&&(o=o.filter((e=>a.getState((0,l.SO)(e.id)).isHandRaised))),(null==e?void 0:e.role)&&i.includes(e.role)&&(o=o.filter((t=>t.roleName===e.role))),null==e?void 0:e.search){const t=e.search.toLowerCase();o=o.filter((e=>{var r;return(null===(r=e.roleName)||void 0===r?void 0:r.toLowerCase().includes(t))||e.name.toLowerCase().includes(t)}))}return{participants:o,isConnected:r,peerCount:n,rolesWithParticipants:s}},He=e=>{const t=(0,n.useRef)(null),[r,i]=(0,n.useState)(!1),o=(0,n.useCallback)((()=>{throw new Error("unable to start screen share")}),[]),s=(0,n.useRef)(!1),{amIScreenSharing:a,toggleScreenShare:c}=T(o),l=k(a),u=(0,n.useCallback)((()=>P(void 0,void 0,void 0,(function*(){a&&(yield null==c?void 0:c(),t.current=null)}))),[a,c]),d=(0,n.useCallback)((e=>P(void 0,void 0,void 0,(function*(){if(!s.current){if(!e)throw new Error("URL not found");if(a)throw new Error("You are already sharing");if(!t.current)throw new Error("Attach a reference `iframeRef` to iframe for sharing");t.current.src=e,s.current=!0,i(!0),yield null==c?void 0:c({forceCurrentTab:M,cropElement:t.current,preferCurrentTab:M})}}))),[a,c]);return(0,n.useEffect)((()=>{l&&!a&&(null==e||e(),t.current&&(t.current.src=""),s.current=!1,i(!1))}),[a,l,e]),{startEmbedShare:d,stopEmbedShare:u,iframeRef:t,isEmbedShareInProgress:r}},Ae=e=>{const t=(0,n.useRef)(null),[r,i]=(0,n.useState)(!1),o=(0,n.useCallback)((()=>{throw new Error("unable to start screen share")}),[]),s=(0,n.useRef)(!1),{amIScreenSharing:a,toggleScreenShare:c}=T(o),l=k(a),u=(0,n.useCallback)((e=>{var r;t.current&&(null===(r=t.current.contentWindow)||void 0===r||r.postMessage({theme:2,file:e},"*"))}),[]),d=(0,n.useCallback)((()=>P(void 0,void 0,void 0,(function*(){a&&(yield null==c?void 0:c())}))),[a,c]),f=(0,n.useCallback)((e=>P(void 0,void 0,void 0,(function*(){if(s.current)return;if(!e)throw new Error("File or url not found");if(a)throw new Error("You are already sharing");if(!t.current)throw new Error("Attach a reference `iframeRef` to iframe for sharing");t.current.src="https://pdf-annotation.100ms.live/generic/web/viewer.html"+("string"==typeof e?`?file=${e}`:""),t.current.onload=()=>{requestAnimationFrame((()=>{e instanceof File&&u(e)}))},s.current=!0,i(!0);const r=window.self!==window.top;yield null==c?void 0:c({forceCurrentTab:M&&!r,cropElement:t.current,preferCurrentTab:M&&!r})}))),[a,u,c]);return(0,n.useEffect)((()=>{l&&!a&&(null==e||e(),t.current&&t.current.removeAttribute("src"),s.current=!1,i(!1))}),[a,l,e]),{startPDFShare:f,stopPDFShare:d,iframeRef:t,isPDFShareInProgress:r}},Ne=e=>e.reduce(((e,t)=>(e[t.id]=t,e)),{}),Be=e=>{const t=w(),r=(0,n.useRef)(t.getPeerListIterator(e)),[i,o]=(0,n.useState)({}),[s,a]=(0,n.useState)(0);return{loadPeers:()=>r.current.findPeers().then((e=>{o(Ne(e)),a(r.current.getTotal())})),loadMorePeers:()=>r.current.next().then((e=>{o((t=>Object.assign(Object.assign({},t),Ne(e)))),a(r.current.getTotal())})),hasNext:()=>r.current.hasNext(),total:s,peers:Object.values(i)}},Le=(e=!1)=>{var t,r;const i=p(l.a3),o=null===(t=p(l.s3))||void 0===t?void 0:t.customerUserId,s=p(l.wQ),a=p((0,l.oz)("disableNotifications")),c=!!(null==s?void 0:s.open),u=(null==s?void 0:s.owner)===o,d=w(),[f,h]=(0,n.useState)(!1),v=null===(r=p(l.b))||void 0===r?void 0:r.whiteboard,g=!!(null==v?void 0:v.includes("admin")),y=(0,n.useRef)(null);(0,n.useEffect)((()=>{if(!(null==s?void 0:s.addr)||!(null==s?void 0:s.token)||!y.current)return;const t=new URL("https://whiteboard-qa.100ms.live");t.searchParams.set("endpoint",`https://${s.addr}`),t.searchParams.set("token",s.token),(a||e)&&t.searchParams.set("zoom_to_content","true"),y.current.src=t.toString()}),[null==s?void 0:s.addr,null==s?void 0:s.token,a,e]),(0,n.useEffect)((()=>{i&&h(d.interactivityCenter.whiteboard.isEnabled)}),[i,d]);const m=(0,n.useCallback)((()=>P(void 0,void 0,void 0,(function*(){i&&g&&(c?u&&(yield d.interactivityCenter.whiteboard.close()):yield d.interactivityCenter.whiteboard.open())}))),[d,u,g,c,i]);return{open:c,isOwner:u,isAdmin:g,iframeRef:y,toggle:f&&g?m:void 0}},We=()=>({requestPermission:(0,n.useCallback)((()=>P(void 0,void 0,void 0,(function*(){Notification&&"granted"!==(null===Notification||void 0===Notification?void 0:Notification.permission)&&(yield Notification.requestPermission())}))),[]),showNotification:(0,n.useCallback)(((e,t)=>{if(!Notification||"denied"===(null===Notification||void 0===Notification?void 0:Notification.permission)||"visible"===document.visibilityState&&document.hasFocus())return;const r=new Notification(e,t),n=()=>{"visible"===document.visibilityState&&document.hasFocus()&&(null==r||r.close(),document.removeEventListener("visibilitychange",n))};document.addEventListener("visibilitychange",n)}),[])})}}]);