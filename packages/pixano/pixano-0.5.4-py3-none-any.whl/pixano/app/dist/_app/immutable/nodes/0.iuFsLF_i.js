import{s as J,y as F,E as G,x as Z,A as q,B as x,C as ee,e as L,a as H,c as E,b as T,L as fe,g as B,f as p,o as v,i as R,h as w,n as se,t as ae,l as ke,d as le,m as Ie,p as he,j as ue,v as me,w as Te,M as He,u as Be,G as je}from"../chunks/scheduler.Cq5UBZ1T.js";import{S as Q,i as X,b as j,d as y,m as z,a as $,t as k,e as U,g as te,c as ne}from"../chunks/index.D__UofN6.js";import{p as Pe}from"../chunks/stores.gpRgWVHO.js";import{a as ye,b as ze,s as Ue,c as Re,g as Oe}from"../chunks/api.BxNj-TAm.js";import"../chunks/command.RJYI0VPX.js";import{a as Fe}from"../chunks/icons.Dxr1AG5A.js";import{g as re,a as oe,d as de,e as Ne,s as _e,i as We,b as De,m as Ge,c as Ke}from"../chunks/datasetStores.F6tWYW9S.js";import{g as pe}from"../chunks/entry.Cy_skNL5.js";import{T as $e,C as Ye}from"../chunks/TooltipIconButton.BncwptGt.js";import{P as Je}from"../chunks/PrimaryButton.E-K47ZgV.js";import{I as ie,L as Qe}from"../chunks/loader-2.CU5guz68.js";const Xe=!1,Ze=!1,Zt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Xe,ssr:Ze},Symbol.toStringTag,{value:"Module"}));function qe(r){let e;const a=r[2].default,t=Z(a,r,r[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&q(t,a,s,s[3],e?ee(a,s[3],n,null):x(s[3]),null)},i(s){e||($(t,s),e=!0)},o(s){k(t,s),e=!1},d(s){t&&t.d(s)}}}function xe(r){let e,a;const t=[{name:"arrow-left-circle"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[qe]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=F(s,t[n]);return e=new ie({props:s}),{c(){j(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){z(e,n,l),a=!0},p(n,[l]){const i=l&3?re(t,[t[0],l&2&&oe(n[1]),l&1&&{iconNode:n[0]}]):{};l&8&&(i.$$scope={dirty:l,ctx:n}),e.$set(i)},i(n){a||($(e.$$.fragment,n),a=!0)},o(n){k(e.$$.fragment,n),a=!1},d(n){U(e,n)}}}function et(r,e,a){let{$$slots:t={},$$scope:s}=e;const n=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M16 12H8"}],["path",{d:"m12 8-4 4 4 4"}]];return r.$$set=l=>{a(1,e=F(F({},e),G(l))),"$$scope"in l&&a(3,s=l.$$scope)},e=G(e),[n,e,t,s]}class tt extends Q{constructor(e){super(),X(this,e,et,xe,J,{})}}function nt(r){let e;const a=r[2].default,t=Z(a,r,r[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&q(t,a,s,s[3],e?ee(a,s[3],n,null):x(s[3]),null)},i(s){e||($(t,s),e=!0)},o(s){k(t,s),e=!1},d(s){t&&t.d(s)}}}function st(r){let e,a;const t=[{name:"arrow-left"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[nt]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=F(s,t[n]);return e=new ie({props:s}),{c(){j(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){z(e,n,l),a=!0},p(n,[l]){const i=l&3?re(t,[t[0],l&2&&oe(n[1]),l&1&&{iconNode:n[0]}]):{};l&8&&(i.$$scope={dirty:l,ctx:n}),e.$set(i)},i(n){a||($(e.$$.fragment,n),a=!0)},o(n){k(e.$$.fragment,n),a=!1},d(n){U(e,n)}}}function at(r,e,a){let{$$slots:t={},$$scope:s}=e;const n=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];return r.$$set=l=>{a(1,e=F(F({},e),G(l))),"$$scope"in l&&a(3,s=l.$$scope)},e=G(e),[n,e,t,s]}class lt extends Q{constructor(e){super(),X(this,e,at,st,J,{})}}function rt(r){let e;const a=r[2].default,t=Z(a,r,r[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&q(t,a,s,s[3],e?ee(a,s[3],n,null):x(s[3]),null)},i(s){e||($(t,s),e=!0)},o(s){k(t,s),e=!1},d(s){t&&t.d(s)}}}function ot(r){let e,a;const t=[{name:"arrow-right"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[rt]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=F(s,t[n]);return e=new ie({props:s}),{c(){j(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){z(e,n,l),a=!0},p(n,[l]){const i=l&3?re(t,[t[0],l&2&&oe(n[1]),l&1&&{iconNode:n[0]}]):{};l&8&&(i.$$scope={dirty:l,ctx:n}),e.$set(i)},i(n){a||($(e.$$.fragment,n),a=!0)},o(n){k(e.$$.fragment,n),a=!1},d(n){U(e,n)}}}function it(r,e,a){let{$$slots:t={},$$scope:s}=e;const n=[["path",{d:"M5 12h14"}],["path",{d:"m12 5 7 7-7 7"}]];return r.$$set=l=>{a(1,e=F(F({},e),G(l))),"$$scope"in l&&a(3,s=l.$$scope)},e=G(e),[n,e,t,s]}class ct extends Q{constructor(e){super(),X(this,e,it,ot,J,{})}}function ft(r){let e;const a=r[2].default,t=Z(a,r,r[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&q(t,a,s,s[3],e?ee(a,s[3],n,null):x(s[3]),null)},i(s){e||($(t,s),e=!0)},o(s){k(t,s),e=!1},d(s){t&&t.d(s)}}}function ut(r){let e,a;const t=[{name:"database"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[ft]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=F(s,t[n]);return e=new ie({props:s}),{c(){j(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){z(e,n,l),a=!0},p(n,[l]){const i=l&3?re(t,[t[0],l&2&&oe(n[1]),l&1&&{iconNode:n[0]}]):{};l&8&&(i.$$scope={dirty:l,ctx:n}),e.$set(i)},i(n){a||($(e.$$.fragment,n),a=!0)},o(n){k(e.$$.fragment,n),a=!1},d(n){U(e,n)}}}function mt(r,e,a){let{$$slots:t={},$$scope:s}=e;const n=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5"}],["path",{d:"M3 12A9 3 0 0 0 21 12"}]];return r.$$set=l=>{a(1,e=F(F({},e),G(l))),"$$scope"in l&&a(3,s=l.$$scope)},e=G(e),[n,e,t,s]}class dt extends Q{constructor(e){super(),X(this,e,mt,ut,J,{})}}const _t=dt;function pt(r){let e;const a=r[2].default,t=Z(a,r,r[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&q(t,a,s,s[3],e?ee(a,s[3],n,null):x(s[3]),null)},i(s){e||($(t,s),e=!0)},o(s){k(t,s),e=!1},d(s){t&&t.d(s)}}}function ht(r){let e,a;const t=[{name:"home"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[pt]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=F(s,t[n]);return e=new ie({props:s}),{c(){j(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){z(e,n,l),a=!0},p(n,[l]){const i=l&3?re(t,[t[0],l&2&&oe(n[1]),l&1&&{iconNode:n[0]}]):{};l&8&&(i.$$scope={dirty:l,ctx:n}),e.$set(i)},i(n){a||($(e.$$.fragment,n),a=!0)},o(n){k(e.$$.fragment,n),a=!1},d(n){U(e,n)}}}function $t(r,e,a){let{$$slots:t={},$$scope:s}=e;const n=[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}],["polyline",{points:"9 22 9 12 15 12 15 22"}]];return r.$$set=l=>{a(1,e=F(F({},e),G(l))),"$$scope"in l&&a(3,s=l.$$scope)},e=G(e),[n,e,t,s]}class gt extends Q{constructor(e){super(),X(this,e,$t,ht,J,{})}}const vt=gt,bt=""+new URL("../assets/pixano_white.BVKPSmmP.png",import.meta.url).href;function Se(r){var C;let e,a,t=((C=r[0])==null?void 0:C.length)+"",s,n,l,i="datasets",o,u,h,M=r[0].reduce(Ce,0)+"",V,f,d,I="items",b,P,O,g,A,D,W,c,m,N;return{c(){e=L("div"),a=L("span"),s=ae(t),n=H(),l=L("span"),l.textContent=i,o=H(),u=L("div"),h=L("span"),V=ae(M),f=H(),d=L("span"),d.textContent=I,b=H(),P=L("div"),O=L("div"),g=L("div"),A=L("input"),D=H(),W=ke("svg"),c=ke("path"),this.h()},l(_){e=E(_,"DIV",{class:!0});var S=T(e);a=E(S,"SPAN",{class:!0});var K=T(a);s=le(K,t),K.forEach(p),n=B(S),l=E(S,"SPAN",{class:!0,"data-svelte-h":!0}),fe(l)!=="svelte-1royfdz"&&(l.textContent=i),S.forEach(p),o=B(_),u=E(_,"DIV",{class:!0});var Y=T(u);h=E(Y,"SPAN",{class:!0});var ge=T(h);V=le(ge,M),ge.forEach(p),f=B(Y),d=E(Y,"SPAN",{class:!0,"data-svelte-h":!0}),fe(d)!=="svelte-3uc568"&&(d.textContent=I),Y.forEach(p),b=B(_),P=E(_,"DIV",{class:!0});var ve=T(P);O=E(ve,"DIV",{class:!0});var be=T(O);g=E(be,"DIV",{class:!0});var ce=T(g);A=E(ce,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),D=B(ce),W=Ie(ce,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,class:!0});var we=T(W);c=Ie(we,"path",{d:!0,fill:!0}),T(c).forEach(p),we.forEach(p),ce.forEach(p),be.forEach(p),ve.forEach(p),this.h()},h(){v(a,"class","mr-2 text-4xl font-medium"),v(l,"class","text-xl font-medium"),v(e,"class","my-4 mr-8 p-4 pr-8 border rounded-lg border-primary-foreground"),v(h,"class","mr-2 text-4xl font-medium"),v(d,"class","text-xl font-medium"),v(u,"class","my-4 mr-8 p-4 pr-8 border rounded-lg border-primary-foreground"),v(A,"id","search-input"),v(A,"type","text"),v(A,"placeholder","Search datasets"),v(A,"class","h-10 pl-10 pr-4 rounded border border-primary-foreground bg-primary-foreground text-white placeholder-white font-medium focus:outline-none"),v(c,"d",Fe),v(c,"fill","white"),v(W,"xmlns","http://www.w3.org/2000/svg"),v(W,"height","48"),v(W,"viewBox","0 -960 960 960"),v(W,"width","48"),v(W,"class","absolute left-3 h-5 w-5 pointer-events-none"),v(g,"class","h-20 relative flex items-center"),v(O,"class","flex items-center space-x-2"),v(P,"class","grow self-end flex flex-row justify-end items-end")},m(_,S){R(_,e,S),w(e,a),w(a,s),w(e,n),w(e,l),R(_,o,S),R(_,u,S),w(u,h),w(h,V),w(u,f),w(u,d),R(_,b,S),R(_,P,S),w(P,O),w(O,g),w(g,A),w(g,D),w(g,W),w(W,c),m||(N=he(A,"input",r[1]),m=!0)},p(_,S){var K;S&1&&t!==(t=((K=_[0])==null?void 0:K.length)+"")&&ue(s,t),S&1&&M!==(M=_[0].reduce(Ce,0)+"")&&ue(V,M)},d(_){_&&(p(e),p(o),p(u),p(b),p(P)),m=!1,N()}}}function wt(r){let e,a,t=`<img src="${bt}" alt="Logo Pixano" class="w-7 h-7"/> <span class="text-2xl font-semibold text-slate-50 uppercase">Pixano</span>`,s,n,l=r[0]&&Se(r);return{c(){e=L("header"),a=L("div"),a.innerHTML=t,s=H(),n=L("div"),l&&l.c(),this.h()},l(i){e=E(i,"HEADER",{class:!0});var o=T(e);a=E(o,"DIV",{class:!0,"data-svelte-h":!0}),fe(a)!=="svelte-4zxcmy"&&(a.innerHTML=t),s=B(o),n=E(o,"DIV",{class:!0});var u=T(n);l&&l.l(u),u.forEach(p),o.forEach(p),this.h()},h(){v(a,"class","flex gap-4 items-center"),v(n,"class","flex pt-4 h-36 w-full items-center flex-wrap text-slate-50"),v(e,"class","p-4 w-full h-fit pt-8 px-20 xl:px-60 flex flex-col justify-evenly bg-primary font-Montserrat z-10")},m(i,o){R(i,e,o),w(e,a),w(e,s),w(e,n),l&&l.m(n,null)},p(i,[o]){i[0]?l?l.p(i,o):(l=Se(i),l.c(),l.m(n,null)):l&&(l.d(1),l=null)},i:se,o:se,d(i){i&&p(e),l&&l.d()}}}const Ce=(r,e)=>r+e.num_elements;function kt(r,e,a){let{datasets:t}=e;const s=n=>{const l=n.currentTarget;de.update((i=[])=>i.map(o=>({...o,isFiltered:!o.name.toLocaleLowerCase().includes(l.value.toLocaleLowerCase())})))};return r.$$set=n=>{"datasets"in n&&a(0,t=n.datasets)},[t,s]}class It extends Q{constructor(e){super(),X(this,e,kt,wt,J,{datasets:0})}}const Nt=""+new URL("../assets/pixano.NAI_8qFW.png",import.meta.url).href,Dt=(r,e,a)=>{const t=e.findIndex(n=>n.id===a);let s;if(t!==-1){const n=r==="previous"?t-1:t+1;n===-1&&(s=e[e.length-1].id),n===e.length&&(s=e[0].id),n>=0&&n<e.length&&(s=e[n].id)}return s},Le=[{name:"Dashboard",Icon:vt},{name:"Dataset",Icon:_t}];function Ee(r,e,a){const t=r.slice();return t[20]=e[a].name,t[21]=e[a].Icon,t}function St(r){let e,a;return e=new tt({}),{c(){j(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){z(e,t,s),a=!0},i(t){a||($(e.$$.fragment,t),a=!0)},o(t){k(e.$$.fragment,t),a=!1},d(t){U(e,t)}}}function Me(r){let e,a,t,s;const n=[Lt,Ct],l=[];function i(o,u){return o[3]?0:1}return e=i(r),a=l[e]=n[e](r),{c(){a.c(),t=me()},l(o){a.l(o),t=me()},m(o,u){l[e].m(o,u),R(o,t,u),s=!0},p(o,u){let h=e;e=i(o),e===h?l[e].p(o,u):(te(),k(l[h],1,1,()=>{l[h]=null}),ne(),a=l[e],a?a.p(o,u):(a=l[e]=n[e](o),a.c()),$(a,1),a.m(t.parentNode,t))},i(o){s||($(a),s=!0)},o(o){k(a),s=!1},d(o){o&&p(t),l[e].d(o)}}}function Ct(r){let e,a,t,s,n,l,i;return a=new $e({props:{tooltipContent:"Previous item",$$slots:{default:[Et]},$$scope:{ctx:r}}}),a.$on("click",r[13]),l=new $e({props:{tooltipContent:"Next item",$$slots:{default:[Mt]},$$scope:{ctx:r}}}),l.$on("click",r[14]),{c(){e=L("div"),j(a.$$.fragment),t=H(),s=ae(r[2]),n=H(),j(l.$$.fragment),this.h()},l(o){e=E(o,"DIV",{class:!0});var u=T(e);y(a.$$.fragment,u),t=B(u),s=le(u,r[2]),n=B(u),y(l.$$.fragment,u),u.forEach(p),this.h()},h(){v(e,"class","flex items-center gap-4")},m(o,u){R(o,e,u),z(a,e,null),w(e,t),w(e,s),w(e,n),z(l,e,null),i=!0},p(o,u){const h={};u&16777216&&(h.$$scope={dirty:u,ctx:o}),a.$set(h),(!i||u&4)&&ue(s,o[2]);const M={};u&16777216&&(M.$$scope={dirty:u,ctx:o}),l.$set(M)},i(o){i||($(a.$$.fragment,o),$(l.$$.fragment,o),i=!0)},o(o){k(a.$$.fragment,o),k(l.$$.fragment,o),i=!1},d(o){o&&p(e),U(a),U(l)}}}function Lt(r){let e,a;return e=new Qe({props:{class:"animate-spin"}}),{c(){j(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){z(e,t,s),a=!0},p:se,i(t){a||($(e.$$.fragment,t),a=!0)},o(t){k(e.$$.fragment,t),a=!1},d(t){U(e,t)}}}function Et(r){let e,a;return e=new lt({}),{c(){j(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){z(e,t,s),a=!0},i(t){a||($(e.$$.fragment,t),a=!0)},o(t){k(e.$$.fragment,t),a=!1},d(t){U(e,t)}}}function Mt(r){let e,a;return e=new ct({}),{c(){j(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){z(e,t,s),a=!0},i(t){a||($(e.$$.fragment,t),a=!0)},o(t){k(e.$$.fragment,t),a=!1},d(t){U(e,t)}}}function At(r){let e,a,t,s,n;return e=new r[21]({props:{strokeWidth:1}}),{c(){j(e.$$.fragment),a=H(),t=ae(r[20]),s=H()},l(l){y(e.$$.fragment,l),a=B(l),t=le(l,r[20]),s=B(l)},m(l,i){z(e,l,i),R(l,a,i),R(l,t,i),R(l,s,i),n=!0},p:se,i(l){n||($(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){l&&(p(a),p(t),p(s)),U(e,l)}}}function Ae(r){var s;let e,a;function t(){return r[15](r[20])}return e=new Je({props:{isSelected:(s=r[1])==null?void 0:s.includes(`/${r[20]}`.toLowerCase()),$$slots:{default:[At]},$$scope:{ctx:r}}}),e.$on("click",t),{c(){j(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){z(e,n,l),a=!0},p(n,l){var o;r=n;const i={};l&2&&(i.isSelected=(o=r[1])==null?void 0:o.includes(`/${r[20]}`.toLowerCase())),l&16777216&&(i.$$scope={dirty:l,ctx:r}),e.$set(i)},i(n){a||($(e.$$.fragment,n),a=!0)},o(n){k(e.$$.fragment,n),a=!1},d(n){U(e,n)}}}function Ve(r){let e,a;return e=new Ye({props:{message:"You have unsaved changes",confirm:"Save and continue",alternativeAction:"Continue without saving"}}),e.$on("confirm",r[7]),e.$on("alternative",r[8]),e.$on("cancel",r[16]),{c(){j(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){z(e,t,s),a=!0},p:se,i(t){a||($(e.$$.fragment,t),a=!0)},o(t){k(e.$$.fragment,t),a=!1},d(t){U(e,t)}}}function Vt(r){let e,a,t,s,n,l=`<img src="${Nt}" alt="Logo Pixano" class="w-8 h-8 mx-2"/>`,i,o,u,h,M,V,f,d,I,b,P,O;o=new $e({props:{tooltipContent:r[2]?"Back to dataset":"Back to home",$$slots:{default:[St]},$$scope:{ctx:r}}}),o.$on("click",r[12]);let g=r[2]&&Me(r),A=Ne(Le),D=[];for(let m=0;m<A.length;m+=1)D[m]=Ae(Ee(r,A,m));const W=m=>k(D[m],1,1,()=>{D[m]=null});let c=r[4]!=="none"&&Ve(r);return{c(){e=L("header"),a=L("div"),t=L("div"),s=L("div"),n=L("button"),n.innerHTML=l,i=H(),j(o.$$.fragment),u=H(),h=ae(r[0]),M=H(),g&&g.c(),V=H(),f=L("div");for(let m=0;m<D.length;m+=1)D[m].c();d=H(),c&&c.c(),I=me(),this.h()},l(m){e=E(m,"HEADER",{class:!0});var N=T(e);a=E(N,"DIV",{class:!0});var C=T(a);t=E(C,"DIV",{class:!0});var _=T(t);s=E(_,"DIV",{class:!0});var S=T(s);n=E(S,"BUTTON",{class:!0,"data-svelte-h":!0}),fe(n)!=="svelte-1neur1j"&&(n.innerHTML=l),i=B(S),y(o.$$.fragment,S),u=B(S),h=le(S,r[0]),S.forEach(p),_.forEach(p),M=B(C),g&&g.l(C),V=B(C),f=E(C,"DIV",{class:!0});var K=T(f);for(let Y=0;Y<D.length;Y+=1)D[Y].l(K);K.forEach(p),C.forEach(p),N.forEach(p),d=B(m),c&&c.l(m),I=me(),this.h()},h(){v(n,"class","h-10 w-10"),v(s,"class","flex gap-4 items-center font-light"),v(t,"class","h-10 flex items-center font-semibold text-2xl"),v(f,"class","flex gap-4"),v(a,"class","h-20 p-5 flex justify-between items-center shrink-0 bg-white border-b border-slate-200 shadow-sm text-slate-800"),v(e,"class","w-full fixed z-40 font-Montserrat")},m(m,N){R(m,e,N),w(e,a),w(a,t),w(t,s),w(s,n),w(s,i),z(o,s,null),w(s,u),w(s,h),w(a,M),g&&g.m(a,null),w(a,V),w(a,f);for(let C=0;C<D.length;C+=1)D[C]&&D[C].m(f,null);R(m,d,N),c&&c.m(m,N),R(m,I,N),b=!0,P||(O=[he(window,"keyup",r[6]),he(n,"click",r[11])],P=!0)},p(m,[N]){const C={};if(N&4&&(C.tooltipContent=m[2]?"Back to dataset":"Back to home"),N&16777216&&(C.$$scope={dirty:N,ctx:m}),o.$set(C),(!b||N&1)&&ue(h,m[0]),m[2]?g?(g.p(m,N),N&4&&$(g,1)):(g=Me(m),g.c(),$(g,1),g.m(a,V)):g&&(te(),k(g,1,1,()=>{g=null}),ne()),N&515){A=Ne(Le);let _;for(_=0;_<A.length;_+=1){const S=Ee(m,A,_);D[_]?(D[_].p(S,N),$(D[_],1)):(D[_]=Ae(S),D[_].c(),$(D[_],1),D[_].m(f,null))}for(te(),_=A.length;_<D.length;_+=1)W(_);ne()}m[4]!=="none"?c?(c.p(m,N),N&16&&$(c,1)):(c=Ve(m),c.c(),$(c,1),c.m(I.parentNode,I)):c&&(te(),k(c,1,1,()=>{c=null}),ne())},i(m){if(!b){$(o.$$.fragment,m),$(g);for(let N=0;N<A.length;N+=1)$(D[N]);$(c),b=!0}},o(m){k(o.$$.fragment,m),k(g),D=D.filter(Boolean);for(let N=0;N<D.length;N+=1)k(D[N]);k(c),b=!1},d(m){m&&(p(e),p(d),p(I)),U(o),g&&g.d(),Te(D,m),c&&c.d(m),P=!1,He(O)}}}function Pt(r,e,a){let{datasetName:t}=e,{pageId:s}=e,{currentDatasetName:n}=e,l,i,o,u,h="none",M="none";_e.subscribe(c=>u=c.canSave),We.subscribe(c=>{a(3,o=c)}),de.subscribe(c=>{l=c});const V=async c=>{var _;const m=l.find(S=>S.name===n),N=Object.values(((_=m==null?void 0:m.page)==null?void 0:_.items)||{}),C=Dt(c,N,i);if(C){const S=`/${n}/dataset/${C}`;if(u)return M=C,a(4,h=S);a(2,i=C),await pe(S)}},f=async c=>{var m;return((m=c.target)==null?void 0:m.tagName)==="INPUT"?c.preventDefault():(c.key==="ArrowLeft"?await V("previous"):c.key==="ArrowRight"&&await V("next"),c.key)},d=async()=>{_e.update(c=>({...c,shouldSave:!0})),await I()},I=async()=>{M!=="none"&&(a(2,i=M),M="none"),await pe(h),a(4,h="none"),_e.set({canSave:!1,shouldSave:!1})},b=async c=>{if(u)return a(4,h=c);await pe(c)},P=()=>b("/"),O=()=>b(i?`/${t}/dataset`:"/"),g=()=>V("previous"),A=()=>V("next"),D=c=>b(`/${t}/${c.toLocaleLowerCase()}`),W=()=>a(4,h="none");return r.$$set=c=>{"datasetName"in c&&a(0,t=c.datasetName),"pageId"in c&&a(1,s=c.pageId),"currentDatasetName"in c&&a(10,n=c.currentDatasetName)},Pe.subscribe(c=>{a(2,i=c.params.itemId)}),[t,s,i,o,h,V,f,d,I,b,n,P,O,g,A,D,W]}class Tt extends Q{constructor(e){super(),X(this,e,Pt,Vt,J,{datasetName:0,pageId:1,currentDatasetName:10})}}const Ht=""+new URL("../assets/favicon.OuiISzV3.ico",import.meta.url).href;function Bt(r){let e,a;return e=new Tt({props:{datasetName:r[1],pageId:r[2],currentDatasetName:r[1]}}),{c(){j(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){z(e,t,s),a=!0},p(t,s){const n={};s&2&&(n.datasetName=t[1]),s&4&&(n.pageId=t[2]),s&2&&(n.currentDatasetName=t[1]),e.$set(n)},i(t){a||($(e.$$.fragment,t),a=!0)},o(t){k(e.$$.fragment,t),a=!1},d(t){U(e,t)}}}function jt(r){let e,a;return e=new It({props:{datasets:r[0]}}),{c(){j(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){z(e,t,s),a=!0},p(t,s){const n={};s&1&&(n.datasets=t[0]),e.$set(n)},i(t){a||($(e.$$.fragment,t),a=!0)},o(t){k(e.$$.fragment,t),a=!1},d(t){U(e,t)}}}function yt(r){let e,a,t,s,n,l,i,o;const u=[jt,Bt],h=[];function M(d,I){return d[2]==="/"?0:1}s=M(r),n=h[s]=u[s](r);const V=r[4].default,f=Z(V,r,r[3],null);return{c(){e=L("link"),a=H(),t=L("div"),n.c(),l=H(),i=L("main"),f&&f.c(),this.h()},l(d){const I=Be("svelte-1lrorme",document.head);e=E(I,"LINK",{rel:!0,type:!0,href:!0}),I.forEach(p),a=B(d),t=E(d,"DIV",{class:!0});var b=T(t);n.l(b),l=B(b),i=E(b,"MAIN",{class:!0});var P=T(i);f&&f.l(P),P.forEach(p),b.forEach(p),this.h()},h(){v(e,"rel","icon"),v(e,"type","image/svg"),v(e,"href",Ht),v(i,"class","h-1 min-h-screen bg-slate-50"),v(t,"class","app")},m(d,I){w(document.head,e),R(d,a,I),R(d,t,I),h[s].m(t,null),w(t,l),w(t,i),f&&f.m(i,null),o=!0},p(d,[I]){let b=s;s=M(d),s===b?h[s].p(d,I):(te(),k(h[b],1,1,()=>{h[b]=null}),ne(),n=h[s],n?n.p(d,I):(n=h[s]=u[s](d),n.c()),$(n,1),n.m(t,l)),f&&f.p&&(!o||I&8)&&q(f,V,d,d[3],o?ee(V,d[3],I,null):x(d[3]),null)},i(d){o||($(n),$(f,d),o=!0)},o(d){k(n),k(f,d),o=!1},d(d){d&&(p(a),p(t)),p(e),h[s].d(),f&&f.d(d)}}}function zt(r,e,a){let{$$slots:t={},$$scope:s}=e,n,l,i,o,u;async function h(){i=await ye(),Ge.set(i)}async function M(){try{const f=await ze();a(0,n=f),de.set(f)}catch(f){console.error(f)}}je(async()=>{await M(),await h()});const V=async(f,d,I,b)=>{let P={items:[],total:0},O=!1;if(b!=null&&b.search)try{P=await Ue(f,b,d,I)}catch{O=!0}else try{P=await Re(f,d,I),l=await Oe(f)}catch{O=!0}de.update((g=[])=>g.map(A=>A.id===f?{...A,features_values:l.features_values,page:P,isErrored:O}:A))};return De.subscribe(f=>{var I;const d=(I=n==null?void 0:n.find(b=>b.name===u))==null?void 0:I.id;d&&f&&V(d,f.currentPage,f.pageSize,f.query).catch(b=>console.error(b))}),r.$$set=f=>{"$$scope"in f&&a(3,s=f.$$scope)},r.$$.update=()=>{var f;r.$$.dirty&3&&((f=n==null?void 0:n.find(I=>I.name===u))!=null&&f.id)&&De.set(Ke)},Pe.subscribe(f=>{a(2,o=f.route.id),a(1,u=f.params.dataset)}),[n,u,o,s,t]}class qt extends Q{constructor(e){super(),X(this,e,zt,yt,J,{})}}export{qt as component,Zt as universal};
