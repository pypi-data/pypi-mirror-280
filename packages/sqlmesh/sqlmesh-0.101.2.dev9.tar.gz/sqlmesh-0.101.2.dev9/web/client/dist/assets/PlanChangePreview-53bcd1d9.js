import{r as s,J as Q,as as ce,D as X,I as Y,y as Z,X as ee,x as C,R as k,ab as Oe,af as ue,M as D,at as ne,W,au as se,F as De,ac as Te,ad as Me,ae as Ae,av as Ie,aw as $e,Q as le,A as Fe,Z as Le,j as a,aj as Be,an as oe,d as y,a as ze,e as me,a7 as ie}from"./index-45e2979d.js";import{T as Ge,p as Se,f as Ue,L as We}from"./context-7d3868a2.js";import He from"./ModelLineage-f83a4b5f.js";import{P as Ve}from"./PlusIcon-257d00e1.js";import{v as T,M as pe,P as fe}from"./disclosure-4af2941a.js";function qe({title:e,titleId:t,...r},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{fillRule:"evenodd",d:"M12 5.25c1.213 0 2.415.046 3.605.135a3.256 3.256 0 013.01 3.01c.044.583.077 1.17.1 1.759L17.03 8.47a.75.75 0 10-1.06 1.06l3 3a.75.75 0 001.06 0l3-3a.75.75 0 00-1.06-1.06l-1.752 1.751c-.023-.65-.06-1.296-.108-1.939a4.756 4.756 0 00-4.392-4.392 49.422 49.422 0 00-7.436 0A4.756 4.756 0 003.89 8.282c-.017.224-.033.447-.046.672a.75.75 0 101.497.092c.013-.217.028-.434.044-.651a3.256 3.256 0 013.01-3.01c1.19-.09 2.392-.135 3.605-.135zm-6.97 6.22a.75.75 0 00-1.06 0l-3 3a.75.75 0 101.06 1.06l1.752-1.751c.023.65.06 1.296.108 1.939a4.756 4.756 0 004.392 4.392 49.413 49.413 0 007.436 0 4.756 4.756 0 004.392-4.392c.017-.223.032-.447.046-.672a.75.75 0 00-1.497-.092c-.013.217-.028.434-.044.651a3.256 3.256 0 01-3.01 3.01 47.953 47.953 0 01-7.21 0 3.256 3.256 0 01-3.01-3.01 47.759 47.759 0 01-.1-1.759L6.97 15.53a.75.75 0 001.06-1.06l-3-3z",clipRule:"evenodd"}))}const Je=s.forwardRef(qe),xe=Je;function Ke({title:e,titleId:t,...r},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"}))}const Qe=s.forwardRef(Ke),Or=Qe;function Xe({title:e,titleId:t,...r},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{fillRule:"evenodd",d:"M3.75 12a.75.75 0 01.75-.75h15a.75.75 0 010 1.5h-15a.75.75 0 01-.75-.75z",clipRule:"evenodd"}))}const Ye=s.forwardRef(Xe),Ze=Ye;function er({container:e,accept:t,walk:r,enabled:n=!0}){let o=s.useRef(t),i=s.useRef(r);s.useEffect(()=>{o.current=t,i.current=r},[t,r]),Q(()=>{if(!e||!n)return;let d=ce(e);if(!d)return;let f=o.current,u=i.current,E=Object.assign(M=>f(M),{acceptNode:f}),R=d.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,E,!1);for(;R.nextNode();)u(R.currentNode)},[e,n,o,i])}let ge=s.createContext(null);function ve(){let e=s.useContext(ge);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,ve),t}return e}function he(){let[e,t]=s.useState([]);return[e.length>0?e.join(" "):void 0,s.useMemo(()=>function(r){let n=C(i=>(t(d=>[...d,i]),()=>t(d=>{let f=d.slice(),u=f.indexOf(i);return u!==-1&&f.splice(u,1),f}))),o=s.useMemo(()=>({register:n,slot:r.slot,name:r.name,props:r.props}),[n,r.slot,r.name,r.props]);return k.createElement(ge.Provider,{value:o},r.children)},[t])]}let rr="label";function tr(e,t){let r=Y(),{id:n=`headlessui-label-${r}`,passive:o=!1,...i}=e,d=ve(),f=Z(t);Q(()=>d.register(n),[n,d.register]);let u={ref:f,...d.props,id:n};return o&&("onClick"in u&&(delete u.htmlFor,delete u.onClick),"onClick"in i&&delete i.onClick),ee({ourProps:u,theirProps:i,slot:d.slot||{},defaultTag:rr,name:d.name||"Label"})}let ar=X(tr),nr=Object.assign(ar,{});var sr=(e=>(e[e.RegisterOption=0]="RegisterOption",e[e.UnregisterOption=1]="UnregisterOption",e))(sr||{});let lr={0(e,t){let r=[...e.options,{id:t.id,element:t.element,propsRef:t.propsRef}];return{...e,options:Le(r,n=>n.element.current)}},1(e,t){let r=e.options.slice(),n=e.options.findIndex(o=>o.id===t.id);return n===-1?e:(r.splice(n,1),{...e,options:r})}},re=s.createContext(null);re.displayName="RadioGroupDataContext";function be(e){let t=s.useContext(re);if(t===null){let r=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,be),r}return t}let te=s.createContext(null);te.displayName="RadioGroupActionsContext";function we(e){let t=s.useContext(te);if(t===null){let r=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,we),r}return t}function or(e,t){return Fe(t.type,lr,e,t)}let ir="div";function dr(e,t){let r=Y(),{id:n=`headlessui-radiogroup-${r}`,value:o,defaultValue:i,form:d,name:f,onChange:u,by:E=(l,x)=>l===x,disabled:R=!1,...M}=e,N=C(typeof E=="string"?(l,x)=>{let p=E;return(l==null?void 0:l[p])===(x==null?void 0:x[p])}:E),[A,I]=s.useReducer(or,{options:[]}),g=A.options,[z,q]=he(),[P,$]=ue(),F=s.useRef(null),J=Z(F,t),[v,G]=Ge(o,u,i),b=s.useMemo(()=>g.find(l=>!l.propsRef.current.disabled),[g]),_=s.useMemo(()=>g.some(l=>N(l.propsRef.current.value,v)),[g,v]),w=C(l=>{var x;if(R||N(l,v))return!1;let p=(x=g.find(O=>N(O.propsRef.current.value,l)))==null?void 0:x.propsRef.current;return p!=null&&p.disabled?!1:(G==null||G(l),!0)});er({container:F.current,accept(l){return l.getAttribute("role")==="radio"?NodeFilter.FILTER_REJECT:l.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(l){l.setAttribute("role","none")}});let K=C(l=>{let x=F.current;if(!x)return;let p=ce(x),O=g.filter(m=>m.propsRef.current.disabled===!1).map(m=>m.element.current);switch(l.key){case D.Enter:Se(l.currentTarget);break;case D.ArrowLeft:case D.ArrowUp:if(l.preventDefault(),l.stopPropagation(),ne(O,W.Previous|W.WrapAround)===se.Success){let m=g.find(L=>L.element.current===(p==null?void 0:p.activeElement));m&&w(m.propsRef.current.value)}break;case D.ArrowRight:case D.ArrowDown:if(l.preventDefault(),l.stopPropagation(),ne(O,W.Next|W.WrapAround)===se.Success){let m=g.find(L=>L.element.current===(p==null?void 0:p.activeElement));m&&w(m.propsRef.current.value)}break;case D.Space:{l.preventDefault(),l.stopPropagation();let m=g.find(L=>L.element.current===(p==null?void 0:p.activeElement));m&&w(m.propsRef.current.value)}break}}),j=C(l=>(I({type:0,...l}),()=>I({type:1,id:l.id}))),S=s.useMemo(()=>({value:v,firstOption:b,containsCheckedOption:_,disabled:R,compare:N,...A}),[v,b,_,R,N,A]),Ee=s.useMemo(()=>({registerOption:j,change:w}),[j,w]),Ne={ref:J,id:n,role:"radiogroup","aria-labelledby":z,"aria-describedby":P,onKeyDown:K},Pe=s.useMemo(()=>({value:v}),[v]),U=s.useRef(null),_e=De();return s.useEffect(()=>{U.current&&i!==void 0&&_e.addEventListener(U.current,"reset",()=>{w(i)})},[U,w]),k.createElement($,{name:"RadioGroup.Description"},k.createElement(q,{name:"RadioGroup.Label"},k.createElement(te.Provider,{value:Ee},k.createElement(re.Provider,{value:S},f!=null&&v!=null&&Ue({[f]:v}).map(([l,x],p)=>k.createElement(Te,{features:Me.Hidden,ref:p===0?O=>{var m;U.current=(m=O==null?void 0:O.closest("form"))!=null?m:null}:void 0,...Ae({key:l,as:"input",type:"radio",checked:x!=null,hidden:!0,readOnly:!0,form:d,name:l,value:x})})),ee({ourProps:Ne,theirProps:M,slot:Pe,defaultTag:ir,name:"RadioGroup"})))))}var cr=(e=>(e[e.Empty=1]="Empty",e[e.Active=2]="Active",e))(cr||{});let ur="div";function mr(e,t){var r;let n=Y(),{id:o=`headlessui-radiogroup-option-${n}`,value:i,disabled:d=!1,...f}=e,u=s.useRef(null),E=Z(u,t),[R,M]=he(),[N,A]=ue(),{addFlag:I,removeFlag:g,hasFlag:z}=Ie(1),q=$e({value:i,disabled:d}),P=be("RadioGroup.Option"),$=we("RadioGroup.Option");Q(()=>$.registerOption({id:o,element:u,propsRef:q}),[o,$,u,e]);let F=C(j=>{var S;if(le(j.currentTarget))return j.preventDefault();$.change(i)&&(I(2),(S=u.current)==null||S.focus())}),J=C(j=>{if(le(j.currentTarget))return j.preventDefault();I(2)}),v=C(()=>g(2)),G=((r=P.firstOption)==null?void 0:r.id)===o,b=P.disabled||d,_=P.compare(P.value,i),w={ref:E,id:o,role:"radio","aria-checked":_?"true":"false","aria-labelledby":R,"aria-describedby":N,"aria-disabled":b?!0:void 0,tabIndex:(()=>b?-1:_||!P.containsCheckedOption&&G?0:-1)(),onClick:b?void 0:F,onFocus:b?void 0:J,onBlur:b?void 0:v},K=s.useMemo(()=>({checked:_,disabled:b,active:z(2)}),[_,b,z]);return k.createElement(A,{name:"RadioGroup.Description"},k.createElement(M,{name:"RadioGroup.Label"},ee({ourProps:w,theirProps:f,slot:K,defaultTag:ur,name:"RadioGroup.Option"})))}let pr=X(dr),fr=X(mr),H=Object.assign(pr,{Option:fr,Label:nr,Description:Oe});const h={PlanOptions:"plan-options",ResetPlanOptions:"reset-plan-options",Dates:"dates",DateStart:"date-start",DateEnd:"date-end",Category:"category",External:"external",ResetTestsReport:"reset-tests-report",TestsReportErrors:"tests-report-errors",TestsReportMessages:"tests-report-messages"},c={Add:"add",Remove:"remove",Direct:"direct",Indirect:"indirect",Default:"default"},de={BreakingChange:"breaking-change",NonBreakingChange:"non-breaking-change"},[xr,gr]=wr(),ae={start:void 0,end:void 0,skip_tests:!1,no_gaps:!1,skip_backfill:!1,forward_only:!1,auto_apply:!1,no_auto_categorization:!1,include_unmodified:!0,from:void 0,restate_models:void 0,create_from:void 0,categories:gr,defaultCategory:xr,change_categorization:new Map,virtualUpdateDescription:"All changes and their downstream dependencies can be fully previewed before they get promoted. If during plan creation no data gaps have been detected and only references to new model versions need to be updated, then such an update is referred to as a Virtual Update. Virtual Updates impose no additional runtime overhead or cost.",isInitialPlanRun:!1,errors:[],testsReportErrors:void 0,testsReportMessages:void 0},Re=s.createContext(ae),je=s.createContext(()=>{});function Dr({children:e}){const[t,r]=s.useReducer(hr,Object.assign(ae));return a.jsx(Re.Provider,{value:Object.assign(t),children:a.jsx(je.Provider,{value:r,children:e})})}function ke(){return s.useContext(Re)}function vr(){return s.useContext(je)}function hr(e,t){return t=Array.isArray(t)?t:[t],t.reduce(br,e)}function br(e=ae,{type:t,...r}){switch(t){case h.ResetPlanOptions:return Object.assign({},e,{skip_tests:!1,no_gaps:!1,skip_backfill:!1,forward_only:!1,auto_apply:!1,no_auto_categorization:!1,include_unmodified:!0,create_from:void 0,restate_models:void 0});case h.PlanOptions:return Object.assign({},e,r);case h.Dates:return Object.assign({},e,{start:r.start,end:r.end});case h.External:return Object.assign({},e,{isInitialPlanRun:r.isInitialPlanRun??!1});case h.DateStart:return Object.assign({},e,{start:r.start});case h.DateEnd:return Object.assign({},e,{end:r.end});case h.TestsReportErrors:return Object.assign({},e,{testsReportErrors:r.testsReportErrors});case h.TestsReportMessages:return Object.assign({},e,{testsReportMessages:r.testsReportMessages});case h.ResetTestsReport:return Object.assign({},e,{testsReportErrors:void 0,testsReportMessages:void 0});case h.Category:{const{change:n,category:o}=r;return Be(n==null?void 0:n.model_name)&&e.change_categorization.set(n.model_name,{category:o,change:n}),Object.assign({},e,{change_categorization:new Map(e.change_categorization)})}default:return Object.assign({},e)}}function wr(){const e={id:de.BreakingChange,name:"Breaking Change",description:"It will rebuild all models",value:oe.NUMBER_1},t=[e,{id:de.NonBreakingChange,name:"Non-Breaking Change",description:"It will exclude all indirect models caused by this change",value:oe.NUMBER_2}];return[e,t]}function B({children:e,headline:t,type:r,className:n}){return a.jsxs("div",{className:y("flex flex-col rounded-md p-4",r===c.Add&&"bg-success-10",r===c.Remove&&"bg-danger-10",r===c.Direct&&"bg-secondary-10",r===c.Indirect&&"bg-warning-10",r===c.Default&&"bg-neutral-5",n),children:[t!=null&&a.jsx("h4",{className:y("mb-2 font-bold whitespace-nowrap",r===c.Add&&"text-success-600 dark:text-success-300",r===c.Remove&&"text-danger-600 dark:text-danger-300",r===c.Direct&&"text-secondary-600 dark:text-secondary-300",r===c.Indirect&&"text-warning-600 dark:text-warning-300",r===c.Default&&"text-neutral-600 dark:text-neutral-300"),children:t}),e]})}function Rr({changes:e=[],type:t}){return a.jsx("ul",{children:e.map(r=>a.jsxs("li",{className:y("flex items-center px-1 leading-5 mb-1",t===c.Add&&"text-success-600 dark:text-success-300",t===c.Remove&&"text-danger-600 dark:text-danger-300",t===c.Direct&&"text-secondary-600 dark:text-secondary-300",t===c.Indirect&&"text-warning-600 dark:text-warning-300",t===c.Default&&"text-neutral-600 dark:text-neutral-300"),children:[t===c.Add?a.jsx(Ve,{className:"h-3 mr-2"}):t===c.Remove?a.jsx(Ze,{className:"h-3 mr-2"}):a.jsx(xe,{className:"h-4 mr-2"}),a.jsx("small",{className:"w-full text-xs whitespace-nowrap text-ellipsis overflow-hidden",children:r})]},r))})}function jr({changes:e=[]}){const t=ze(r=>r.models);return a.jsx("ul",{children:e.map(r=>a.jsx("li",{className:"text-secondary-500 dark:text-primary-500 mt-1",children:a.jsx(T,{children:({open:n})=>a.jsxs(a.Fragment,{children:[a.jsxs(T.Button,{className:"flex items-center w-full justify-between rounded-lg text-left",children:[a.jsx(V,{className:"w-full",model_name:r.model_name}),(()=>{const o=n?pe:fe;return a.jsx(o,{className:"max-h-[1rem] min-w-[1rem] dark:text-primary-500"})})()]}),a.jsxs(T.Panel,{className:"text-sm px-4 mb-4 overflow-hidden",children:[me(r.indirect)&&a.jsx(Ce,{type:"indirect",models:r.indirect}),a.jsx(ie,{className:"border-neutral-200 mt-2"}),a.jsx(kr,{change:r}),a.jsx(ie,{className:"border-neutral-200 mt-2"}),a.jsxs("div",{className:"flex flex-col w-full h-full overflow-hidden overflow-y-auto hover:scrollbar scrollbar--vertical scrollbar--horizontal",children:[(r==null?void 0:r.diff)!=null&&a.jsx(ye,{diff:r==null?void 0:r.diff}),(()=>{const o=t.get(r.model_name);return o==null?a.jsx(a.Fragment,{}):a.jsx("div",{className:"h-[16rem] bg-theme-lighter rounded-xl p-2",children:a.jsx(We,{withColumns:!1,children:a.jsx(He,{model:o,highlightedNodes:{"border-4 border-secondary-500":[o.name],"border-4 border-warning-500":r.indirect??[],"*":["opacity-50 hover:opacity-100"]}},o.id)})})})()]})]})]})})},r.model_name))})}function kr({change:e}){var o;const t=vr(),{change_categorization:r,categories:n}=ke();return a.jsx(H,{className:"flex flex-col mt-2",value:((o=r.get(e.model_name))==null?void 0:o.category)??e.change_category,onChange:i=>{t({type:h.Category,category:i,change:e})},children:n.map(i=>a.jsx(H.Option,{value:i.value,className:()=>y("relative flex rounded-md"),children:({checked:d})=>a.jsxs("div",{className:y("text-sm flex items-center px-2 py-1 w-full rounded-lg",d?"text-secondary-500 dark:text-primary-300":"text-prose"),children:[a.jsx("div",{className:"mt-[0.125rem] mr-2 border-2 border-neutral-400 min-w-[1rem] h-4 rounded-full flex justify-center items-center",children:d&&a.jsx("span",{className:"inline-block w-2 h-2 bg-secondary-500 dark:bg-primary-300 rounded-full"})}),a.jsxs("div",{children:[a.jsx(H.Label,{as:"p",children:i.name}),a.jsx(H.Description,{as:"span",className:"text-xs text-neutral-500",children:i.description})]})]})},i.name))})}function Cr({changes:e=[]}){return a.jsx("ul",{children:e.map(t=>a.jsx("li",{className:"text-warning-700 dark:text-warning-500",children:me(t.direct)?a.jsx(T,{children:({open:r})=>a.jsxs(a.Fragment,{children:[a.jsxs(T.Button,{className:"flex items-center w-full justify-between rounded-lg text-left",children:[a.jsx(V,{model_name:t.model_name}),(()=>{const n=r?pe:fe;return a.jsx(n,{className:"max-h-[1rem] min-w-[1rem] dark:text-primary-500 mt-0.5"})})()]}),a.jsx(T.Panel,{className:"text-sm px-4 mb-4",children:a.jsx(Ce,{type:"direct",models:t.direct??[]})})]})}):a.jsx(V,{model_name:t.model_name})},t.model_name))})}function V({model_name:e,className:t}){var o;const{change_categorization:r}=ke(),n=(o=r.get(e))==null?void 0:o.category;return a.jsxs("div",{className:y("flex items-center font-bold",t),children:[a.jsx(xe,{className:"h-4 mr-2"}),a.jsx("small",{className:"w-full text-xs whitespace-nowrap text-ellipsis overflow-hidden",children:e}),n!=null&&a.jsx("span",{className:"ml-2 text-xs px-1 bg-neutral-400 text-neutral-100  dark:bg-neutral-400 dark:text-neutral-800 rounded whitespace-nowrap mr-2",children:n.name})]})}function Ce({type:e,models:t}){return a.jsx("ul",{className:y("mt-2 ml-4",e==="indirect"&&"text-warning-700 dark:text-warning-500",e==="direct"&&"text-secondary-500 dark:text-primary-500"),children:t.map(r=>a.jsxs("li",{className:"flex",children:[a.jsx("span",{className:"h-3 w-3 border-l-2 border-b-2 inline-block mr-2"}),r]},r))})}function ye({diff:e}){return a.jsx("div",{className:"my-4 bg-dark-lighter rounded-lg overflow-hidden",children:a.jsx("pre",{className:"p-4 text-primary-100 max-h-[30vh] overflow-auto hover:scrollbar scrollbar--vertical scrollbar--horizontal",children:e.split(`
`).map((t,r)=>a.jsx("p",{className:y(t.startsWith("+")&&"text-success-500 bg-success-500/10 px-2",t.startsWith("-")&&"text-danger-500 bg-danger-500/10 px-2",t.startsWith("@@")&&"text-primary-300 my-5 px-2"),children:t},`${t}-${r}`))})})}B.Default=Rr;B.Direct=jr;B.Indirect=Cr;B.Diff=ye;B.Title=V;export{Or as C,c as E,er as F,he as H,nr as M,B as P,vr as a,h as b,Dr as c,ke as u};
