import{r as u,o as q,j as l,c as w,s as R,z as J,h as d,R as Q,P as V,q as W}from"./index-0556dabd.js";import{I as C}from"./Input-da5e8505.js";import{w as S,x as X}from"./transition-d6609a11.js";const g="",k=40;function F(t,n){return t.replaceAll(n,`<b class="inline-block text-brand-500 bg-brand-10">${n}</b>`)}function Z(t=[],n){return n=n.toLocaleLowerCase(),t.reduce((a,[r,s])=>{const o=s.toLocaleLowerCase().indexOf(n);if(o<0)return a;if(s.length<k)a.push([r,s]);else{const c=Math.max(0,o-k),f=Math.min(s.length-1,o+n.length+k);a.push([r,`${c>0?"...":g}${s.slice(c,f)}${f<s.length?"...":g}`])}return a},[])}function $({nativeEvent:t}){return window.TouchEvent?t instanceof TouchEvent:"touches"in t}function K(t){return t.nativeEvent instanceof MouseEvent}function B(t){const n=u.useRef(null),a=u.useRef(t);return u.useLayoutEffect(()=>{a.current=t}),u.useEffect(()=>{const r=s=>{const o=n.current;o&&!o.contains(s.target)&&a.current(s)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}},[]),n}function se(t,n={}){const{threshold:a=400,onStart:r,onFinish:s,onCancel:o}=n,c=u.useRef(!1),f=u.useRef(!1),h=u.useRef();return u.useMemo(()=>{if(typeof t!="function")return{};const x=m=>{!K(m)&&!$(m)||(r&&r(m),f.current=!0,h.current=setTimeout(()=>{t(m),c.current=!0},a))},p=m=>{!K(m)&&!$(m)||(c.current?s&&s(m):f.current&&o&&o(m),c.current=!1,f.current=!1,h.current&&window.clearTimeout(h.current))};return{...{onMouseDown:x,onMouseUp:p,onMouseLeave:p},...{onTouchStart:x,onTouchEnd:p}}},[t,a,o,s,r])}const z=Q.forwardRef(function({value:n,type:a,placeholder:r,size:s=d.md,autoFocus:o=!1,onInput:c,onKeyDown:f,className:h,disabled:x},p){return l.jsx(C,{className:h,size:s,children:({className:L})=>l.jsx(C.Textfield,{ref:p,type:a,className:w(L,"w-full"),autoFocus:o,placeholder:r,value:n,onInput:c,onKeyDown:f,disabled:x})})});function oe({list:t,size:n=d.md,searchBy:a,displayBy:r,descriptionBy:s,onSelect:o,to:c,placeholder:f="Search",autoFocus:h=!1,showIndex:x=!0,isFullWidth:p=!1,isLoading:L=!1,disabled:N=!1,direction:m="bottom",className:O,onInput:T}){const U=q(),A=u.useRef(null),D=u.useRef(null),G=u.useMemo(()=>t.map(e=>[e,e[a]]),[t,a]),[y,M]=u.useState(g),[v,E]=u.useState(0),Y=B(()=>{M(g)}),I=y!==g,b=Z(G,y);function P(){var e;E(0),M(g),(e=D.current)==null||e.focus()}function H(){var i;const e=(i=b[v])==null?void 0:i[0];R(e)||(R(c)?o==null||o(e):U(c(e)),P())}return l.jsx("div",{className:w("p-1 relative",N&&"opacity-50 cursor-not-allowed",O),ref:Y,onKeyDown:e=>{e.key==="Escape"&&P()},children:l.jsxs(S,{className:"relative flex w-full",children:[l.jsx(S.Button,{ref:D,as:z,className:w("w-full !m-0",N&&"pointer-events-none"),type:"search",size:n,value:y,placeholder:f,onInput:e=>{const i=e.target.value.trim();M(i),T==null||T(i)},onKeyDown:e=>{var i;(e.key==="ArrowDown"||e.key==="ArrowUp")&&((i=A.current)==null||i.focus())},autoFocus:h,disabled:N}),l.jsx(X,{show:I,as:u.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:l.jsx(S.Panel,{static:!0,className:w("absolute z-50 right-0 transform cursor-pointer rounded-lg bg-theme border-2 border-neutral-200","p-2 bg-theme dark:bg-theme-lighter overflow-auto hover:scrollbar scrollbar--vertical scrollbar--horizontal shadow-2xl",m==="top"?"top-0":"bottom-10",n===d.sm&&"mt-7 max-h-[30vh]",n===d.md&&"mt-9 max-h-[40vh]",n===d.lg&&"mt-12 max-h-[50vh]",p?"w-full":"w-full max-w-[20rem]"),ref:A,onKeyDown:e=>{e.key==="ArrowUp"&&v>0&&E(v-1),e.key==="ArrowDown"&&v<b.length-1&&E(v+1),e.key==="Enter"&&(e.preventDefault(),H())},onMouseOver:e=>{e.stopPropagation();const i=e.target.closest('[role="menuitem"]');if(R(i))return;const j=Number(i.dataset.index);E(Number(j))},children:J(b)&&I?l.jsx("div",{className:w(n===d.sm&&"p-1",n===d.md&&"p-2",n===d.lg&&"p-3"),children:L?"Loading...":"No Results Found"},"not-found"):b.map(([e,i],j)=>l.jsx("div",{role:"menuitem","data-index":j,className:w("cursor-pointer rounded-lg",v===j&&"bg-neutral-5"),children:l.jsx(ee,{item:e,index:i,search:y,displayBy:r,descriptionBy:s,size:n,showIndex:x,onClick:_=>{_.stopPropagation(),_.preventDefault(),H()}})},e[a]))})})]})})}function ee({item:t,index:n,search:a,displayBy:r,descriptionBy:s,size:o,showIndex:c=!0,onClick:f}){return l.jsxs("div",{onClick:f,className:w("font-normal w-full overflow-hidden whitespace-nowrap overflow-ellipsis px-2",o===d.sm&&"text-xs py-1",o===d.md&&"text-sm py-2",o===d.lg&&"text-md py-3"),children:[c?l.jsxs(l.Fragment,{children:[l.jsx("span",{title:t[r],className:"font-bold",children:V(t[r],50,20)}),l.jsx("small",{className:"block text-neutral-600 italic overflow-hidden whitespace-nowrap overflow-ellipsis",dangerouslySetInnerHTML:{__html:F(n,a)}})]}):l.jsx("span",{title:t[r],className:"font-bold",dangerouslySetInnerHTML:{__html:F(t[r],a)}}),W(s)&&l.jsx("small",{className:"block text-neutral-600 italic overflow-hidden whitespace-nowrap overflow-ellipsis",children:t[s]})]})}export{oe as S,se as u};
