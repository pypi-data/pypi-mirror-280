var T="0.0.7",_={cur:0,en:0,zh:1};navigator.language==="zh-CN"?_.cur=_.zh:_.cur=_.en;function r(...u){return u[_.cur]}function g(u){u=u.toLowerCase();var e=null,a=Array.prototype.find;return a.call(document.styleSheets,d=>(e=a.call(d.cssRules,i=>i instanceof CSSStyleRule&&i.selectorText.toLowerCase()==u),e!=null)),e}var y={};async function w(u,e="get",a={},d=!0,i={},t=!1){let s={method:e,...i};if(e==="get"){let p=new URLSearchParams(a).toString();if(p.length>0&&(u+="?"+p),t&&(delete s.trycache,y.hasOwnProperty(u)))return y[u]}else s.headers=s.headers?s.headers:{},s.headers={"Content-Type":"application/json",...s.headers},s.body=JSON.stringify(a);d&&(s.headers={Authorization:"Bearer "+sessionStorage.elifeToken,...s.headers});const l=await fetch(u,s);if(l.status!==200)throw alert("HTTP error : "+l.status),"HTTP error : "+l.status;let o=await l.json();if(o.ret!=0&&o.ret>0)throw alert(o.msg),o.msg;return i.trycache&&(y[u]=o),o}class S{constructor(){this.subscribers=[],this.mustMsgList=[],this.ws=null,this.wsconnect(),this.ws_port=null}async wsconnect(){if(!this.ws_port){let d=await w("/api/get_ws_port","post",{cmd:"get_ws_port"});this.ws_port=d.ws_port}let e=`ws://${window.location.hostname}:${this.ws_port}/client`;var a=new WebSocket(e);a.onopen=d=>{console.log("ws connected ok."),document.getElementById("ws_connectiong_state").innerHTML="🛜";for(let i of this.mustMsgList)a.send(JSON.stringify(i,void 0,2));this.mustMsgList=[]},a.onmessage=d=>{try{let i=JSON.parse(d.data);for(let t of this.subscribers)t.handleWSMsg(i)}catch(i){console.log(i)}},a.onclose=d=>{setTimeout(i=>{this.wsconnect()},10),document.getElementById("ws_connectiong_state").innerHTML="⚠️"},a.onerror=d=>{console.log("Socket encountered error, closing socket"),a.close()},this.ws=a}sendMsg(e,a=!1){return!this.ws||this.ws.readyState!==1?a?(this.mustMsgList.push(e),2):1:(this.ws.send(JSON.stringify(e,void 0,2)),0)}register(e){this.subscribers.indexOf(e)<0&&this.subscribers.push(e)}unregister(e){const a=this.subscribers.indexOf(e);a>=0&&this.subscribers.splice(a,1)}}const c=new S;class C{constructor(){this.subscribers=[],this.needCallPrism=!1,this.show_result_details=!0,this.curTest={showAddTest:!1,addTest_keys:[],addTest_tags:[],addTest_nodeIds:[],name:"--",results:[],start_time:"--",end_time:"--",duration:0,stats:{total:0,deselected:0,rtotal:0,executed:0,passed:0,failed:0,skipped:0,xfailed:0,xpassed:0,st_error:0,st_ok:0},collect_errors:[],server_working_dir:"--",haveRun:!1,testAborted:!1,pytest_cases_tree:{},pytest_cases_tree_curFile:null}}register(e){this.subscribers.indexOf(e)<0&&this.subscribers.push(e)}unregister(e){const a=this.subscribers.indexOf(e);a>=0&&this.subscribers.splice(a,1)}broadcast(e,a){for(let d of this.subscribers)d.handleDCMsg(e,a)}}const n=new C;function h(u="#cddee6"){return React.createElement("div",{style:{borderRight:`1px solid ${u}`}})}function v(u="#cddee6"){return React.createElement("div",{style:{borderBottom:`1px solid ${u}`}})}export default class N extends React.Component{constructor(e){super(e),this.state={showWhat:"runningSession",curHistoryReport:null,report:null},this.intervalId=setInterval(()=>{n.needCallPrism&&(Prism.highlightAll(),n.needCallPrism=!1)},2e3),this._setDocLinkLang()}_setDocLinkLang(){let e=document.getElementById("doc-link");e.innerHTML=r("Guide","使用说明"),e.href=r("https://jcyrss.github.io/pytest-assist","https://www.byhy.net/auto/pyatframework/pytest-assist/")}handleWSMsg(e){switch(e.event){case"term":console.log(e.data);break;case"result.get_server_version":if(console.log("system lang idx is",e.langIdx),e.langIdx!==_.cur&&(_.cur=e.langIdx,this._setDocLinkLang(),this.forceUpdate()),e.version!==T){async function d(i){await fetch(i,{headers:{Pragma:"no-cache",Expires:"-1","Cache-Control":"no-cache"}}),window.location.href=i,window.location.reload()}alert(r("The Browser cached page is old, click OK for auto refreshing.","浏览器缓存网页过时，点击确定后自动化刷新到新版本")),d(window.location.href)}break;case"result.get_history_report":let a=JSON.parse(e.content);this.setState({report:a}),setTimeout(()=>{Prism.highlightAll()},1e3);break}}componentDidMount(){c.register(this);let e=c.sendMsg({event:"get_server_version"},!0)}componentWillUnmount(){c.unregister(this)}showWhatChanged(e,a){this.setState({showWhat:e,curHistoryReport:a})}render(){return React.createElement(React.Fragment,null,React.createElement(x,{showWhatChanged:(e,a)=>{this.showWhatChanged(e,a)},showWhat:this.state.showWhat,curHistoryReport:this.state.curHistoryReport}),this.state.showWhat==="runningSession"?React.createElement(M,null):React.createElement(R,{report:this.state.report}))}}class x extends React.Component{constructor(e){super(e),this.state={history_reports:[],select_rules:[]}}handleWSMsg(e){let a;switch(e.event){case"result.list_history_reports":this.setState({history_reports:e.items});break;case"result.deleteall_history_reports":e.ret===0&&this.setState({history_reports:[]});break;case"result.delete_this_history_report":e.ret===0&&c.sendMsg({event:"list_history_reports"});break;case"result.list_select_rules":this.setState({select_rules:e.items});break;case"result.deleteall_select_rules":e.ret===0&&this.setState({select_rules:[]});break;case"result.delete_this_select_rule":e.ret===0&&c.sendMsg({event:"list_select_rules"});break;case"result.save_select_rule":e.ret===0?this.setState({select_rules:e.items}):alert(e.info);break}}componentDidMount(){c.register(this),c.sendMsg({event:"list_history_reports"},!0),c.sendMsg({event:"list_select_rules"},!0)}componentWillUnmount(){c.unregister(this)}render(){return React.createElement("div",{className:"menu"},React.createElement("div",null,React.createElement("span",{className:"ongoing-test btn-no-border",style:{fontSize:".9rem"},onClick:e=>{this.props.showWhatChanged("runningSession")}},r("Ongoing Testing","当前测试")),this.props.showWhat==="runningSession"?React.createElement("span",null,"💎"):null),v(),React.createElement("div",null,React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},React.createElement("span",{style:{padding:".2rem .5rem",fontSize:".9rem"},title:r("Holding Shift key and double click one item below to delete it","按shift双击下方记录，可以删除"),className:"btn-no-border"},r("History Records","结果记录")),React.createElement("span",{className:"btn-no-border",title:r("Refresh","刷新"),onClick:e=>{this.setState({history_reports:[]}),c.sendMsg({event:"list_history_reports"})}},"🔄️"),this.state.history_reports.length>0?React.createElement("span",{className:"btn-no-border",onClick:e=>{confirm(r("Delete all records?","确定要删除所有测试结果吗？"))&&c.sendMsg({event:"deleteall_history_reports"})}},r("Del All","全部删除")):null),React.createElement("div",{className:"history-report"},this.state.history_reports.map(e=>React.createElement("div",{className:"hlayout btn-no-border color2",key:e,onDoubleClick:a=>{if(a.shiftKey)c.sendMsg({event:"delete_this_history_report",name:e}),this.props.curHistoryReport===e&&this.props.showWhatChanged("runningSession");else{if(this.props.curHistoryReport===e)return;c.sendMsg({event:"get_history_report",name:e}),this.props.showWhatChanged("historySession",e)}}},React.createElement("span",{style:{margin:".2rem 1rem"}},e),this.props.curHistoryReport===e?React.createElement("span",null,"💎"):null)))),v(),this.genGroup(r("Test Params","参数记录"),"select_rule","select_rules",this.state.select_rules,e=>{this.props.showWhatChanged("runningSession"),n.curTest.showAddTest=!0,c.sendMsg({event:"get_select_rule",name:e})},"color3"))}genGroup(e,a,d,i,t,s="color2"){return React.createElement("div",null,React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},React.createElement("span",{style:{padding:".2rem .5rem",fontSize:".9rem"},title:r("Holding Shift key and double click one item below to delete it","按shift双击下方记录，可以删除"),className:`btn-no-border ${s}`},e),React.createElement("span",{className:"btn-no-border",title:r("Refresh","刷新"),onClick:l=>{this.setState({[d]:[]}),c.sendMsg({event:`list_${d}`})}},"🔄️"),i.length>0?React.createElement("span",{className:`btn-no-border ${s}`,onClick:l=>{confirm(r(`Delete all ${e}？`,`确定要删除所有${e}吗？`))&&c.sendMsg({event:`deleteall_${d}`})}},r("Del All","全部删除")):null),React.createElement("div",{className:d},i.map(l=>React.createElement("div",{className:"hlayout btn-no-border color2",key:l,onDoubleClick:o=>{o.shiftKey?c.sendMsg({event:`delete_this_${a}`,name:l}):t(l)}},React.createElement("span",{style:{margin:".2rem 1rem"}},l)))))}}class M extends React.Component{resetRunningSession(){let e=n.curTest;e.name="--",e.results.length=0,e.start_time="--",e.end_time="--",e.duration=0,e.stats={deselected:0,rtotal:0,executed:0,passed:0,failed:0,skipped:0,xfailed:0,xpassed:0,st_error:0},e.collect_errors=[],e.server_working_dir="--",e.testAborted=!1}handleWSMsg(e){let a=n.curTest.results;switch(e.event){case"result.get_select_rule":let d=JSON.parse(e.content);n.curTest.showAddTest=!0,n.curTest.addTest_keys=d.keys,n.curTest.addTest_tags=d.tags,n.curTest.addTest_nodeIds=d.nodeIds,document.getElementById("addTest_name").value=d.name,document.getElementById("addTest_keys").value="",document.getElementById("addTest_tags").value="";break;case"result.collect_cases":n.curTest.pytest_cases_tree=e.caseTree;break;case"result.open_new_test":e.ret!==0&&alert(e.info);break;case"result.abort_testing":e.ret===0?n.curTest.testAborted=!0:alert(e.info);break;case"run-test-loop":this.resetRunningSession(),n.curTest.haveRun=!0,n.curTest.name=e.name,n.curTest.start_time=e.start_time,n.curTest.server_working_dir=e.working_dir,n.curTest.stats=e.stats,document.getElementById("test-progress").max=e.stats.rtotal,document.getElementById("test-progress").value=0;break;case"pytest_terminal_summary":n.curTest.stats=e.stats,n.curTest.collect_errors=e.collect_errors;break;case"test-session-end":n.curTest.end_time=e.end_time,n.curTest.duration=e.duration,c.sendMsg({event:"list_history_reports"});break;case"one-case-begin":break;case"one-case-end":a.push(e.result),n.curTest.haveRun=!0,n.curTest.stats=e.stats,n.needCallPrism=!0,document.getElementById("test-progress").max=e.stats.rtotal,document.getElementById("test-progress").value=e.stats.executed,n.curTest.results[0].idx!=0&&(console.log("send query_current_testing_state"),c.sendMsg({event:"query_current_testing_state",toIdx:n.curTest.results[0].idx}));break;case"result.current-testing-state":e.results&&(n.curTest.name=e.name,n.curTest.working_dir=e.working_dir,n.curTest.start_time=e.start_time,a.unshift(...e.results));break}this.forceUpdate()}async componentDidMount(){c.register(this)}componentWillUnmount(){c.unregister(this)}render(){return React.createElement("div",{className:"test-session"},this.sectionAddTest(n.curTest),this.sectionSummary(n.curTest),n.curTest.haveRun?React.createElement(b,{rData:n.curTest}):null)}sectionAddTest(e){const a=(t,s)=>{if(t.key==="Enter"){if(s.indexOf(t.target.value)>=0)return;s.push(t.target.value),t.target.value="",this.forceUpdate()}},d=t=>{n.curTest.addTest_nodeIds.indexOf(t)>=0||(n.curTest.addTest_nodeIds.push(t),this.forceUpdate())},i=t=>{let s=JSON.parse(JSON.stringify(n.curTest.addTest_keys)),l=JSON.parse(JSON.stringify(n.curTest.addTest_tags)),o=document.getElementById("addTest_keys").value.trim();return o&&s.push(o),o=document.getElementById("addTest_tags").value.trim(),o&&l.push(o),{name:document.getElementById("addTest_name").value.trim(),keys:s,tags:l,nodeIds:n.curTest.addTest_nodeIds}};return React.createElement(React.Fragment,null,React.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-evenly",backgroundColor:"#fff8f0"}},React.createElement("span",{className:"btn-no-border color2",style:{fontSize:".92rem"},onClick:t=>{n.curTest.showAddTest||(n.curTest.showAddTest=!0,this.forceUpdate(),c.sendMsg({event:"collect_cases"}))}},r("Test Params Setting","测试参数设置")," "),React.createElement("div",{className:"hlayout",style:{gap:"2rem"}},React.createElement("span",{className:"btn-no-border color2",onClick:t=>{confirm(r("Abort Testing?","确定要 中止测试 吗？"))&&c.sendMsg({event:"abort_testing"})}},r("Abort Testing","中止测试")),React.createElement("span",{className:"btn-no-border color2",onClick:t=>{confirm(r("Force Abort Testing?","确定要 强制停止测试 吗？"))&&c.sendMsg({event:"force_abort_testing"})}},r("Force Abort","强制停止测试")),React.createElement("span",{className:"btn-no-border color2",onClick:t=>{confirm(r("Shut Down Pytest Assist?","确定要 关闭后台 吗？"))&&c.sendMsg({event:"kill_pytest_assist"})}},r("Shut Down","关闭后台")))),n.curTest.showAddTest?React.createElement("div",{className:"add-test-zone"},React.createElement("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",background:"aliceblue"}},React.createElement("span",{className:"btn-no-border",style:{marginRight:"5rem"},onClick:t=>{let s=i();c.sendMsg({event:"open_new_test",...s,saveRecord:document.getElementById("saveRecord").checked}),this.resetRunningSession(),this.forceUpdate()}},r("Run Testing","执行测试")," "),React.createElement("span",{className:"btn-no-border color2",onClick:t=>{let s=i();c.sendMsg({event:"save_select_rule",...s})}},r("Save Params","保存参数")," "),React.createElement("span",{className:"btn-no-border color2",onClick:t=>{n.curTest.showAddTest=!1,this.forceUpdate()}},r("Cancel","收起界面")," ")),React.createElement("div",{className:"entry"},React.createElement("span",null,r("Test Name","测试名称")),React.createElement("input",{id:"addTest_name",onBlur:t=>{t.target.value=t.target.value.replace(/[^-\w\p{L}]/gu,"")}}),React.createElement("div",{style:{display:"flex",alignItems:"center",marginLeft:"2rem"}},React.createElement("span",null,r("Save Result","保存测试记录")),React.createElement("input",{type:"checkbox",id:"saveRecord",defaultChecked:!0}))),React.createElement("div",{className:"entry"},React.createElement("span",null,r("Keyword Filters","关键字过滤")),React.createElement("input",{id:"addTest_keys",onKeyDown:t=>a(t,n.curTest.addTest_keys)}),React.createElement("div",{className:"items"},n.curTest.addTest_keys.map((t,s)=>React.createElement("span",{className:"btn-border",key:t,onClick:l=>{n.curTest.addTest_keys.splice(s,1),this.forceUpdate()}},t)))),React.createElement("div",{className:"entry"},React.createElement("span",null,r("Marker Filters","标签过滤")),React.createElement("input",{id:"addTest_tags",onKeyDown:t=>a(t,n.curTest.addTest_tags)}),React.createElement("div",{className:"items"},n.curTest.addTest_tags.map((t,s)=>React.createElement("span",{className:"btn-border",key:t,onClick:l=>{n.curTest.addTest_tags.splice(s,1),this.forceUpdate()}},t)))),React.createElement("div",{className:"entry",style:{alignItems:"baseline"}},React.createElement("div",{className:"hlayout"},React.createElement("span",null,r("Target Tests","目标文件/用例")),React.createElement("span",{className:"btn-no-border",title:r("Refresh","刷新"),onClick:t=>{e.pytest_cases_tree={},this.forceUpdate(),c.sendMsg({event:"collect_cases"})}},"🔄️")),React.createElement("div",{className:"tree"},React.createElement("div",{className:"files"},(()=>{let t=[];for(let[s,l]of Object.entries(e.pytest_cases_tree)){let o=React.createElement("span",{className:e.pytest_cases_tree_curFile===s?"tree-node-file cur-test-file":"tree-node-file",key:s,onClick:p=>{e.pytest_cases_tree_curFile=s,this.forceUpdate()},onDoubleClick:p=>{d(s)}},s);t.push(o)}return t})()),e.pytest_cases_tree_curFile&&e.pytest_cases_tree.hasOwnProperty(e.pytest_cases_tree_curFile)?React.createElement("div",{className:"funcs"},(()=>{let t=[],s=e.pytest_cases_tree_curFile,l=e.pytest_cases_tree[e.pytest_cases_tree_curFile];for(let[o,p]of Object.entries(l.sub)){let m=`${s}::${o}`;if(p.type==="func")t.push(React.createElement("span",{className:"tree-node-func1",key:o,onDoubleClick:f=>{d(m)}},o));else{t.push(React.createElement("span",{className:"tree-node-class",key:o,onDoubleClick:f=>{d(m)}},o));for(let[f,I]of Object.entries(p.sub))t.push(React.createElement("span",{className:"tree-node-func2",key:f,onDoubleClick:E=>{let k=`${m}::${f}`;d(k)}},f))}}return t})()):null),React.createElement("div",{className:"items"},n.curTest.addTest_nodeIds.map((t,s)=>React.createElement("span",{className:"btn-border",key:t,onClick:l=>{n.curTest.addTest_nodeIds.splice(s,1),this.forceUpdate()}},t))))):null)}sectionSummary(e){return React.createElement("div",{className:"test-summary-zone",style:{visibility:e.haveRun?"visible":"hidden"}},React.createElement("div",{className:"left prespace"},React.createElement("div",null,r("Test  Name","测试名称")," : ",e.name),React.createElement("div",null,r("Start Time","开始时间")," : ",e.start_time),React.createElement("div",null,r("End   Time","结束时间")," : ",e.end_time," ",e.duration?` ⏱️= ${e.duration.toFixed(0)} ${r("Seconds","秒")}`:null)),React.createElement("div",{className:"mid prespace"},React.createElement("div",null,r("Working Dir","工作目录")," : ",e.server_working_dir),React.createElement("div",{style:{display:"flex",gap:".8rem"}},React.createElement("span",null,r("Total","总计")," : ",e.stats.rtotal),h(),React.createElement("span",null,r("Executed","已执行")," : ",e.stats.executed),h(),React.createElement("span",null,r("Left","剩余")," : ",e.stats.rtotal-e.stats.executed)),React.createElement("div",{style:{display:"flex",gap:"1rem",alignItems:"center"}},React.createElement("label",{for:"test-progress"},r("Progress","测试进度")),React.createElement("progress",{id:"test-progress",value:"0",max:"0"}),e.testAborted?React.createElement("span",{style:{color:"red"}},r("Aborted","已中止")):null,!e.testAborted&&e.duration?React.createElement("span",{style:{color:"#2196f3"}},r("Done","已完毕")):null)))}}class R extends React.Component{async componentDidMount(){c.register(this)}componentWillUnmount(){c.unregister(this)}handleWSMsg(e){switch(e.event){case"result.export_this_history_report":if(e.ret!==0){alert(e.msg);return}window.open(e.link,"_self");break}}render(){let e=this.props.report;return React.createElement("div",{className:"test-session",style:{backgroundColor:"#f1f8fa"}},this.sectionSummary(e),React.createElement(b,{rData:e}))}sectionSummary(e){return e?React.createElement("div",{className:"test-summary-zone"},React.createElement("div",{className:"left prespace"},React.createElement("div",null,r("Test  Name","测试名称")," : ",e.name),React.createElement("div",null,r("Start Time","开始时间")," : ",e.start_time),React.createElement("div",null,r("End   Time","结束时间")," : ",e.end_time," ",` ⏱️= ${e.duration.toFixed(0)} ${r("Seconds","秒")}`)),React.createElement("div",{className:"mid"}),React.createElement("div",{className:"right"},React.createElement("span",{className:"btn-no-border",onClick:a=>{confirm(r("Export to local?","确定要导出报告吗？"))&&c.sendMsg({event:"export_this_history_report",name:e.name})}},r("Export","导出报告")))):null}}class b extends React.Component{constructor(e){super(e),this.state={showPassed:!0,showFailed:!0,showStErr:!0}}filterRuleOK(e){return!(!this.state.showPassed&&e.ret_c==="passed"||!this.state.showFailed&&e.ret_c==="failed"||!this.state.showStErr&&(e.ret_s==="error"||e.ret_t==="error"))}render(){let e=this.props.rData;function a(t){let s="";return t.ret_s==="ok"?t.ret_c==="passed"?t.ret_t==="ok"?s="passed":s="t_error":t.ret_c==="failed"&&(s="failed"):s="s_error",s}function d(t){return t.map(s=>s.reprtext||s.output||s.logs?React.createElement("div",{className:"report "+s.when,key:s.when},React.createElement("div",{className:"report-title"},React.createElement("div",null,s.when),React.createElement("div",null,s.duration)),s.logs&&s.logs.length>0?React.createElement("div",{className:"logs"},s.logs.map(l=>{const o=l.t;return o==="img"?React.createElement("img",{src:`/.pytest_assist/records/${e.name}/imgs/${l.src}`}):o==="txt"?React.createElement("span",{style:{color:l.c?l.c:"",fontWeight:l.w?l.w:""}},l.s):null})):null,s.reprtext?React.createElement("div",{className:"reprtext"},React.createElement("pre",null,React.createElement("code",{className:"language-py"},s.reprtext))):null,s.output?React.createElement("div",{className:"output"},s.output):null):null)}if(!e)return null;let i=e.stats;return React.createElement("div",{className:"test-result-zone"},React.createElement("div",{style:{display:"flex",gap:"3rem",justifyContent:"center",backgroundColor:"#ecf5fc"}},React.createElement("div",{style:{display:"flex",marginLeft:"2rem",gap:"1rem"}},React.createElement("span",null,r("Total","总计")," : ",i.rtotal," "),h("#6c7076"),i.deselected?React.createElement(React.Fragment,null,React.createElement("span",null,r("Deselected","过滤掉")," : ",i.deselected),h("#6c7076")):null,i.passed?React.createElement(React.Fragment,null,React.createElement("span",null,r("Passed","通过")," : ",i.passed),React.createElement("input",{type:"checkbox",defaultChecked:!0,onChange:t=>{this.setState({showPassed:t.target.checked}),t.target.checked&&(n.needCallPrism=!0)}}),h("#6c7076")):null,i.failed?React.createElement(React.Fragment,null,React.createElement("span",{style:{color:i.failed===0?"":"red"}},r("Failed","不通过")," : ",i.failed),React.createElement("input",{type:"checkbox",defaultChecked:!0,onChange:t=>{this.setState({showFailed:t.target.checked}),t.target.checked&&(n.needCallPrism=!0)}}),h("#6c7076")):null,i.st_error?React.createElement(React.Fragment,null,React.createElement("span",{style:{color:i.st_error===0?"":"#9e438b"}},r("Errors","st错误")," : ",i.st_error),React.createElement("input",{type:"checkbox",defaultChecked:!0,onChange:t=>{this.setState({showStErr:t.target.checked}),t.target.checked&&(n.needCallPrism=!0)}}),h("#6c7076")):null,i.skipped?React.createElement(React.Fragment,null,React.createElement("span",null,r("Skipped","忽略")," : ",i.skipped),h("#6c7076")):null,i.xfailed?React.createElement(React.Fragment,null,React.createElement("span",null,r("Expected failures","预期不通过")," : ",i.xfailed)):null),React.createElement("div",{style:{display:"flex",marginLeft:"2rem"}},React.createElement("span",null,r("Show Details","显示详情")),React.createElement("input",{type:"checkbox",id:"show_details",defaultChecked:n.show_result_details,onClick:t=>{let s=document.getElementById("show_details").checked;n.show_result_details=s;let l=s?"flex":"none",o=g(".test-result .details");o.style.display=l;for(let p of document.querySelectorAll(".test-result .details"))p.style.display=l}}))),e.collect_errors&&e.collect_errors.length?React.createElement("div",null,React.createElement("div",{style:{color:"#be2d2d",marginBottom:"1rem",fontWeight:"bold"}},r("Collection Errors:","搜集用例出错：")),e.collect_errors.map((t,s)=>React.createElement("div",{key:s,style:{color:"#be2d2d",whiteSpace:"pre-wrap"}},t))):null,e.results?e.results.map(t=>this.filterRuleOK(t)&&React.createElement("div",{className:"test-result",key:t.idx},React.createElement("div",{className:"test-nodeid "+a(t),onClick:s=>{let l=g(".test-result .details").style.display,o=s.target.nextElementSibling.style,p=o.display;p==="none"?o.display="flex":p==="flex"?o.display="none":p===""&&(o.display=l==="flex"?"none":"flex")}},"  ",t.nodeid),React.createElement("div",{className:"details"},d(t.sct)))):null)}}
