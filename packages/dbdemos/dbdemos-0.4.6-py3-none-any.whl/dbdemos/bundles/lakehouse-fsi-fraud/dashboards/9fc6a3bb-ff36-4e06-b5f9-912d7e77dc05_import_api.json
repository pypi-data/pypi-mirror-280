{
    "queries": [
        {
            "id": "15b04977-a1a0-4039-aa3e-8b6eb730ffcb",
            "name": "dbdemos - fraud_detection_toporiginaccount",
            "description": null,
            "query": "select * from (\n    select nameOrig , count(1) as nbTransactions \n    from dbdemos.fsi_fraud_detection.gold_transactions\n    join (--just getting the last 30 days\n        select max(step)-(24*30) windowStart, max(step) windowEnd \n        from dbdemos.fsi_fraud_detection.gold_transactions\n    ) on step >= windowStart and step <= windowEnd\n    where is_fraud\n    group by nameOrig\n) \norder by nbTransactions desc\nlimit 1",
            "options": {
                "parent": "folders/1580401252621742",
                "apply_auto_limit": false,
                "folder_node_status": "ACTIVE",
                "folder_node_internal_name": "tree/1807491138065372",
                "visualization_control_order": [],
                "parameters": []
            },
            "visualizations": [
                {
                    "id": "d008ccc9-7460-4594-aa68-9cb5e444eb21",
                    "type": "TABLE",
                    "name": "Results",
                    "description": "",
                    "options": {
                        "version": 2
                    },
                    "query_plan": null
                },
                {
                    "id": "ec69538e-eb38-4699-9e3d-9274377ee0a5",
                    "type": "COUNTER",
                    "name": "Top Fraud Origin",
                    "description": "",
                    "options": {
                        "counterLabel": "",
                        "counterColName": "nameOrig",
                        "rowNumber": 1,
                        "targetRowNumber": 1,
                        "stringDecimal": 0,
                        "stringDecChar": ".",
                        "stringThouSep": ",",
                        "tooltipFormat": "0,0.000",
                        "targetColName": "nbTransactions",
                        "condensed": true,
                        "withRowNumber": true
                    },
                    "query_plan": null
                }
            ]
        },
        {
            "id": "996b2458-fc26-4bd7-af44-4c8ee572ba09",
            "name": "dbdemos - fraud_detection_sankey_nbpercountry",
            "description": null,
            "query": "select countryOrig , countryDest , type, value from (\n    select countryOrig , countryDest , type, count(amount ) as value from dbdemos.fsi_fraud_detection.gold_transactions\n    where amount > 350000\n    group by countryOrig , countryDest ,type\n) order by value desc\nlimit 20\n\n--in terms of number of transactions\n--russia making / receiving more transactions > 350000, than othr countries\n--most these transactions are transfer\n",
            "options": {
                "parent": "folders/1580401252621742",
                "apply_auto_limit": false,
                "folder_node_status": "ACTIVE",
                "folder_node_internal_name": "tree/1807491138065371",
                "visualization_control_order": [],
                "parameters": []
            },
            "visualizations": [
                {
                    "id": "12fe2384-d24f-49c3-9b44-a17d1cffddd1",
                    "type": "SANKEY",
                    "name": "Sankey 1",
                    "description": "",
                    "options": {},
                    "query_plan": null
                },
                {
                    "id": "6382a40a-6d31-441b-af93-5fba47e3064e",
                    "type": "TABLE",
                    "name": "Results",
                    "description": "",
                    "options": {
                        "version": 2
                    },
                    "query_plan": null
                }
            ]
        },
        {
            "id": "2f5f9186-3f68-4328-b11c-a5c8d2e15d89",
            "name": "dbdemos - fraud_detection_30dcount",
            "description": null,
            "query": "select ts, count(1) nbFraudTransactions, sum(amount) sumFraudTransactions--, label \nfrom(\n    select from_unixtime(unix_timestamp(current_timestamp()) + (step * 3600)) ts, amount--, label\n    from dbdemos.fsi_fraud_detection.gold_transactions\n    join (--just getting the last 30 days\n        select max(step)-(24*30) windowStart, max(step) windowEnd \n        from dbdemos.fsi_fraud_detection.gold_transactions\n    ) on step >= windowStart and step <= windowEnd\n    where is_fraud\n) group by ts--, label\norder by ts",
            "options": {
                "parent": "folders/1580401252621742",
                "apply_auto_limit": false,
                "folder_node_status": "ACTIVE",
                "folder_node_internal_name": "tree/1807491138065370",
                "visualization_control_order": [],
                "parameters": []
            },
            "visualizations": [
                {
                    "id": "3319afb7-9789-43db-88f2-1e858c342de2",
                    "type": "CHART",
                    "name": "Fraud over time",
                    "description": "",
                    "options": {
                        "version": 2,
                        "globalSeriesType": "scatter",
                        "sortX": true,
                        "sortY": true,
                        "legend": {
                            "traceorder": "normal"
                        },
                        "xAxis": {
                            "type": "-",
                            "labels": {
                                "enabled": true
                            },
                            "title": {
                                "text": "Hour (30 days)"
                            }
                        },
                        "yAxis": [
                            {
                                "type": "-",
                                "title": {
                                    "text": "Total amount"
                                }
                            },
                            {
                                "type": "-",
                                "opposite": true
                            }
                        ],
                        "alignYAxesAtZero": false,
                        "error_y": {
                            "type": "data",
                            "visible": true
                        },
                        "series": {
                            "stacking": null,
                            "error_y": {
                                "type": "data",
                                "visible": true
                            }
                        },
                        "seriesOptions": {
                            "nbFraudTransactions": {
                                "yAxis": 0,
                                "type": "scatter"
                            },
                            "column_f2bd430a56028": {
                                "yAxis": 0,
                                "type": "scatter"
                            },
                            "sumFraudTransactions": {
                                "yAxis": 0,
                                "type": "scatter",
                                "name": "Amount",
                                "color": "#C63FA9"
                            }
                        },
                        "valuesOptions": {},
                        "direction": {
                            "type": "counterclockwise"
                        },
                        "sizemode": "diameter",
                        "coefficient": 1,
                        "numberFormat": "0,0[.]00000",
                        "percentFormat": "0[.]00%",
                        "textFormat": "",
                        "missingValuesAsZero": true,
                        "useAggregationsUi": true,
                        "swappedAxes": false,
                        "dateTimeFormat": "YYYY-MM-DD HH:mm",
                        "showDataLabels": false,
                        "columnConfigurationMap": {
                            "y": [
                                {
                                    "column": "sumFraudTransactions",
                                    "id": "column_f2bd430a65934"
                                }
                            ],
                            "x": {
                                "column": "ts",
                                "id": "column_f2bd430a56029"
                            }
                        },
                        "condensed": true,
                        "withRowNumber": true
                    },
                    "query_plan": {
                        "selects": [
                            {
                                "column": "sumFraudTransactions"
                            },
                            {
                                "column": "ts"
                            }
                        ]
                    }
                },
                {
                    "id": "ba3a8c89-7fb0-4a94-96f8-0a48485e0ed8",
                    "type": "TABLE",
                    "name": "Results",
                    "description": "",
                    "options": {
                        "version": 2
                    },
                    "query_plan": null
                }
            ]
        },
        {
            "id": "ced96f2a-75fa-4963-8a31-b203fb2babf5",
            "name": "dbdemos - fraud_detection_count",
            "description": null,
            "query": "\n    select count(1) as nbTransactions \n    from dbdemos.fsi_fraud_detection.gold_transactions\n    join (--just getting the last 30 days\n        select max(step)-(24*30) windowStart, max(step) windowEnd \n        from dbdemos.fsi_fraud_detection.gold_transactions\n    ) on step >= windowStart and step <= windowEnd\n    where is_fraud",
            "options": {
                "parent": "folders/1580401252621742",
                "apply_auto_limit": false,
                "folder_node_status": "ACTIVE",
                "folder_node_internal_name": "tree/1807491138065375",
                "visualization_control_order": [],
                "parameters": []
            },
            "visualizations": [
                {
                    "id": "3a7d01ad-3220-4a66-90ed-8ebe8d17de28",
                    "type": "TABLE",
                    "name": "Results",
                    "description": "",
                    "options": {
                        "version": 2
                    },
                    "query_plan": null
                },
                {
                    "id": "d575ea93-85e0-4104-8fd9-2781a82340cf",
                    "type": "COUNTER",
                    "name": "Total fraud sum",
                    "description": "",
                    "options": {
                        "counterLabel": "",
                        "counterColName": "nbTransactions",
                        "rowNumber": 1,
                        "targetRowNumber": 1,
                        "stringDecimal": 0,
                        "stringDecChar": ".",
                        "stringThouSep": ",",
                        "tooltipFormat": "0,0.000",
                        "condensed": true,
                        "withRowNumber": true
                    },
                    "query_plan": null
                }
            ]
        },
        {
            "id": "fa7ee5ef-d497-42ca-b394-7aa5f30d8d36",
            "name": "dbdemos - fraud_detection_topdestaccount",
            "description": null,
            "query": "select * from (\n    select nameDest , count(1) as nbTransactions \n    from dbdemos.fsi_fraud_detection.gold_transactions\n    join (--just getting the last 30 days\n        select max(step)-(24*30) windowStart, max(step) windowEnd \n        from dbdemos.fsi_fraud_detection.gold_transactions\n    ) on step >= windowStart and step <= windowEnd\n    where is_fraud\n    group by nameDest\n) \norder by nbTransactions desc\nlimit 1\n",
            "options": {
                "parent": "folders/1580401252621742",
                "apply_auto_limit": false,
                "folder_node_status": "ACTIVE",
                "folder_node_internal_name": "tree/1807491138065374",
                "visualization_control_order": [],
                "parameters": []
            },
            "visualizations": [
                {
                    "id": "023030ed-c954-4566-bd45-5a388ac56078",
                    "type": "COUNTER",
                    "name": "Top Fraud Dst",
                    "description": "",
                    "options": {
                        "counterLabel": "",
                        "counterColName": "nameDest",
                        "rowNumber": 1,
                        "targetRowNumber": 1,
                        "stringDecimal": 0,
                        "stringDecChar": ".",
                        "stringThouSep": ",",
                        "tooltipFormat": "0,0.000",
                        "version": 2,
                        "withRowNumber": true,
                        "targetColName": "nbTransactions",
                        "condensed": true
                    },
                    "query_plan": null
                },
                {
                    "id": "5dc1bcb7-9eb7-4a1f-a8e7-15f6c94f14a7",
                    "type": "TABLE",
                    "name": "Results",
                    "description": "",
                    "options": {
                        "version": 2
                    },
                    "query_plan": null
                }
            ]
        },
        {
            "id": "b49ee227-15e5-4966-adf1-63876bbdcf21",
            "name": "dbdemos - fraud_detection_map_sumpercountry",
            "description": null,
            "query": "select countryOrig , countryDest , type, value from (\n    select countryOrig , countryDest , type, sum(amount ) as value from dbdemos.fsi_fraud_detection.gold_transactions\n    where is_fraud and amount > 350000\n    group by countryOrig , countryDest ,type\n) order by value desc\nlimit 100\n",
            "options": {
                "parent": "folders/1580401252621742",
                "apply_auto_limit": false,
                "folder_node_status": "ACTIVE",
                "folder_node_internal_name": "tree/1807491138065373",
                "visualization_control_order": [],
                "parameters": []
            },
            "visualizations": [
                {
                    "id": "6bc42843-d7a9-4696-b8f2-fbaf57eabc33",
                    "type": "TABLE",
                    "name": "Results",
                    "description": "",
                    "options": {
                        "version": 2
                    },
                    "query_plan": null
                },
                {
                    "id": "88cb0a2e-ba8a-4758-8717-09b8bf38d9d1",
                    "type": "CHOROPLETH",
                    "name": "Fraud Country repartition",
                    "description": "",
                    "options": {
                        "mapType": "countries",
                        "keyColumn": "countryOrig",
                        "targetField": "iso_a3",
                        "valueColumn": "value",
                        "clusteringMode": "e",
                        "steps": 5,
                        "valueFormat": "0,0.00",
                        "noValuePlaceholder": "N/A",
                        "colors": {
                            "min": "#799CFF",
                            "max": "#002FB4",
                            "background": "#ffffff",
                            "borders": "#ffffff",
                            "noValue": "#dddddd"
                        },
                        "legend": {
                            "visible": true,
                            "position": "bottom-left",
                            "alignText": "right"
                        },
                        "tooltip": {
                            "enabled": true,
                            "template": "<b>{{ @@name }}</b>: {{ @@value }}"
                        },
                        "popup": {
                            "enabled": true,
                            "template": "Region: <b>{{ @@name }}</b>\n<br>\nValue: <b>{{ @@value }}</b>"
                        },
                        "condensed": true,
                        "withRowNumber": true
                    },
                    "query_plan": null
                }
            ]
        }
    ],
    "dashboard": {
        "id": "9fc6a3bb-ff36-4e06-b5f9-912d7e77dc05",
        "name": "FSI Fraud Detection - dbdemos",
        "widgets": [
            {
                "id": "25f4f5ce-ab77-4895-ab2c-2c7f52e44d5e",
                "width": 1,
                "options": {
                    "parameterMappings": {},
                    "title": "Hourly Fraud Amounts in the past 30 days",
                    "description": "Amount of fraudulant transactions through the past 30 days",
                    "isHidden": false,
                    "position": {
                        "autoHeight": false,
                        "sizeX": 4,
                        "sizeY": 13,
                        "minSizeX": 1,
                        "maxSizeX": 6,
                        "minSizeY": 5,
                        "maxSizeY": 1000,
                        "col": 0,
                        "row": 14
                    },
                    "overrideColors": false
                },
                "dashboard_id": "9fc6a3bb-ff36-4e06-b5f9-912d7e77dc05",
                "text": "",
                "visualization_id": "3319afb7-9789-43db-88f2-1e858c342de2"
            },
            {
                "id": "3c5f56d5-90c2-40f2-b1fb-97a0ea328ff6",
                "width": 1,
                "options": {
                    "parameterMappings": {},
                    "title": "Top geographical flow of transactions > $350000",
                    "description": "",
                    "isHidden": false,
                    "position": {
                        "autoHeight": false,
                        "sizeX": 5,
                        "sizeY": 11,
                        "minSizeX": 1,
                        "maxSizeX": 6,
                        "minSizeY": 1,
                        "maxSizeY": 1000,
                        "col": 0,
                        "row": 3
                    },
                    "overrideColors": false
                },
                "dashboard_id": "9fc6a3bb-ff36-4e06-b5f9-912d7e77dc05",
                "text": "",
                "visualization_id": "12fe2384-d24f-49c3-9b44-a17d1cffddd1"
            },
            {
                "id": "5fc98fbe-bc7c-4447-89a0-3ebd8c48c341",
                "width": 1,
                "options": {
                    "parameterMappings": {},
                    "title": "Most fraudulent account",
                    "description": "Account issuing the most fraudulent transactions in the past 30 days",
                    "isHidden": false,
                    "position": {
                        "autoHeight": false,
                        "sizeX": 2,
                        "sizeY": 9,
                        "minSizeX": 1,
                        "maxSizeX": 6,
                        "minSizeY": 1,
                        "maxSizeY": 1000,
                        "col": 4,
                        "row": 23
                    },
                    "overrideColors": false
                },
                "dashboard_id": "9fc6a3bb-ff36-4e06-b5f9-912d7e77dc05",
                "text": "",
                "visualization_id": "ec69538e-eb38-4699-9e3d-9274377ee0a5"
            },
            {
                "id": "1b3c00dc-12ad-40d3-b520-2068a4ff4a7f",
                "width": 1,
                "options": {
                    "isHidden": false,
                    "position": {
                        "autoHeight": false,
                        "sizeX": 1,
                        "sizeY": 11,
                        "minSizeX": 1,
                        "maxSizeX": 6,
                        "minSizeY": 1,
                        "maxSizeY": 1000,
                        "col": 5,
                        "row": 3
                    },
                    "parameterMappings": {}
                },
                "dashboard_id": "9fc6a3bb-ff36-4e06-b5f9-912d7e77dc05",
                "text": "### Observations\nIn terms of number of >$350k transactions :\n- Russia is initiating / receiving more transactions, than any other country\n- Most these transactions are transfers"
            },
            {
                "id": "67246365-f561-4b40-8a3b-87adf0c357cb",
                "width": 1,
                "options": {
                    "parameterMappings": {},
                    "title": "Most fraudulent account",
                    "description": "Account receiving the most fraudulent transactions in the past 30 days",
                    "isHidden": false,
                    "position": {
                        "autoHeight": false,
                        "sizeX": 2,
                        "sizeY": 9,
                        "minSizeX": 1,
                        "maxSizeX": 6,
                        "minSizeY": 1,
                        "maxSizeY": 1000,
                        "col": 4,
                        "row": 32
                    }
                },
                "dashboard_id": "9fc6a3bb-ff36-4e06-b5f9-912d7e77dc05",
                "text": "",
                "visualization_id": "023030ed-c954-4566-bd45-5a388ac56078"
            },
            {
                "id": "e2e337f7-bab2-4a71-a549-b3adbcf77143",
                "width": 1,
                "options": {
                    "parameterMappings": {},
                    "title": "Amount of fraudulent transactions per country",
                    "description": "",
                    "isHidden": false,
                    "position": {
                        "autoHeight": false,
                        "sizeX": 4,
                        "sizeY": 14,
                        "minSizeX": 2,
                        "maxSizeX": 6,
                        "minSizeY": 1,
                        "maxSizeY": 1000,
                        "col": 0,
                        "row": 27
                    }
                },
                "dashboard_id": "9fc6a3bb-ff36-4e06-b5f9-912d7e77dc05",
                "text": "",
                "visualization_id": "88cb0a2e-ba8a-4758-8717-09b8bf38d9d1"
            },
            {
                "id": "053ed88f-fb0c-4b73-b9b2-b4713db5b39d",
                "width": 1,
                "options": {
                    "isHidden": false,
                    "position": {
                        "autoHeight": false,
                        "sizeX": 6,
                        "sizeY": 3,
                        "minSizeX": 1,
                        "maxSizeX": 6,
                        "minSizeY": 1,
                        "maxSizeY": 1000,
                        "col": 0,
                        "row": 0
                    },
                    "parameterMappings": {}
                },
                "dashboard_id": "9fc6a3bb-ff36-4e06-b5f9-912d7e77dc05",
                "text": "# Fraud Analysis on the Lakehouse\n\nExisting Fraud Analysis ingested in our Lakehouse\n\nThis data is then used by our Data Scientists to build a ML model and evaluate transaction risk to provide real-time Fraud Detection capabilities.\n"
            },
            {
                "id": "39ee5ab4-b1cb-48c8-b8b2-127fd7320911",
                "width": 1,
                "options": {
                    "parameterMappings": {},
                    "title": "Number of Fraudulent transactions",
                    "description": "Number of Fraudulent transactions in the past 30 days",
                    "isHidden": false,
                    "position": {
                        "autoHeight": false,
                        "sizeX": 2,
                        "sizeY": 9,
                        "minSizeX": 1,
                        "maxSizeX": 6,
                        "minSizeY": 1,
                        "maxSizeY": 1000,
                        "col": 4,
                        "row": 14
                    }
                },
                "dashboard_id": "9fc6a3bb-ff36-4e06-b5f9-912d7e77dc05",
                "text": "",
                "visualization_id": "d575ea93-85e0-4104-8fd9-2781a82340cf"
            },
            {
                "id": "e9b32ac7-576b-4a2c-8c4d-561cfcbb0ce5",
                "width": 1,
                "options": {
                    "isHidden": false,
                    "position": {
                        "autoHeight": false,
                        "sizeX": 6,
                        "sizeY": 3,
                        "minSizeX": 1,
                        "maxSizeX": 6,
                        "minSizeY": 1,
                        "maxSizeY": 1000,
                        "col": 0,
                        "row": 59
                    },
                    "parameterMappings": {}
                },
                "dashboard_id": "9fc6a3bb-ff36-4e06-b5f9-912d7e77dc05",
                "text": "### Disclaimer \nThis dataset is was generated in most part using a [PaySim](https://github.com/EdgarLopezPhD/PaySim) mobile money simulator. It is thus entirely synthetic and does not represent real individuals and transactions.\n\n\nPlease do not edit directly  - ![tracking_img](https://www.google-analytics.com/collect?v=1&gtm=GTM-NKQ8TT7&tid=UA-163989034-1&cid=555&aip=1&t=event&ec=field_demos&ea=display&dp=%2F42_field_demos%2Ffsi%2Ffraud-detection%2Fdashboard&dt=DASHBOARD_FSI_FRAUD)"
            }
        ],
        "tags": [
            "dbdemos",
            "fsi",
            "fraud"
        ],
        "color_palette": null,
        "dashboard_filters_enabled": false,
        "parent": "folders/1580401252621742",
        "is_archived": false
    },
    "version": "1.0"
}