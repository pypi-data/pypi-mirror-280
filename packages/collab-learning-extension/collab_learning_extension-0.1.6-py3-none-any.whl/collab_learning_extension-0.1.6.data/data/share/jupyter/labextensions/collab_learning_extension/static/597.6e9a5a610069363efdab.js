"use strict";(self.webpackChunkcollab_learning_extension=self.webpackChunkcollab_learning_extension||[]).push([[597],{2763:(e,t,n)=>{n.r(t),n.d(t,{FACTORY:()=>tn,IPuzzleDocTracker:()=>nn,default:()=>rn});var l=n(8436),r=(n(1836),n(6371)),a=n(8440),i=n(7262),s=n(9265),o=n(667),c=n(2620);class d extends c.Maintainer{}class u extends c.Maintainer{}var m=n(5486);const p=(0,m.createSlice)({name:"cells",initialState:{byId:{},allIds:[]},reducers:{addCell(e,t){e.byId[t.payload.item.id]=t.payload.item,e.byId[t.payload.item.id].documentId=t.payload.documentIdentifier,e.allIds.push(t.payload.item.id)},deleteCell(e,t){delete e.byId[t.payload.id],e.allIds=e.allIds.filter((e=>e!==t.payload.id))},setCells(e,t){e.byId=t.payload.state.byId,t.payload.state.allIds.forEach((n=>e.byId[n].documentId=t.payload.documentIdentifier)),e.allIds=t.payload.state.allIds},updateCellProperty(e,t){e.byId[t.payload.id][t.payload.key]=t.payload.value},updateCellsAllIds(e,t){e.allIds=t.payload.ids}}}),{addCell:h,deleteCell:b,setCells:g,updateCellProperty:y,updateCellsAllIds:v}=p.actions,f=(0,m.createSelector)([(e,t)=>e,(e,t)=>t],((e,t)=>e.cells.allIds.filter((n=>e.cells.byId[n].documentId===t)))),I=(0,m.createSelector)([e=>e.cells.byId,(e,t)=>t],((e,t)=>e[t])),C=p.reducer,E=(0,m.createSlice)({name:"kernelExecutionResult",initialState:{byId:{},allIds:[]},reducers:{setKernelExecutionResult(e,t){e.byId[t.payload.referenceId]=t.payload,e.allIds.find((e=>e!==t.payload.referenceId))&&e.allIds.push(t.payload.referenceId)},removeKernelExecutionResult(e,t){e.byId[t.payload]&&(delete e.byId[t.payload],e.allIds=e.allIds.filter((e=>e!==t.payload)))}}}),{setKernelExecutionResult:w,removeKernelExecutionResult:x}=E.actions,S=E.reducer,_=(0,m.createSlice)({name:"kernelTestResult",initialState:{byId:{},allIds:[]},reducers:{setKernelTestResult(e,t){e.byId[t.payload.referenceId]=t.payload,e.allIds.push(t.payload.referenceId)},removeKernelTestResult(e,t){e.byId[t.payload]&&(delete e.byId[t.payload],e.allIds=e.allIds.filter((e=>e!==t.payload)))}}}),{setKernelTestResult:O,removeKernelTestResult:F}=_.actions,P=_.reducer,N=(0,m.createSlice)({name:"user",initialState:{identity:null,userRole:"student"},reducers:{setToStudent(e){e.userRole="student"},setToInstructor(e){e.userRole="instructor"},setIdentity(e,t){e.identity=t.payload}}}),{setToStudent:k,setToInstructor:j,setIdentity:T}=N.actions,M=e=>e.user.userRole,A=N.reducer,z=(0,m.createSlice)({name:"fields",initialState:{byId:{},allIds:[]},reducers:{addField(e,t){e.byId[t.payload.item.id]=t.payload.item,e.allIds.push(t.payload.item.id)},deleteField(e,t){delete e.byId[t.payload.id],e.allIds=e.allIds.filter((e=>e!==t.payload.id)),x(t.payload.id)},updateFieldProperty(e,t){e.byId[t.payload.id][t.payload.key]=t.payload.value},setFields(e,t){e.byId=t.payload.state.byId,e.allIds=t.payload.state.allIds},updateFieldsAllIds(e,t){e.allIds=t.payload.ids}}}),{addField:D,deleteField:R,updateFieldProperty:H,setFields:B,updateFieldsAllIds:V}=z.actions,L=e=>e.fields.byId,U=(0,m.createSelector)([L,(e,t)=>t],((e,t)=>e[t])),K=(0,m.createSelector)([L,(e,t)=>t],((e,t)=>t.map((t=>e[t])))),J=(0,m.createSelector)([e=>e.cells.byId,L,(e,t,n)=>t,(e,t,n)=>n],((e,t,n,l)=>e[n].studentSolutionIds.filter((e=>{var n;return(null===(n=t[e])||void 0===n?void 0:n.createdBy)===l})).map((e=>t[e])).find((e=>e)))),W=z.reducer,q=(0,m.configureStore)({reducer:{fields:W,cells:C,user:A,kernelExecutionResult:S,kernelTestResult:P}});class Y extends c.RootObserver{constructor(){super(...arguments),Object.defineProperty(this,"rootDispatcher",{enumerable:!0,configurable:!0,writable:!0,value:e=>{q.dispatch(g(e))}}),Object.defineProperty(this,"addDispatcher",{enumerable:!0,configurable:!0,writable:!0,value:e=>{q.dispatch(h(e))}}),Object.defineProperty(this,"deleteDispatcher",{enumerable:!0,configurable:!0,writable:!0,value:e=>{q.dispatch(b(e))}}),Object.defineProperty(this,"updatePropertyDispatcher",{enumerable:!0,configurable:!0,writable:!0,value:e=>{q.dispatch(y(e))}}),Object.defineProperty(this,"allIdsDispatcher",{enumerable:!0,configurable:!0,writable:!0,value:e=>{q.dispatch(v(e))}})}}class G extends c.RootObserver{constructor(){super(...arguments),Object.defineProperty(this,"rootDispatcher",{enumerable:!0,configurable:!0,writable:!0,value:e=>{q.dispatch(B(e))}}),Object.defineProperty(this,"addDispatcher",{enumerable:!0,configurable:!0,writable:!0,value:e=>{q.dispatch(D(e))}}),Object.defineProperty(this,"deleteDispatcher",{enumerable:!0,configurable:!0,writable:!0,value:e=>{q.dispatch(R(e))}}),Object.defineProperty(this,"updatePropertyDispatcher",{enumerable:!0,configurable:!0,writable:!0,value:e=>{q.dispatch(H(e))}}),Object.defineProperty(this,"allIdsDispatcher",{enumerable:!0,configurable:!0,writable:!0,value:e=>{q.dispatch(V(e))}})}}class ${create(e){return this.createSpecific(e)}}class Q extends ${createField(){return{id:i.UUID.uuid4()}}}class X extends Q{get identifier(){return"code"}createSpecific(){return{...this.createField(),src:"",type:"code",language:"python"}}}class Z extends Q{get identifier(){return"markdown"}createSpecific(){return{...this.createField(),src:"",type:"markdown"}}}class ee extends Q{get identifier(){return"multiple-choice-item"}createSpecific(){return{...this.createField(),src:""}}}class te extends Q{get identifier(){return"test-code"}createSpecific(){return{...this.createField(),src:"",type:"test-code",language:"python",name:"",verified:!1,createdBy:""}}}class ne{constructor(){Object.defineProperty(this,"factories",{enumerable:!0,configurable:!0,writable:!0,value:[]})}create(e,t){return this.findFactory(e).create(t)}findFactory(e){const t=this.factories.find((t=>t.identifier===e));if(void 0!==t)return t;throw Error("Factory for type: "+e+" was not found")}}class le extends Q{createField(){return{...super.createField(),comment:"",grade:-1,createdBy:"",submitted:!1}}}class re extends le{get identifier(){return"code-solution"}createSpecific(){return{...this.createField(),language:"python",src:"",type:"code-solution"}}}class ae extends le{get identifier(){return"multiple-choice-solution"}createSpecific(){return{...this.createField(),type:"multiple-choice-solution",src:[]}}}class ie extends le{get identifier(){return"text-solution"}createSpecific(){return{...this.createField(),type:"text-solution",src:""}}}class se extends ne{static get instance(){return this._instance}constructor(){super(),this.factories.push(new X,new Z,new ee,new te),this.factories.push(new re,new ae,new ie)}}Object.defineProperty(se,"_instance",{enumerable:!0,configurable:!0,writable:!0,value:new se});const oe=se;class ce extends ${constructor(){super()}_createCell(e){return{id:i.UUID.uuid4(),type:this.identifier,descriptionId:e("markdown"),studentSolutionIds:[],visible:!1,showSolution:!1}}}class de extends ce{get identifier(){return"code-cell"}get text(){return"Coding Exercise"}createSpecific(e){return{...this._createCell(e),type:"code-cell",startingCodeId:e("code"),solutionCodeId:e("code"),testingCodeIds:[]}}}class ue extends ce{get text(){return"Text response"}get identifier(){return"text-cell"}createSpecific(e){return{...this._createCell(e),type:"text-cell",solutionId:e("markdown")}}}class me extends ce{get text(){return"Multiple choice"}get identifier(){return"multiple-choice-cell"}createSpecific(e){return{...this._createCell(e),type:"multiple-choice-cell",solutionOptions:[],options:[],multi:!1,random:!1}}}class pe extends ne{static get instance(){return this._instance}constructor(){super(),this.factories.push(new de),this.factories.push(new ue),this.factories.push(new me)}getFactoryNamings(){return this.factories.map((e=>({id:e.identifier,name:e.text})))}}Object.defineProperty(pe,"_instance",{enumerable:!0,configurable:!0,writable:!0,value:new pe});const he=pe;var be=n(4602);class ge{constructor(){Object.defineProperty(this,"onStreamMessage",{enumerable:!0,configurable:!0,writable:!0,value:e=>({output:e.text,type:"stream"})}),Object.defineProperty(this,"getErrorMessage",{enumerable:!0,configurable:!0,writable:!0,value:e=>e.ename+(e.evalue?": "+e.evalue:"")}),Object.defineProperty(this,"onError",{enumerable:!0,configurable:!0,writable:!0,value:e=>({output:e,type:"error"})}),Object.defineProperty(this,"onOutputObject",{enumerable:!0,configurable:!0,writable:!0,value:e=>"object"==typeof e.data?{...this.getDataObjectOutputValue(e)}:null})}getDataObjectOutputValue(e){const t=e.data;return void 0!==t["application/json"]?{output:t["application/json"],type:"application/json"}:void 0!==t["image/png"]?{output:t["image/png"],type:"image/png"}:void 0!==t["text/html"]?{output:t["text/html"],type:"text/html"}:void 0!==t["text/plain"]?{output:t["text/plain"],type:"text/plain"}:{output:"Output type not supported",type:"error"}}}class ye{constructor(){Object.defineProperty(this,"_executeCode",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>{const n=[];return new Promise(((l,r)=>{var a,i,s;t&&(null===(a=t.session)||void 0===a?void 0:a.kernel)&&((null===(s=null===(i=t.session)||void 0===i?void 0:i.kernel)||void 0===s?void 0:s.requestExecute({code:this._extractSrc(e)})).onIOPub=e=>{const t=e.header.msg_type,r=e.content;switch(t){case"execute_result":{const e=this._executionOutputHelper.onOutputObject(r);e&&n.push(e);break}case"display_data":{const e=this._executionOutputHelper.onOutputObject(r);e&&n.push(e);break}case"error":n.push(this._executionOutputHelper.onError(this._executionOutputHelper.getErrorMessage(r)));break;case"stream":n.push(this._executionOutputHelper.onStreamMessage(r));break;case"status":"idle"===r.execution_state&&l(n)}})}))}}),Object.defineProperty(this,"_executionOutputHelper",{enumerable:!0,configurable:!0,writable:!0,value:new ge}),Object.defineProperty(this,"_verifiedTestSignal",{enumerable:!0,configurable:!0,writable:!0,value:new be.Signal(this)})}static get instance(){return this._instance}get verifiedTestSignal(){return this._verifiedTestSignal}executeCode(e,t){q.dispatch(x(e.assertionCodeId)),this._executeCode(e,t).then((t=>q.dispatch(w({referenceId:e.assertionCodeId,outputs:t}))))}executeTest(e,t){q.dispatch(x(e.assertionCodeId)),this._executeTest(e,t).then((t=>q.dispatch(O({referenceId:e.assertionCodeId,result:t}))))}verifyTest(e,t){q.dispatch(x(e.assertionCodeId)),this._executeTest(e,t).then((t=>{t&&this._verifiedTestSignal.emit({referenceId:e.assertionCodeId}),q.dispatch(O({referenceId:e.assertionCodeId,result:t}))}))}_executeTest(e,t){return new Promise(((n,l)=>{var r,a,i;const s=this._extractSrc(e);if(!s.includes("assert")||!t||!(null===(r=t.session)||void 0===r?void 0:r.kernel))return q.dispatch(w({referenceId:e.assertionCodeId,outputs:[this._executionOutputHelper.onError("No asserts were found in the test code")]})),n(!1);(null===(i=null===(a=t.session)||void 0===a?void 0:a.kernel)||void 0===i?void 0:i.requestExecute({code:s})).onIOPub=t=>{const l=t.header.msg_type,r=t.content;switch(l){case"status":if("idle"===r.execution_state)return n(!0);break;case"error":return q.dispatch(w({referenceId:e.assertionCodeId,outputs:[this._executionOutputHelper.onError(this._executionOutputHelper.getErrorMessage(r))]})),n(!1)}}}))}_extractSrc(e){const t=q.getState().cells.byId[e.cellId],n=[];return n.push(q.getState().fields.byId[t.startingCodeId]),n.push(q.getState().fields.byId[e.codeBodyId]),n.push(q.getState().fields.byId[e.assertionCodeId]),n.map((e=>e.src)).join("\r\n")}}Object.defineProperty(ye,"_instance",{enumerable:!0,configurable:!0,writable:!0,value:new ye});class ve extends o.YDocument{constructor(){super(),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"1.0.0"}),Object.defineProperty(this,"_cellsMaintainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fieldsMaintainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fieldsObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cellsObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const e=this.ydoc.getMap("cells"),t=this.ydoc.getMap("fields");this._cellsMaintainer=new u(e,this.transact.bind(this)),this._fieldsMaintainer=new d(t,this.transact.bind(this)),this._cellsObserver=new Y(e,this.ydoc.guid),this._fieldsObserver=new G(t),ye.instance.verifiedTestSignal.connect(((e,t)=>{const n=this._fieldsMaintainer.getObjectAsJson(t.referenceId);n.verified=!0,this._fieldsMaintainer.changeObject(n)}))}dispose(){this.isDisposed||(super.dispose(),this._fieldsObserver.dispose(),this._cellsObserver.dispose())}static create(){return new ve}get cells(){return[]}addCell(e,t){this.transact((()=>{this._cellsMaintainer.addObject(he.instance.create(e,(e=>this.fieldCreation(e,t))))}))}deleteCell(e){this._cellsMaintainer.deleteObject(e,((e,t)=>{this._fieldsMaintainer.deleteObject(t)}))}changeCell(e){this._cellsMaintainer.changeObject(e)}swapCellPosition(e,t){this._cellsMaintainer.swapObjectPosition(e,t)}changeField(e){this._fieldsMaintainer.changeObject(e)}addFieldToPropertyArray(e,t,n,l){this.transact((()=>{this._cellsMaintainer.addToPropertyArray(e,t,this.fieldCreation(n,l))}))}removeFieldFromPropertyArray(e,t,n){this._cellsMaintainer.removeFromPropertyArray(e,t,n,(()=>{this._fieldsMaintainer.deleteObject(n)}))}swapInPropertyArray(e,t,n,l){this._cellsMaintainer.swapInPropertyArray(e,t,n,l)}fieldCreation(e,t){const n=oe.instance.create(e,(e=>this.fieldCreation(e,t)));return n.createdBy=t,this._fieldsMaintainer.addObject(n),n.id}}var fe=n(921),Ie=n(3345),Ce=n.n(Ie),Ee=n(9316);const we=()=>{const e=(0,Ee.useSelector)((e=>M(e))),t=(0,Ee.useDispatch)();return Ce().createElement("div",{className:"form-control items-end"},Ce().createElement("label",{className:"label cursor-pointer"},Ce().createElement("span",{className:"label-text mr-2"},"Instructor"),Ce().createElement("input",{type:"checkbox",className:"checkbox checkbox-sm",defaultChecked:"instructor"===e,onChange:e=>{e.target.checked?t(j()):t(k())}})))},xe=(0,Ie.createContext)(null),Se=e=>Ce().createElement(xe.Provider,{value:{...e,addStudentSolutionField:(t,n)=>{e.addFieldToPropertyArray(t,"studentSolutionIds",n)},addTestCodeField:t=>e.addFieldToPropertyArray(t,"testingCodeIds","test-code"),removeTestCodeField:(t,n)=>e.removeFieldFromPropertyArray(t,"testingCodeIds",n),addMultipleChoiceOption:t=>{e.addFieldToPropertyArray(t,"options","multiple-choice-item")},removeMultipleChoiceOption:(t,n)=>{e.removeFieldFromPropertyArray(t,"options",n)},swapPositionOfMultipleChoiceOption:(t,n,l)=>{e.swapInPropertyArray(t,"options",n,l)}}},e.children),_e=({label:e,className:t,icon:n,disabled:l=!1,onClick:r})=>Ce().createElement("button",{onClick:r,className:"btn btn-light btn-sm "+t,disabled:l},e?n?e+" ":e:""," ",n&&Ce().createElement("span",{dangerouslySetInnerHTML:{__html:n}})),Oe=e=>Ce().createElement("div",{className:"flex justify-end "+e.className},e.children),Fe=({onSubmit:e,onUndo:t,submitted:n=!1,showBadgeOnSubmitted:l=!1,finalized:r=!1,labelSubmit:a="Submit",labelUndoSubmit:i="Undo Submission",iconSubmit:s,iconUndoSubmit:o,className:c=""})=>Ce().createElement(Oe,{className:c},l&&n&&Ce().createElement("span",{className:"badge badge-success mr-4"},"Submitted"),Ce().createElement(_e,{onClick:e,disabled:n,label:a,icon:s}),!r&&Ce().createElement(_e,{className:"ml-4",onClick:t,disabled:!n,label:i,icon:o}));var Pe=n(1185);const Ne=e=>Ce().createElement(Pe.CodeComponent,{language:e.language,onCodeChange:e.onChange,src:e.src,config:{options:e.readonly?Pe.readonlyAdjustableHeightCodeOptions:Pe.adjustableHeightCodeOptions}}),ke=({borderOnHover:e=!1,children:t,className:n})=>Ce().createElement("div",{className:"relative transition-all ease-in-out duration-300 group mt-2 "+n+(e?" focus-within:border-solid hover:border-solid hover:focus-within:border-base-300 focus-within:border-base-300  hover:border-base-200 border-2 border-base-100":" border-solid border-base-200 border-2"),style:{minHeight:"24px"}},t),je=({className:e,children:t})=>Ce().createElement("div",{className:"pl-4 pr-4 pt-1 pb-1 w-full "+e},t),Te=({children:e,className:t,showOnHover:n=!0,absolute:l=!1})=>Ce().createElement(Oe,{className:t},Ce().createElement("div",{className:(n?"transition ease-in-out duration-200 opacity-0 group-hover:opacity-100 ":"")+(l?"absolute top-0 right-0 z-10":"inline-flex")},l?Ce().createElement("div",{className:"inline-flex"}," ",e," "):e)),Me=({icon:e,label:t,hide:n=!1,disabled:l=!1,onClick:r})=>{const a=void 0!==t&&t.length>0;return n?Ce().createElement(Ce().Fragment,null):Ce().createElement("button",{className:"btn btn-sm rounded-none "+(a?"":"btn-square"),onClick:r,disabled:l},a&&Ce().createElement("span",null,t),Ce().createElement("span",{dangerouslySetInnerHTML:{__html:e}}))},Ae=({checked:e,label:t,onChange:n})=>Ce().createElement("div",{className:"form-control bg-base-200 w-fit flex justify-center pl-2 pr-2 shadow-sm"},Ce().createElement("label",{className:"label cursor-pointer p-0"},Ce().createElement("span",{className:"label-text pr-2"},t),Ce().createElement("input",{type:"checkbox",className:"toggle toggle-xs",onChange:e=>n(e.target.checked),checked:e}))),ze=({label:e,className:t,children:n})=>e?Ce().createElement(ke,{className:"indicator w-full pb-1 "+t},Ce().createElement("span",{className:"indicator-item indicator-center badge"},e),Ce().createElement(je,null,n)):Ce().createElement(je,null,n),De=({label:e,className:t,children:n})=>e?Ce().createElement(ke,{className:"indicator w-full pt-3 pb-3 "+t},e&&Ce().createElement("div",{className:"indicator-item indicator-center badge text-center"},e),Ce().createElement(je,null,n)):Ce().createElement(je,{className:t},n);var Re=n(555),He=n.n(Re),Be=n(5579),Ve=n.n(Be);const Le={rehypePlugins:[He()],remarkPlugins:[Ve()]},Ue=e=>Ce().createElement(Pe.MarkdownEditorComponent,{config:{jupyter:!0,markdownConfig:Le,codeConfig:e.codeConfig},src:e.src,onChange:e.onChange});var Ke=n(8745),Je=n.n(Ke);const We=({html:e})=>{return Ce().createElement("div",{dangerouslySetInnerHTML:(t=e,{__html:Je().sanitize(t,{ADD_ATTR:["border"],FORBID_TAGS:["style"],FORBID_ATTR:["style"],USE_PROFILES:{html:!0}})})});var t},qe=e=>Ce().createElement(Ce().Fragment,null," ",!e.hide&&Ce().createElement(Ce().Fragment,null,Ce().createElement("input",{type:"radio",name:e._id,role:"tab",className:"inline-block tab "+(e._isActive?"tab-active":"")+" "+e.className,"aria-label":e.label,style:{width:"100%",wordBreak:"break-all",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},onClick:()=>{var t;return e._setActiveTab&&e._setActiveTab(null!==(t=e._index)&&void 0!==t?t:0)}}),Ce().createElement("div",{role:"tabpanel",className:"tab-content bg-base-100 "+e.classNameContent},e.children))),Ye=({pageSize:e=6,children:t,className:n,classNamePrevButton:l,onTabChange:r})=>{const a=(0,Ie.useId)(),[i,s]=Ce().useState(0),[o,c]=Ce().useState(0),d=e=>{i!==e&&(void 0!==r&&r(e),s(e))},u=Ce().Children.count(t);u<i+1&&(s(i-1),r&&r(i-1));const m=Ge(Ce().Children.toArray(t),o,e);return Ce().createElement(Ce().Fragment,null,Ce().createElement("div",{role:"tablist",className:"tabs tabs-bordered grid-cols-"+e+" "+n,style:{gridTemplateColumns:"25px repeat("+e+", calc(calc(100% - 50px)/"+e+")) 25px"}},Ce().createElement("button",{disabled:0===o,className:"btn btn-xs rounded-none flex self-center btn-square "+l,style:{gridRowStart:1},onClick:()=>{c(o-1),s((o-1)*e)}},"«"),m.map(((t,n)=>Ce().isValidElement(t)?Ce().cloneElement(t,{_id:a,_index:n+o*e,_isActive:n+o*e===i,_setActiveTab:d}):t)),Ce().createElement("button",{disabled:(o+1)*e+1>u,className:"btn btn-xs rounded-none flex self-center ",style:{gridRowStart:1,justifySelf:"left"},onClick:()=>{c(o+1),s((o+1)*e)}},"»")))},Ge=(e,t,n)=>{const l=t*n;return e.splice(l,n)},$e=({isInstructor:e,src:t,onChange:n})=>Ce().createElement(Ce().Fragment,null,e?Ce().createElement(De,{label:"Exercise description"},Ce().createElement(Ue,{src:t,onChange:n})):Ce().createElement(Pe.MarkdownComponent,{src:t})),Qe=e=>Ce().createElement(Ce().Fragment,null,Ce().createElement(ze,{label:e.label},Ce().createElement(Ne,{...e})));var Xe=n(6938);const Ze={"text/html":({output:e})=>Ce().createElement(We,{html:e}),"application/json":({output:e})=>Ce().createElement(Xe.JsonView,{data:e,style:{...Xe.defaultStyles,container:"bg-base-100"}}),"image/png":({output:e})=>Ce().createElement("img",{src:`data:image/png;base64,${e}`}),error:({output:e})=>Ce().createElement("div",{className:"alert alert-error rounded-none",style:{whiteSpace:"pre-wrap"}},e),default:({output:e})=>Ce().createElement("div",{className:"alert alert-base-200 rounded-none",style:{whiteSpace:"pre-wrap"}},e)},et=({object:e})=>{const t=Ze[e.type]||Ze.default;return e.output?Ce().createElement(t,{output:e.output}):Ce().createElement(Ce().Fragment,null)},tt=({objects:e=[],className:t,showIndex:n=!0})=>{const l=e.map(((e,l)=>Ce().createElement("div",{className:"flex "+t},n&&Ce().createElement("span",{className:"pr-2"},"[",l+1,"]"),Ce().createElement(et,{key:l,object:e}))));return Ce().createElement("div",{className:"flex flex-col space-y-4"},l)},nt=e=>Ce().createElement(qe,{...e,className:(void 0!==e.success?e.success?"bg-success/50 ":"bg-error/50 ":"")+e.className,classNameContent:"mt-4"},e.children);nt.Code=Ne,nt.CodeName=({name:e,onNameChange:t})=>Ce().createElement("div",{className:"input-group mb-3 pl-16"},Ce().createElement("input",{type:"text",placeholder:"Test name",className:"input input-bordered input-sm w-full",value:e,onChange:e=>t(e.target.value)})),nt.Output=e=>Ce().createElement(tt,{...e,className:"ml-9 mt-2"});const lt=({isInstructor:e,children:t,onTabChange:n})=>Ce().createElement(De,{label:e?"AssertionCode":void 0,className:"mt-6"},Ce().createElement(Ye,{onTabChange:n},t)),rt=({children:e})=>Ce().createElement(Ce().Fragment,null,e);rt.StartingCode=e=>Ce().createElement(Qe,{...e,label:e.readonly?void 0:"Starting Code"}),rt.SolutionCode=e=>Ce().createElement(Qe,{...e,label:"Solution Code"}),rt.StudentCode=e=>Ce().createElement(Qe,{...e}),rt.AssertionCode=lt,rt.Toolbar=({children:e})=>Ce().createElement(je,null,Ce().createElement(Te,{showOnHover:!1},e));const at=({children:e,label:t="Configuration"})=>Ce().createElement(De,{label:t},e),it=({label:e,value:t,onChange:n})=>Ce().createElement("div",{className:"form-control"},Ce().createElement("label",{className:"cursor-pointer label"},Ce().createElement("span",{className:"label-text"},e),Ce().createElement("input",{type:"checkbox",onChange:e=>n(e.target.checked),checked:t,className:"checkbox checkbox-sm"})));var st=n(2126);const ot=({content:e,parentId:t,optionId:n,index:l,maxIndex:r,selected:a,options:i,onItemContentChange:s,onSelectionChange:o,swapPosition:c,remove:d})=>Ce().createElement(ke,null,Ce().createElement(Te,{showOnHover:!1},Ce().createElement(Me,{hide:i.randomOrder,disabled:0===l,icon:st.moveUpIcon.svgstr,onClick:()=>{c(l,l-1)}}),Ce().createElement(Me,{hide:i.randomOrder,disabled:r===l,icon:st.moveDownIcon.svgstr,onClick:()=>{c(l,l+1)}}),Ce().createElement(Me,{icon:st.deleteIcon.svgstr,onClick:d})),Ce().createElement(je,null,Ce().createElement("div",{className:"flex flex-row"},Ce().createElement("div",{className:"flex-grow"},Ce().createElement(Ue,{src:e,onChange:s})),Ce().createElement("label",{className:"label"},Ce().createElement("div",{className:"cursor-pointer"},i.multi?Ce().createElement("input",{type:"checkbox",onChange:e=>o(n,e.target.checked),checked:a,className:"checkbox checkbox-sm"}):Ce().createElement("input",{type:"radio",name:"radio-"+t,className:"radio radio-sm",defaultChecked:a,onChange:e=>o(n,e.target.checked)})))))),ct=({children:e,addMultipleChoiceOption:t})=>Ce().createElement(Ce().Fragment,null,e,Ce().createElement(Oe,{className:"mt-2"},Ce().createElement(_e,{icon:st.addIcon.svgstr,onClick:t}))),dt=({src:e,onChange:t})=>Ce().createElement(De,{label:"Solution"},Ce().createElement(Ue,{src:e,onChange:t})),ut=({options:e,items:t,solutionOptions:n,answer:l,onAnswerChanges:r,setSubmit:a})=>Ce().createElement(Ce().Fragment,null,Ce().createElement(Pe.MultipleChoiceComponent,{exerciseObject:{items:t,correctAnswers:n,metadata:{multi:e.multi,disabled:e.submitted,showEvaluation:e.submitted&&e.showSolution,showIndicator:e.submitted&&e.showSolution,random:e.random,markdownConfig:Le,multipleChoiceItemColoring:{}}},onAnswerChanges:r,initialAnswer:{answer:l}}),Ce().createElement(Fe,{finalized:e.showSolution,showBadgeOnSubmitted:!0,submitted:e.submitted,onSubmit:()=>a(!0),onUndo:()=>a(!1)})),mt=({options:e,answer:t,solution:n,setSubmit:l,onAnswerChanges:r})=>{const a=e.submitted?Pe.readonlyAdjustableHeightCodeOptions:Pe.adjustableHeightCodeOptions;return Ce().createElement(Ce().Fragment,null,Ce().createElement(Pe.TextResponseComponent,{exerciseObject:{solution:n,metadata:{showSolution:e.showSolution&&e.submitted,markdownEditorConfig:{jupyter:!0,markdownConfig:Le,codeConfig:{options:a}}}},initialAnswer:{answer:{src:t}},onAnswerChanges:r}),Ce().createElement(Fe,{className:"mt-2",finalized:e.showSolution,showBadgeOnSubmitted:!0,submitted:e.submitted,onSubmit:()=>l(!0),onUndo:()=>l(!1)}))},pt=new st.LabIcon({name:"code:run-all",svgstr:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.915 8.24L2 14.48V2l8.915 6.24zm-7.92 4.328L9.181 8.24 2.995 3.912v8.656zM5.5 14.48v-1.229l7.18-5.01L5.5 3.228V2l8.915 6.24L5.5 14.48z"/></svg>'});function ht({fieldId:e}){const t=(0,Ee.useSelector)((t=>U(t,e))),n="instructor"===(0,Ee.useSelector)((e=>M(e))),{changeField:l}=(0,Ie.useContext)(xe);return void 0===t?Ce().createElement(Ce().Fragment,null):Ce().createElement($e,{isInstructor:n,onChange:e=>{l({...t,src:e})},src:t.src})}const bt=(0,Ie.createContext)(null),gt=e=>Ce().createElement(bt.Provider,{value:{...e}},e.children);function yt(e){const t="instructor"===(0,Ee.useSelector)((e=>M(e))),n=(0,Ee.useSelector)((e=>e.cells.allIds.length)),l=(0,Ee.useSelector)((t=>I(t,e.cellId))),{deleteCell:r,swapCellPosition:a,changeCell:i}=(0,Ie.useContext)(xe);return Ce().createElement(Ce().Fragment,null,t&&Ce().createElement(Ce().Fragment,null,Ce().createElement(Te,{showOnHover:!0},Ce().createElement(Ae,{checked:l.showSolution,onChange:e=>i({...l,showSolution:e}),label:"Show Solution"}),Ce().createElement(Ae,{checked:l.visible,onChange:e=>i({...l,visible:e}),label:"Visibility"}),Ce().createElement(Me,{disabled:0===e.index,icon:st.moveUpIcon.svgstr,onClick:()=>{const t=e.index-1;a(e.index,t)}}),Ce().createElement(Me,{disabled:n-1===e.index,icon:st.moveDownIcon.svgstr,onClick:()=>{const t=e.index+1;a(e.index,t)}}),Ce().createElement(Me,{icon:st.deleteIcon.svgstr,onClick:()=>{r(e.cellId)}}))))}const vt=e=>{var t;const{changeField:n}=(0,Ie.useContext)(xe),l=(0,Ee.useSelector)((t=>U(t,e.assertionCodeId))),r=(0,Ee.useSelector)((e=>{var t;return null===(t=e.user.identity)||void 0===t?void 0:t.username})),a=(0,Ee.useSelector)((t=>((e,t)=>e.kernelExecutionResult.byId[t])(t,e.assertionCodeId))),i=null===(t=(0,Ee.useSelector)((t=>((e,t)=>e.kernelTestResult.byId[t])(t,e.assertionCodeId))))||void 0===t?void 0:t.result;return(null==l?void 0:l.verified)||(null==l?void 0:l.createdBy)===r?Ce().createElement(nt,{...e,label:l.name?l.name:"New Test",success:i},!l.verified&&Ce().createElement(nt.CodeName,{name:l.name,onNameChange:e=>n({...l,name:e})}),Ce().createElement(nt.Code,{language:l.language,src:l.src,onChange:e=>n({...l,src:e}),readonly:l.verified}),Ce().createElement(nt.Output,{objects:(null==a?void 0:a.outputs)?null==a?void 0:a.outputs:[]})):Ce().createElement(Ce().Fragment,null)},ft=({cellId:e,isInstructor:t,onTabChange:n})=>{const l=(0,Ee.useSelector)((t=>I(t,e).testingCodeIds)).map((e=>Ce().createElement(vt,{assertionCodeId:e})));return Ce().createElement(lt,{onTabChange:n,isInstructor:t},l)};function It({cellId:e,isInstructor:t}){const{changeField:n}=(0,Ie.useContext)(xe),l=(0,Ee.useSelector)((t=>U(t,I(t,e).solutionCodeId)));return void 0!==l&&t?Ce().createElement(rt.SolutionCode,{language:l.language,src:l.src,onChange:e=>n({...l,src:e}),readonly:!1}):Ce().createElement(Ce().Fragment,null)}function Ct({cellId:e,isInstructor:t}){const{changeField:n}=(0,Ie.useContext)(xe),l=(0,Ee.useSelector)((t=>U(t,I(t,e).startingCodeId)));return void 0===l?Ce().createElement(Ce().Fragment,null):Ce().createElement(rt.StartingCode,{language:l.language,src:l.src,onChange:e=>n({...l,src:e}),readonly:!t})}function Et({cellId:e,isInstructor:t}){const{addStudentSolutionField:n,changeField:l}=(0,Ie.useContext)(xe);if(t)return Ce().createElement(Ce().Fragment,null);const r=(0,Ee.useSelector)((e=>{var t;return null===(t=e.user.identity)||void 0===t?void 0:t.username})),a=(0,Ee.useSelector)((t=>J(t,e,r)));return void 0===a?(n(e,"code-solution"),Ce().createElement(Ce().Fragment,null)):Ce().createElement(rt.StudentCode,{language:a.language,src:a.src,onChange:e=>l({...a,src:e})})}const wt=({cellId:e,isInstructor:t,assertionIndex:n})=>{var l;const{removeTestCodeField:r,addTestCodeField:a}=(0,Ie.useContext)(xe),{verifyTest:i,executeTest:s}=(0,Ie.useContext)(bt),o=(0,Ee.useSelector)((t=>I(t,e).solutionCodeId)),c=(0,Ee.useSelector)((e=>{var t;return null===(t=e.user.identity)||void 0===t?void 0:t.username})),d=null===(l=(0,Ee.useSelector)((t=>J(t,e,c))))||void 0===l?void 0:l.id,u=(0,Ee.useSelector)((t=>I(t,e).testingCodeIds)),m=(0,Ee.useSelector)((e=>U(e,u[n])));return Ce().createElement(rt.Toolbar,null,Ce().createElement(Me,{icon:st.addIcon.svgstr,onClick:()=>a(e)}),Ce().createElement(Me,{hide:null==m?void 0:m.verified,icon:st.checkIcon.svgstr,disabled:void 0===(null==m?void 0:m.name)||""===m.name,onClick:()=>i({cellId:e,assertionCodeId:u[n],codeBodyId:o})}),Ce().createElement(Me,{hide:u.length<2,icon:pt.svgstr,onClick:()=>u.forEach((n=>{s({cellId:e,assertionCodeId:n,codeBodyId:t?o:d})}))}),Ce().createElement(Me,{hide:!(null==m?void 0:m.verified),icon:st.runIcon.svgstr,onClick:()=>s({cellId:e,assertionCodeId:u[n],codeBodyId:t?o:d})}),Ce().createElement(Me,{hide:!t&&(null==m?void 0:m.createdBy)!==c&&(null==m?void 0:m.verified),icon:st.deleteIcon.svgstr,onClick:()=>r(e,u[n])}))};function xt({cellId:e}){const t="instructor"===(0,Ee.useSelector)((e=>M(e))),[n,l]=Ce().useState(0);return Ce().createElement(rt,null,Ce().createElement(Ct,{cellId:e,isInstructor:t}),Ce().createElement(Et,{cellId:e,isInstructor:t}),Ce().createElement(It,{cellId:e,isInstructor:t}),Ce().createElement(ft,{cellId:e,isInstructor:t,onTabChange:e=>l(e)}),Ce().createElement(wt,{cellId:e,isInstructor:t,assertionIndex:n}))}function St(e){const{addMultipleChoiceOption:t,changeCell:n,changeField:l,removeMultipleChoiceOption:r,swapPositionOfMultipleChoiceOption:a}=(0,Ie.useContext)(xe),i=(0,Ee.useSelector)((t=>I(t,e.cellId))),s=(0,Ee.useSelector)((e=>K(e,i.options))),o=(e,t)=>{t?i.multi?n({...i,solutionOptions:[...i.solutionOptions,e]}):n({...i,solutionOptions:[e]}):n({...i,solutionOptions:i.solutionOptions.filter((t=>t!==e))})},c=s.map(((t,n)=>Ce().createElement(ot,{content:t.src,index:n,selected:i.solutionOptions.includes(t.id),parentId:e.cellId,maxIndex:i.options.length-1,onItemContentChange:e=>l({...t,src:e}),optionId:t.id,onSelectionChange:o,options:{multi:i.multi,randomOrder:i.random},remove:()=>r(e.cellId,t.id),swapPosition:(t,n)=>a(e.cellId,t,n)})));return Ce().createElement(ct,{addMultipleChoiceOption:()=>t(e.cellId)},Ce().createElement(at,{label:"Configuration"},Ce().createElement(it,{label:"Multi Selection",onChange:e=>n({...i,multi:e}),value:i.multi}),Ce().createElement(it,{label:"Random Order",onChange:e=>n({...i,random:e}),value:i.random})),c)}const _t=e=>{const{changeField:t,addStudentSolutionField:n}=(0,Ie.useContext)(xe),l=(0,Ee.useSelector)((e=>{var t;return null===(t=e.user.identity)||void 0===t?void 0:t.username})),r=(0,Ee.useSelector)((t=>J(t,e.cellId,l))),a=(0,Ee.useSelector)((t=>I(t,e.cellId))),i=(0,Ee.useSelector)((e=>K(e,a.options)));return void 0===r?(n(e.cellId,"multiple-choice-solution"),Ce().createElement(Ce().Fragment,null)):Ce().createElement(ut,{answer:r.src,onAnswerChanges:e=>t({...r,src:e.answer}),items:i,options:{multi:a.multi,random:a.random,showSolution:a.showSolution,submitted:r.submitted},setSubmit:e=>t({...r,submitted:e}),solutionOptions:a.solutionOptions})},Ot=e=>{const t="instructor"===(0,Ee.useSelector)((e=>M(e)));return Ce().createElement(Ce().Fragment,null,t?Ce().createElement(St,{cellId:e.cellId}):Ce().createElement(_t,{cellId:e.cellId}))},Ft=e=>{const{addStudentSolutionField:t,changeField:n}=(0,Ie.useContext)(xe),l=(0,Ee.useSelector)((e=>{var t;return null===(t=e.user.identity)||void 0===t?void 0:t.username})),r=(0,Ee.useSelector)((t=>J(t,e.cellId,l))),a=(0,Ee.useSelector)((t=>I(t,e.cellId).showSolution)),i=(0,Ee.useSelector)((t=>U(t,I(t,e.cellId).solutionId)));return void 0===r?(t(e.cellId,"text-solution"),Ce().createElement(Ce().Fragment,null)):Ce().createElement(mt,{answer:r.src,onAnswerChanges:e=>n({...r,src:e.answer.src}),options:{showSolution:a,submitted:r.submitted},setSubmit:e=>n({...r,submitted:e}),solution:i.src})},Pt=e=>{const{changeField:t}=(0,Ie.useContext)(xe),n=(0,Ee.useSelector)((t=>I(t,e.cellId))),l=(0,Ee.useSelector)((e=>U(e,n.solutionId)));return void 0===l?Ce().createElement(Ce().Fragment,null):Ce().createElement(dt,{src:l.src,onChange:e=>t({...l,src:e})})},Nt=e=>{const t="instructor"===(0,Ee.useSelector)((e=>M(e)));return Ce().createElement(Ce().Fragment,null,t?Ce().createElement(Pt,{cellId:e.cellId}):Ce().createElement(Ft,{cellId:e.cellId}))};function kt(e){const t=(0,Ee.useSelector)((t=>I(t,e.cellId).descriptionId)),n=(0,Ee.useSelector)((t=>I(t,e.cellId).type)),l=(0,Ee.useSelector)((t=>I(t,e.cellId).visible)),r="instructor"===(0,Ee.useSelector)((e=>M(e)));return l||r?Ce().createElement(ke,{className:"ml-2 mr-2",borderOnHover:!0},Ce().createElement(yt,{cellId:e.cellId,index:e.index}),Ce().createElement(je,null,Ce().createElement("div",{className:"mb-2"},Ce().createElement(ht,{fieldId:t})),"code-cell"===n&&Ce().createElement(xt,{cellId:e.cellId}),"multiple-choice-cell"===n&&Ce().createElement(Ot,{cellId:e.cellId}),"text-cell"===n&&Ce().createElement(Nt,{cellId:e.cellId}))):Ce().createElement(Ce().Fragment,null)}const jt=({docId:e})=>{const t=(0,Ee.useSelector)((t=>f(t,e)));return Ce().createElement(Ce().Fragment,null,null==t?void 0:t.map(((e,t)=>Ce().createElement(kt,{cellId:e,index:t}))))};function Tt(e){const t="instructor"===(0,Ee.useSelector)((e=>M(e))),n=he.instance.getFactoryNamings().map((t=>Ce().createElement("button",{type:"button",className:"btn join-item grow",onClick:()=>e.addCell(t.id)},t.name)));return Ce().createElement(Ce().Fragment,null,t&&Ce().createElement("div",{className:"join flex mt-2"},n))}class Mt extends a.ReactWidget{render(){return Ie.createElement(Ee.Provider,{store:q},Ie.createElement(Se,{changeField:this._model.changeField.bind(this._model),deleteCell:this._model.deleteCell.bind(this._model),addFieldToPropertyArray:this._model.addFieldToPropertyArray.bind(this._model),removeFieldFromPropertyArray:this._model.removeFieldFromPropertyArray.bind(this._model),changeCell:this._model.changeCell.bind(this._model),swapCellPosition:this._model.swapCellPosition.bind(this._model),swapInPropertyArray:this._model.swapInPropertyArray.bind(this._model)},Ie.createElement(gt,{executeCode:e=>ye.instance.executeCode(e,this._sessionContext),executeTest:e=>ye.instance.executeTest(e,this._sessionContext),verifyTest:e=>ye.instance.verifyTest(e,this._sessionContext)},Ie.createElement(we,null),Ie.createElement(jt,{docId:this._model.docId}),Ie.createElement(Tt,{addCell:this._model.addCell.bind(this._model)}))))}constructor(e){super(),Object.defineProperty(this,"_model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_sessionContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._sessionContext=e.sessionContext,this._model=e.model,this.addClass("jp-puzzle-panel"),e.ready.then((()=>{this.update()}))}dispose(){this.isDisposed||(be.Signal.clearData(this),super.dispose())}}class At extends fe.DocumentWidget{constructor(e){console.log("creating puzzle doc widget"),super(e)}dispose(){this.content.dispose(),super.dispose()}}class zt extends fe.ABCWidgetFactory{constructor(e){console.log("creating factory for puzzle doc"),super(e)}createNewWidget(e){return new At({context:e,content:new Mt(e)})}}var Dt=n(9943),Rt=n(1242);class Ht{constructor(e){Object.defineProperty(this,"defaultKernelName",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"defaultKernelLanguage",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"sharedModel",{enumerable:!0,configurable:!0,writable:!0,value:ve.create()}),Object.defineProperty(this,"_onSharedModelChanged",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>{t.stateChange&&t.stateChange.forEach((e=>{"dirty"===e.name?this.dirty=e.newValue:e.oldValue!==e.newValue&&this.triggerStateChange({newValue:void 0,oldValue:void 0,...e})}))}}),Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_readOnly",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_collaborationEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stateChanged",{enumerable:!0,configurable:!0,writable:!0,value:new be.Signal(this)}),Object.defineProperty(this,"contentChanged",{enumerable:!0,configurable:!0,writable:!0,value:new be.Signal(this)}),Object.defineProperty(this,"_identity",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{collaborationEnabled:t,sharedModel:n,identity:l}=e;this._identity=l,q.dispatch(T(l)),this._collaborationEnabled=!!t,this.sharedModel=n||ve.create(),this.sharedModel.changed.connect(this._onSharedModelChanged)}get collaborative(){return this._collaborationEnabled}get dirty(){return this._dirty}set dirty(e){const t=this._dirty;e!==t&&(this._dirty=e,this.triggerStateChange({name:"dirty",oldValue:t,newValue:e}))}get isDisposed(){return this._isDisposed}get readOnly(){return this._readOnly}set readOnly(e){if(e===this._readOnly)return;const t=this._readOnly;this._readOnly=e,this.triggerStateChange({name:"readOnly",oldValue:t,newValue:e})}get clientId(){return this.sharedModel.awareness.clientID}get docId(){return this.sharedModel.ydoc.guid}addCell(e){var t,n;this.sharedModel.addCell(e,null!==(n=null===(t=this._identity)||void 0===t?void 0:t.username)&&void 0!==n?n:"")}changeField(e){this.sharedModel.changeField(e)}deleteCell(e){this.sharedModel.deleteCell(e)}changeCell(e){this.sharedModel.changeCell(e)}swapCellPosition(e,t){this.sharedModel.swapCellPosition(e,t)}addFieldToPropertyArray(e,t,n){var l,r;this.sharedModel.addFieldToPropertyArray(e,t,n,null!==(r=null===(l=this._identity)||void 0===l?void 0:l.username)&&void 0!==r?r:"")}removeFieldFromPropertyArray(e,t,n){this.sharedModel.removeFieldFromPropertyArray(e,t,n)}swapInPropertyArray(e,t,n,l){this.sharedModel.swapInPropertyArray(e,t,n,l)}getIdentity(){return this._identity}get stateChanged(){return this._stateChanged}dispose(){this._isDisposed||(this._isDisposed=!0,be.Signal.clearData(this))}toString(){const e=this.sharedModel.cells,t={cells:null!=e?e:[]};return JSON.stringify(t,null,2)}fromString(e){}toJSON(){return JSON.parse(this.toString()||"null")}fromJSON(e){this.fromString(JSON.stringify(e))}initialize(){}triggerStateChange(e){this._stateChanged.emit(e)}}class Bt{constructor(e){Object.defineProperty(this,"collaborative",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_identity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_docManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._docManager=e.docManager,this._identity=e.identity}get name(){return"puzzle-model"}get contentType(){return"puzzledoc"}get fileFormat(){return"text"}get isDisposed(){return this._disposed}dispose(){this._disposed=!0}preferredLanguage(e){return""}createNew(e){return e.docManager=this._docManager,e.identity=this._identity,new Ht(e)}}var Vt=n(8318),Lt=n.n(Vt),Ut=n(5879),Kt=n.n(Ut),Jt=n(237),Wt=n.n(Jt),qt=n(4862),Yt=n.n(qt),Gt=n(1050),$t=n.n(Gt),Qt=n(8495),Xt=n.n(Qt),Zt=n(5210),en={};en.styleTagTransform=Xt(),en.setAttributes=Yt(),en.insert=Wt().bind(null,"head"),en.domAPI=Kt(),en.insertStyleElement=$t(),Lt()(Zt.A,en),Zt.A&&Zt.A.locals&&Zt.A.locals;const tn="puzzle-editor",nn=new i.Token("puzzleDocTracker");var ln;!function(e){e.createNew="jupyterpuzzle:create-new-puzzle-file"}(ln||(ln={}));const rn={id:"collab_learning_extension:plugin",description:"A Collaborative Learning Extension for Jupyter Notebook",autoStart:!0,requires:[r.ILayoutRestorer,Dt.IFileBrowserFactory,a.ICommandPalette,s.ILauncher,Rt.IDocumentManager],optional:[l.ICollaborativeDrive],provides:nn,activate:(e,t,n,l,r,i,s)=>{const o=e.serviceManager.user;console.log("JupyterLab extension collab_learning_extension is activated!");const c=new a.WidgetTracker({namespace:"puzzle-documents"});if(t&&(console.log("reopen files"),t.restore(c,{command:"docmanager:open",args:e=>({path:e.context.path,factory:tn}),name:e=>e.context.path})),e.commands.addCommand(ln.createNew,{label:"New Puzzle File",caption:"Create a new Puzzle Playground",icon:e=>e.isPalette?void 0:st.fileIcon,execute:async t=>{var l;const r=t.cwd||(null===(l=n.tracker.currentWidget)||void 0===l?void 0:l.model.path);let a=await e.serviceManager.contents.newUntitled({path:r,type:"file",ext:".puzzle"});return a=await e.serviceManager.contents.save(a.path,{...a,format:"text",size:void 0,content:'{"cells": {"allIds": [],"byId": {}},"fields": { "byId": {},"allIds": []}}'}),e.commands.execute("docmanager:open",{path:a.path,factory:tn})}}),l.addItem({command:ln.createNew,category:""}),r.add({command:ln.createNew,category:"Other",rank:1}),e.docRegistry.addFileType({name:"puzzle",displayName:"Puzzle",mimeTypes:["text/json","application/json"],extensions:[".puzzle"],fileFormat:"text",contentType:"puzzledoc"}),!s)return void console.error("collaborative mode inactive");{const e=()=>ve.create();s.sharedModelFactory.registerDocumentFactory("puzzledoc",e)}const d=new Bt({docManager:i,identity:o.identity});e.docRegistry.addModelFactory(d);const u=new zt({name:tn,modelName:"puzzle-model",fileTypes:["puzzle"],defaultFor:["puzzle"],canStartKernel:!0,preferKernel:!0,shutdownOnClose:!0,autoStartDefault:!0});u.widgetCreated.connect(((e,t)=>{t.context.pathChanged.connect((()=>{c.save(t)})),c.add(t)})),e.docRegistry.addWidgetFactory(u)}}},5210:(e,t,n)=>{n.d(t,{A:()=>s});var l=n(6551),r=n.n(l),a=n(1992),i=n.n(a)()(r());i.push([e.id,"// extracted by mini-css-extract-plugin\nexport {};",""]);const s=i}}]);