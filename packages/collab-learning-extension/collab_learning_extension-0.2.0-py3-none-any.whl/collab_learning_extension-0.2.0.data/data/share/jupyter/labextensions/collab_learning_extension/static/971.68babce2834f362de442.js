"use strict";(self.webpackChunkcollab_learning_extension=self.webpackChunkcollab_learning_extension||[]).push([[971],{3525:(e,t,n)=>{n.r(t),n.d(t,{FACTORY:()=>tn,IPuzzleDocTracker:()=>nn,default:()=>ln});var r=n(8436),l=(n(1836),n(6371)),a=n(8440),i=n(7262),s=n(9265),o=n(667),c=n(2620);class d extends c.Maintainer{}class u extends c.Maintainer{}var m=n(5486);const p=(0,m.createSlice)({name:"cells",initialState:{byId:{},allIds:[]},reducers:{addCell(e,t){e.byId[t.payload.item.id]=t.payload.item,e.byId[t.payload.item.id].documentId=t.payload.documentIdentifier,e.allIds.push(t.payload.item.id)},deleteCell(e,t){delete e.byId[t.payload.id],e.allIds=e.allIds.filter((e=>e!==t.payload.id))},setCells(e,t){e.byId=t.payload.state.byId,t.payload.state.allIds.forEach((n=>e.byId[n].documentId=t.payload.documentIdentifier)),e.allIds=t.payload.state.allIds},updateCellProperty(e,t){e.byId[t.payload.id][t.payload.key]=t.payload.value},updateCellsAllIds(e,t){e.allIds=t.payload.ids}}}),{addCell:h,deleteCell:b,setCells:g,updateCellProperty:y,updateCellsAllIds:f}=p.actions,v=(0,m.createSelector)([(e,t)=>e,(e,t)=>t],((e,t)=>e.cells.allIds.filter((n=>e.cells.byId[n].documentId===t)))),I=(0,m.createSelector)([e=>e.cells.byId,(e,t)=>t],((e,t)=>e[t])),C=p.reducer,E=(0,m.createSlice)({name:"kernelExecutionResult",initialState:{byId:{},allIds:[]},reducers:{setKernelExecutionResult(e,t){e.byId[t.payload.referenceId]=t.payload,e.allIds.find((e=>e!==t.payload.referenceId))&&e.allIds.push(t.payload.referenceId)},removeKernelExecutionResult(e,t){e.byId[t.payload]&&(delete e.byId[t.payload],e.allIds=e.allIds.filter((e=>e!==t.payload)))}}}),{setKernelExecutionResult:w,removeKernelExecutionResult:S}=E.actions,x=E.reducer,_=(0,m.createSlice)({name:"kernelTestResult",initialState:{byId:{},allIds:[]},reducers:{setKernelTestResult(e,t){e.byId[t.payload.referenceId]=t.payload,e.allIds.push(t.payload.referenceId)},removeKernelTestResult(e,t){e.byId[t.payload]&&(delete e.byId[t.payload],e.allIds=e.allIds.filter((e=>e!==t.payload)))}}}),{setKernelTestResult:O,removeKernelTestResult:F}=_.actions,P=_.reducer,j="instructors",N=(0,m.createSlice)({name:"user",initialState:{identity:null,groups:[]},reducers:{setToStudent(e){e.groups=e.groups.filter((e=>e!==j))},setToInstructor(e){e.groups=[...e.groups,j]},setUserInformation(e,t){e.identity=t.payload.identity,e.groups=t.payload.groups}}}),{setToStudent:k,setToInstructor:T,setUserInformation:M}=N.actions,A=e=>e.user.groups,z=N.reducer,D=(0,m.createSlice)({name:"fields",initialState:{byId:{},allIds:[]},reducers:{addField(e,t){e.byId[t.payload.item.id]=t.payload.item,e.allIds.push(t.payload.item.id)},deleteField(e,t){delete e.byId[t.payload.id],e.allIds=e.allIds.filter((e=>e!==t.payload.id)),S(t.payload.id)},updateFieldProperty(e,t){e.byId[t.payload.id][t.payload.key]=t.payload.value},setFields(e,t){e.byId=t.payload.state.byId,e.allIds=t.payload.state.allIds},updateFieldsAllIds(e,t){e.allIds=t.payload.ids}}}),{addField:H,deleteField:R,updateFieldProperty:B,setFields:U,updateFieldsAllIds:V}=D.actions,L=e=>e.fields.byId,K=(0,m.createSelector)([L,(e,t)=>t],((e,t)=>e[t])),J=(0,m.createSelector)([L,(e,t)=>t],((e,t)=>t.map((t=>e[t])))),W=(0,m.createSelector)([e=>e.cells.byId,L,(e,t,n)=>t,(e,t,n)=>n],((e,t,n,r)=>e[n].studentSolutionIds.filter((e=>{var n;return(null===(n=t[e])||void 0===n?void 0:n.createdBy)===r})).map((e=>t[e])).find((e=>e)))),q=D.reducer,Y=(0,m.configureStore)({reducer:{fields:q,cells:C,user:z,kernelExecutionResult:x,kernelTestResult:P}});class G extends c.RootObserver{constructor(){super(...arguments),Object.defineProperty(this,"rootDispatcher",{enumerable:!0,configurable:!0,writable:!0,value:e=>{Y.dispatch(g(e))}}),Object.defineProperty(this,"addDispatcher",{enumerable:!0,configurable:!0,writable:!0,value:e=>{Y.dispatch(h(e))}}),Object.defineProperty(this,"deleteDispatcher",{enumerable:!0,configurable:!0,writable:!0,value:e=>{Y.dispatch(b(e))}}),Object.defineProperty(this,"updatePropertyDispatcher",{enumerable:!0,configurable:!0,writable:!0,value:e=>{Y.dispatch(y(e))}}),Object.defineProperty(this,"allIdsDispatcher",{enumerable:!0,configurable:!0,writable:!0,value:e=>{Y.dispatch(f(e))}})}}class $ extends c.RootObserver{constructor(){super(...arguments),Object.defineProperty(this,"rootDispatcher",{enumerable:!0,configurable:!0,writable:!0,value:e=>{Y.dispatch(U(e))}}),Object.defineProperty(this,"addDispatcher",{enumerable:!0,configurable:!0,writable:!0,value:e=>{Y.dispatch(H(e))}}),Object.defineProperty(this,"deleteDispatcher",{enumerable:!0,configurable:!0,writable:!0,value:e=>{Y.dispatch(R(e))}}),Object.defineProperty(this,"updatePropertyDispatcher",{enumerable:!0,configurable:!0,writable:!0,value:e=>{Y.dispatch(B(e))}}),Object.defineProperty(this,"allIdsDispatcher",{enumerable:!0,configurable:!0,writable:!0,value:e=>{Y.dispatch(V(e))}})}}class Q{create(e){return this.createSpecific(e)}}class X extends Q{createField(){return{id:i.UUID.uuid4()}}}class Z extends X{get identifier(){return"code"}createSpecific(){return{...this.createField(),src:"",type:"code",language:"python"}}}class ee extends X{get identifier(){return"markdown"}createSpecific(){return{...this.createField(),src:"",type:"markdown"}}}class te extends X{get identifier(){return"multiple-choice-item"}createSpecific(){return{...this.createField(),src:""}}}class ne extends X{get identifier(){return"test-code"}createSpecific(){return{...this.createField(),src:"",type:"test-code",language:"python",name:"",verified:!1,createdBy:""}}}class re{constructor(){Object.defineProperty(this,"factories",{enumerable:!0,configurable:!0,writable:!0,value:[]})}create(e,t){return this.findFactory(e).create(t)}findFactory(e){const t=this.factories.find((t=>t.identifier===e));if(void 0!==t)return t;throw Error("Factory for type: "+e+" was not found")}}class le extends X{createField(){return{...super.createField(),comment:"",grade:-1,createdBy:"",submitted:!1}}}class ae extends le{get identifier(){return"code-solution"}createSpecific(){return{...this.createField(),language:"python",src:"",type:"code-solution"}}}class ie extends le{get identifier(){return"multiple-choice-solution"}createSpecific(){return{...this.createField(),type:"multiple-choice-solution",src:[]}}}class se extends le{get identifier(){return"text-solution"}createSpecific(){return{...this.createField(),type:"text-solution",src:""}}}class oe extends re{static get instance(){return this._instance}constructor(){super(),this.factories.push(new Z,new ee,new te,new ne),this.factories.push(new ae,new ie,new se)}}Object.defineProperty(oe,"_instance",{enumerable:!0,configurable:!0,writable:!0,value:new oe});const ce=oe;class de extends Q{constructor(){super()}_createCell(e){return{id:i.UUID.uuid4(),type:this.identifier,descriptionId:e("markdown"),studentSolutionIds:[],visible:!1,showSolution:!1}}}class ue extends de{get identifier(){return"code-cell"}get text(){return"Coding Exercise"}createSpecific(e){return{...this._createCell(e),type:"code-cell",startingCodeId:e("code"),solutionCodeId:e("code"),testingCodeIds:[]}}}class me extends de{get text(){return"Text response"}get identifier(){return"text-cell"}createSpecific(e){return{...this._createCell(e),type:"text-cell",solutionId:e("markdown")}}}class pe extends de{get text(){return"Multiple choice"}get identifier(){return"multiple-choice-cell"}createSpecific(e){return{...this._createCell(e),type:"multiple-choice-cell",solutionOptions:[],options:[],multi:!1,random:!1}}}class he extends re{static get instance(){return this._instance}constructor(){super(),this.factories.push(new ue),this.factories.push(new me),this.factories.push(new pe)}getFactoryNamings(){return this.factories.map((e=>({id:e.identifier,name:e.text})))}}Object.defineProperty(he,"_instance",{enumerable:!0,configurable:!0,writable:!0,value:new he});const be=he;var ge=n(4602);class ye{constructor(){Object.defineProperty(this,"onStreamMessage",{enumerable:!0,configurable:!0,writable:!0,value:e=>({output:e.text,type:"stream"})}),Object.defineProperty(this,"getErrorMessage",{enumerable:!0,configurable:!0,writable:!0,value:e=>e.ename+(e.evalue?": "+e.evalue:"")}),Object.defineProperty(this,"onError",{enumerable:!0,configurable:!0,writable:!0,value:e=>({output:e,type:"error"})}),Object.defineProperty(this,"onOutputObject",{enumerable:!0,configurable:!0,writable:!0,value:e=>"object"==typeof e.data?{...this.getDataObjectOutputValue(e)}:null})}getDataObjectOutputValue(e){const t=e.data;return void 0!==t["application/json"]?{output:t["application/json"],type:"application/json"}:void 0!==t["image/png"]?{output:t["image/png"],type:"image/png"}:void 0!==t["text/html"]?{output:t["text/html"],type:"text/html"}:void 0!==t["text/plain"]?{output:t["text/plain"],type:"text/plain"}:{output:"Output type not supported",type:"error"}}}class fe{constructor(){Object.defineProperty(this,"_executeCode",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>{const n=[];return new Promise(((r,l)=>{var a,i,s;t&&(null===(a=t.session)||void 0===a?void 0:a.kernel)&&((null===(s=null===(i=t.session)||void 0===i?void 0:i.kernel)||void 0===s?void 0:s.requestExecute({code:this._extractSrc(e)})).onIOPub=e=>{const t=e.header.msg_type,l=e.content;switch(t){case"execute_result":{const e=this._executionOutputHelper.onOutputObject(l);e&&n.push(e);break}case"display_data":{const e=this._executionOutputHelper.onOutputObject(l);e&&n.push(e);break}case"error":n.push(this._executionOutputHelper.onError(this._executionOutputHelper.getErrorMessage(l)));break;case"stream":n.push(this._executionOutputHelper.onStreamMessage(l));break;case"status":"idle"===l.execution_state&&r(n)}})}))}}),Object.defineProperty(this,"_executionOutputHelper",{enumerable:!0,configurable:!0,writable:!0,value:new ye}),Object.defineProperty(this,"_verifiedTestSignal",{enumerable:!0,configurable:!0,writable:!0,value:new ge.Signal(this)})}static get instance(){return this._instance}get verifiedTestSignal(){return this._verifiedTestSignal}executeCode(e,t){Y.dispatch(S(e.assertionCodeId)),this._executeCode(e,t).then((t=>Y.dispatch(w({referenceId:e.assertionCodeId,outputs:t}))))}executeTest(e,t){Y.dispatch(S(e.assertionCodeId)),this._executeTest(e,t).then((t=>Y.dispatch(O({referenceId:e.assertionCodeId,result:t}))))}verifyTest(e,t){Y.dispatch(S(e.assertionCodeId)),this._executeTest(e,t).then((t=>{t&&this._verifiedTestSignal.emit({referenceId:e.assertionCodeId}),Y.dispatch(O({referenceId:e.assertionCodeId,result:t}))}))}_executeTest(e,t){return new Promise(((n,r)=>{var l,a,i;const s=this._extractSrc(e);if(!s.includes("assert")||!t||!(null===(l=t.session)||void 0===l?void 0:l.kernel))return Y.dispatch(w({referenceId:e.assertionCodeId,outputs:[this._executionOutputHelper.onError("No asserts were found in the test code")]})),n(!1);(null===(i=null===(a=t.session)||void 0===a?void 0:a.kernel)||void 0===i?void 0:i.requestExecute({code:s})).onIOPub=t=>{const r=t.header.msg_type,l=t.content;switch(r){case"status":if("idle"===l.execution_state)return n(!0);break;case"error":return Y.dispatch(w({referenceId:e.assertionCodeId,outputs:[this._executionOutputHelper.onError(this._executionOutputHelper.getErrorMessage(l))]})),n(!1)}}}))}_extractSrc(e){const t=Y.getState().cells.byId[e.cellId],n=[];return n.push(Y.getState().fields.byId[t.startingCodeId]),n.push(Y.getState().fields.byId[e.codeBodyId]),n.push(Y.getState().fields.byId[e.assertionCodeId]),n.map((e=>e.src)).join("\r\n")}}Object.defineProperty(fe,"_instance",{enumerable:!0,configurable:!0,writable:!0,value:new fe});class ve extends o.YDocument{constructor(){super(),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"1.0.0"}),Object.defineProperty(this,"_cellsMaintainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fieldsMaintainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fieldsObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cellsObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const e=this.ydoc.getMap("cells"),t=this.ydoc.getMap("fields");this._cellsMaintainer=new u(e,this.transact.bind(this)),this._fieldsMaintainer=new d(t,this.transact.bind(this)),this._cellsObserver=new G(e,this.ydoc.guid),this._fieldsObserver=new $(t),fe.instance.verifiedTestSignal.connect(((e,t)=>{const n=this._fieldsMaintainer.getObjectAsJson(t.referenceId);n.verified=!0,this._fieldsMaintainer.changeObject(n)}))}dispose(){this.isDisposed||(super.dispose(),this._fieldsObserver.dispose(),this._cellsObserver.dispose())}static create(){return new ve}get cells(){return[]}addCell(e,t){this.transact((()=>{this._cellsMaintainer.addObject(be.instance.create(e,(e=>this.fieldCreation(e,t))))}))}deleteCell(e){this._cellsMaintainer.deleteObject(e,((e,t)=>{this._fieldsMaintainer.deleteObject(t)}))}changeCell(e){this._cellsMaintainer.changeObject(e)}swapCellPosition(e,t){this._cellsMaintainer.swapObjectPosition(e,t)}changeField(e){this._fieldsMaintainer.changeObject(e)}addFieldToPropertyArray(e,t,n,r){this.transact((()=>{this._cellsMaintainer.addToPropertyArray(e,t,this.fieldCreation(n,r))}))}removeFieldFromPropertyArray(e,t,n){this._cellsMaintainer.removeFromPropertyArray(e,t,n,(()=>{this._fieldsMaintainer.deleteObject(n)}))}swapInPropertyArray(e,t,n,r){this._cellsMaintainer.swapInPropertyArray(e,t,n,r)}fieldCreation(e,t){const n=ce.instance.create(e,(e=>this.fieldCreation(e,t)));return n.createdBy=t,this._fieldsMaintainer.addObject(n),n.id}}var Ie=n(921),Ce=n(3345),Ee=n.n(Ce),we=n(9316);const Se=({hide:e})=>{const t=(0,we.useSelector)((e=>A(e))).includes(j),n=(0,we.useDispatch)();return e?Ee().createElement(Ee().Fragment,null):Ee().createElement("div",{className:"form-control items-end"},Ee().createElement("label",{className:"label cursor-pointer"},Ee().createElement("span",{className:"label-text mr-2"},"Instructor"),Ee().createElement("input",{type:"checkbox",className:"checkbox checkbox-sm",defaultChecked:t,onChange:e=>{e.target.checked?n(T()):n(k())}})))},xe=(0,Ce.createContext)(null),_e=e=>Ee().createElement(xe.Provider,{value:{...e,addStudentSolutionField:(t,n)=>{e.addFieldToPropertyArray(t,"studentSolutionIds",n)},addTestCodeField:t=>e.addFieldToPropertyArray(t,"testingCodeIds","test-code"),removeTestCodeField:(t,n)=>e.removeFieldFromPropertyArray(t,"testingCodeIds",n),addMultipleChoiceOption:t=>{e.addFieldToPropertyArray(t,"options","multiple-choice-item")},removeMultipleChoiceOption:(t,n)=>{e.removeFieldFromPropertyArray(t,"options",n)},swapPositionOfMultipleChoiceOption:(t,n,r)=>{e.swapInPropertyArray(t,"options",n,r)}}},e.children),Oe=({label:e,className:t,icon:n,disabled:r=!1,onClick:l})=>Ee().createElement("button",{onClick:l,className:"btn btn-light btn-sm "+t,disabled:r},e?n?e+" ":e:""," ",n&&Ee().createElement("span",{dangerouslySetInnerHTML:{__html:n}})),Fe=e=>Ee().createElement("div",{className:"flex justify-end "+e.className},e.children),Pe=({onSubmit:e,onUndo:t,submitted:n=!1,showBadgeOnSubmitted:r=!1,finalized:l=!1,labelSubmit:a="Submit",labelUndoSubmit:i="Undo Submission",iconSubmit:s,iconUndoSubmit:o,className:c=""})=>Ee().createElement(Fe,{className:c},r&&n&&Ee().createElement("span",{className:"badge badge-success mr-4"},"Submitted"),Ee().createElement(Oe,{onClick:e,disabled:n,label:a,icon:s}),!l&&Ee().createElement(Oe,{className:"ml-4",onClick:t,disabled:!n,label:i,icon:o}));var je=n(1185);const Ne=e=>Ee().createElement(je.CodeComponent,{language:e.language,onCodeChange:e.onChange,src:e.src,config:{options:e.readonly?je.readonlyAdjustableHeightCodeOptions:je.adjustableHeightCodeOptions}}),ke=({borderOnHover:e=!1,children:t,className:n})=>Ee().createElement("div",{className:"relative transition-all ease-in-out duration-300 group mt-2 "+n+(e?" focus-within:border-solid hover:border-solid hover:focus-within:border-base-300 focus-within:border-base-300  hover:border-base-200 border-2 border-base-100":" border-solid border-base-200 border-2"),style:{minHeight:"24px"}},t),Te=({className:e,children:t})=>Ee().createElement("div",{className:"pl-4 pr-4 pt-1 pb-1 w-full "+e},t),Me=({children:e,className:t,showOnHover:n=!0,absolute:r=!1})=>Ee().createElement(Fe,{className:t},Ee().createElement("div",{className:(n?"transition ease-in-out duration-200 opacity-0 group-hover:opacity-100 ":"")+(r?"absolute top-0 right-0 z-10":"inline-flex")},r?Ee().createElement("div",{className:"inline-flex"}," ",e," "):e)),Ae=({icon:e,label:t,hide:n=!1,disabled:r=!1,onClick:l})=>{const a=void 0!==t&&t.length>0;return n?Ee().createElement(Ee().Fragment,null):Ee().createElement("button",{className:"btn btn-sm rounded-none "+(a?"":"btn-square"),onClick:l,disabled:r},a&&Ee().createElement("span",null,t),Ee().createElement("span",{dangerouslySetInnerHTML:{__html:e}}))},ze=({checked:e,label:t,onChange:n})=>Ee().createElement("div",{className:"form-control bg-base-200 w-fit flex justify-center pl-2 pr-2 shadow-sm"},Ee().createElement("label",{className:"label cursor-pointer p-0"},Ee().createElement("span",{className:"label-text pr-2"},t),Ee().createElement("input",{type:"checkbox",className:"toggle toggle-xs",onChange:e=>n(e.target.checked),checked:e}))),De=({label:e,className:t,children:n})=>e?Ee().createElement(ke,{className:"indicator w-full pb-1 "+t},Ee().createElement("span",{className:"indicator-item indicator-center badge"},e),Ee().createElement(Te,null,n)):Ee().createElement(Te,null,n),He=({label:e,className:t,children:n})=>e?Ee().createElement(ke,{className:"indicator w-full pt-3 pb-3 "+t},e&&Ee().createElement("div",{className:"indicator-item indicator-center badge text-center"},e),Ee().createElement(Te,null,n)):Ee().createElement(Te,{className:t},n);var Re=n(555),Be=n.n(Re),Ue=n(5579),Ve=n.n(Ue);const Le={rehypePlugins:[Be()],remarkPlugins:[Ve()]},Ke=e=>Ee().createElement(je.MarkdownEditorComponent,{config:{jupyter:!0,markdownConfig:Le,codeConfig:e.codeConfig},src:e.src,onChange:e.onChange});var Je=n(8745),We=n.n(Je);const qe=({html:e})=>{return Ee().createElement("div",{dangerouslySetInnerHTML:(t=e,{__html:We().sanitize(t,{ADD_ATTR:["border"],FORBID_TAGS:["style"],FORBID_ATTR:["style"],USE_PROFILES:{html:!0}})})});var t},Ye=e=>Ee().createElement(Ee().Fragment,null," ",!e.hide&&Ee().createElement(Ee().Fragment,null,Ee().createElement("input",{type:"radio",name:e._id,role:"tab",className:"inline-block tab "+(e._isActive?"tab-active":"")+" "+e.className,"aria-label":e.label,style:{width:"100%",wordBreak:"break-all",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},onClick:()=>{var t;return e._setActiveTab&&e._setActiveTab(null!==(t=e._index)&&void 0!==t?t:0)}}),Ee().createElement("div",{role:"tabpanel",className:"tab-content bg-base-100 "+e.classNameContent},e.children))),Ge=({pageSize:e=6,children:t,className:n,classNamePrevButton:r,onTabChange:l})=>{const a=(0,Ce.useId)(),[i,s]=Ee().useState(0),[o,c]=Ee().useState(0),d=e=>{i!==e&&(void 0!==l&&l(e),s(e))},u=Ee().Children.count(t);u<i+1&&(s(i-1),l&&l(i-1));const m=$e(Ee().Children.toArray(t),o,e);return Ee().createElement(Ee().Fragment,null,Ee().createElement("div",{role:"tablist",className:"tabs tabs-bordered grid-cols-"+e+" "+n,style:{gridTemplateColumns:"25px repeat("+e+", calc(calc(100% - 50px)/"+e+")) 25px"}},Ee().createElement("button",{disabled:0===o,className:"btn btn-xs rounded-none flex self-center btn-square "+r,style:{gridRowStart:1},onClick:()=>{c(o-1),s((o-1)*e)}},"«"),m.map(((t,n)=>Ee().isValidElement(t)?Ee().cloneElement(t,{_id:a,_index:n+o*e,_isActive:n+o*e===i,_setActiveTab:d}):t)),Ee().createElement("button",{disabled:(o+1)*e+1>u,className:"btn btn-xs rounded-none flex self-center ",style:{gridRowStart:1,justifySelf:"left"},onClick:()=>{c(o+1),s((o+1)*e)}},"»")))},$e=(e,t,n)=>{const r=t*n;return e.splice(r,n)},Qe=({isInstructor:e,src:t,onChange:n})=>Ee().createElement(Ee().Fragment,null,e?Ee().createElement(He,{label:"Exercise description"},Ee().createElement(Ke,{src:t,onChange:n})):Ee().createElement(je.MarkdownComponent,{src:t})),Xe=e=>Ee().createElement(Ee().Fragment,null,Ee().createElement(De,{label:e.label},Ee().createElement(Ne,{...e})));var Ze=n(6938);const et={"text/html":({output:e})=>Ee().createElement(qe,{html:e}),"application/json":({output:e})=>Ee().createElement(Ze.JsonView,{data:e,style:{...Ze.defaultStyles,container:"bg-base-100"}}),"image/png":({output:e})=>Ee().createElement("img",{src:`data:image/png;base64,${e}`}),error:({output:e})=>Ee().createElement("div",{className:"alert alert-error rounded-none",style:{whiteSpace:"pre-wrap"}},e),default:({output:e})=>Ee().createElement("div",{className:"alert alert-base-200 rounded-none",style:{whiteSpace:"pre-wrap"}},e)},tt=({object:e})=>{const t=et[e.type]||et.default;return e.output?Ee().createElement(t,{output:e.output}):Ee().createElement(Ee().Fragment,null)},nt=({objects:e=[],className:t,showIndex:n=!0})=>{const r=e.map(((e,r)=>Ee().createElement("div",{className:"flex "+t},n&&Ee().createElement("span",{className:"pr-2"},"[",r+1,"]"),Ee().createElement(tt,{key:r,object:e}))));return Ee().createElement("div",{className:"flex flex-col space-y-4"},r)},rt=e=>Ee().createElement(Ye,{...e,className:(void 0!==e.success?e.success?"bg-success/50 ":"bg-error/50 ":"")+e.className,classNameContent:"mt-4"},e.children);rt.Code=Ne,rt.CodeName=({name:e,onNameChange:t})=>Ee().createElement("div",{className:"input-group mb-3 pl-16"},Ee().createElement("input",{type:"text",placeholder:"Test name",className:"input input-bordered input-sm w-full",value:e,onChange:e=>t(e.target.value)})),rt.Output=e=>Ee().createElement(nt,{...e,className:"ml-9 mt-2"});const lt=({isInstructor:e,children:t,onTabChange:n})=>Ee().createElement(He,{label:e?"AssertionCode":void 0,className:"mt-6"},Ee().createElement(Ge,{onTabChange:n},t)),at=({children:e})=>Ee().createElement(Ee().Fragment,null,e);at.StartingCode=e=>Ee().createElement(Xe,{...e,label:e.readonly?void 0:"Starting Code"}),at.SolutionCode=e=>Ee().createElement(Xe,{...e,label:"Solution Code"}),at.StudentCode=e=>Ee().createElement(Xe,{...e}),at.AssertionCode=lt,at.Toolbar=({children:e})=>Ee().createElement(Te,null,Ee().createElement(Me,{showOnHover:!1},e));const it=({children:e,label:t="Configuration"})=>Ee().createElement(He,{label:t},e),st=({label:e,value:t,onChange:n})=>Ee().createElement("div",{className:"form-control"},Ee().createElement("label",{className:"cursor-pointer label"},Ee().createElement("span",{className:"label-text"},e),Ee().createElement("input",{type:"checkbox",onChange:e=>n(e.target.checked),checked:t,className:"checkbox checkbox-sm"})));var ot=n(2126);const ct=({content:e,parentId:t,optionId:n,index:r,maxIndex:l,selected:a,options:i,onItemContentChange:s,onSelectionChange:o,swapPosition:c,remove:d})=>Ee().createElement(ke,null,Ee().createElement(Me,{showOnHover:!1},Ee().createElement(Ae,{hide:i.randomOrder,disabled:0===r,icon:ot.moveUpIcon.svgstr,onClick:()=>{c(r,r-1)}}),Ee().createElement(Ae,{hide:i.randomOrder,disabled:l===r,icon:ot.moveDownIcon.svgstr,onClick:()=>{c(r,r+1)}}),Ee().createElement(Ae,{icon:ot.deleteIcon.svgstr,onClick:d})),Ee().createElement(Te,null,Ee().createElement("div",{className:"flex flex-row"},Ee().createElement("div",{className:"flex-grow"},Ee().createElement(Ke,{src:e,onChange:s})),Ee().createElement("label",{className:"label"},Ee().createElement("div",{className:"cursor-pointer"},i.multi?Ee().createElement("input",{type:"checkbox",onChange:e=>o(n,e.target.checked),checked:a,className:"checkbox checkbox-sm"}):Ee().createElement("input",{type:"radio",name:"radio-"+t,className:"radio radio-sm",defaultChecked:a,onChange:e=>o(n,e.target.checked)})))))),dt=({children:e,addMultipleChoiceOption:t})=>Ee().createElement(Ee().Fragment,null,e,Ee().createElement(Fe,{className:"mt-2"},Ee().createElement(Oe,{icon:ot.addIcon.svgstr,onClick:t}))),ut=({src:e,onChange:t})=>Ee().createElement(He,{label:"Solution"},Ee().createElement(Ke,{src:e,onChange:t})),mt=({options:e,items:t,solutionOptions:n,answer:r,onAnswerChanges:l,setSubmit:a})=>Ee().createElement(Ee().Fragment,null,Ee().createElement(je.MultipleChoiceComponent,{exerciseObject:{items:t,correctAnswers:n,metadata:{multi:e.multi,disabled:e.submitted,showEvaluation:e.submitted&&e.showSolution,showIndicator:e.submitted&&e.showSolution,random:e.random,markdownConfig:Le,multipleChoiceItemColoring:{}}},onAnswerChanges:l,initialAnswer:{answer:r}}),Ee().createElement(Pe,{finalized:e.showSolution,showBadgeOnSubmitted:!0,submitted:e.submitted,onSubmit:()=>a(!0),onUndo:()=>a(!1)})),pt=({options:e,answer:t,solution:n,setSubmit:r,onAnswerChanges:l})=>{const a=e.submitted?je.readonlyAdjustableHeightCodeOptions:je.adjustableHeightCodeOptions;return Ee().createElement(Ee().Fragment,null,Ee().createElement(je.TextResponseComponent,{exerciseObject:{solution:n,metadata:{showSolution:e.showSolution&&e.submitted,markdownEditorConfig:{jupyter:!0,markdownConfig:Le,codeConfig:{options:a}}}},initialAnswer:{answer:{src:t}},onAnswerChanges:l}),Ee().createElement(Pe,{className:"mt-2",finalized:e.showSolution,showBadgeOnSubmitted:!0,submitted:e.submitted,onSubmit:()=>r(!0),onUndo:()=>r(!1)}))},ht=new ot.LabIcon({name:"code:run-all",svgstr:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.915 8.24L2 14.48V2l8.915 6.24zm-7.92 4.328L9.181 8.24 2.995 3.912v8.656zM5.5 14.48v-1.229l7.18-5.01L5.5 3.228V2l8.915 6.24L5.5 14.48z"/></svg>'});function bt({fieldId:e}){const t=(0,we.useSelector)((t=>K(t,e))),n=(0,we.useSelector)((e=>A(e))).includes(j),{changeField:r}=(0,Ce.useContext)(xe);return void 0===t?Ee().createElement(Ee().Fragment,null):Ee().createElement(Qe,{isInstructor:n,onChange:e=>{r({...t,src:e})},src:t.src})}const gt=(0,Ce.createContext)(null),yt=e=>Ee().createElement(gt.Provider,{value:{...e}},e.children);function ft(e){const t=(0,we.useSelector)((e=>A(e))).includes(j),n=(0,we.useSelector)((e=>e.cells.allIds.length)),r=(0,we.useSelector)((t=>I(t,e.cellId))),{deleteCell:l,swapCellPosition:a,changeCell:i}=(0,Ce.useContext)(xe);return Ee().createElement(Ee().Fragment,null,t&&Ee().createElement(Ee().Fragment,null,Ee().createElement(Me,{showOnHover:!0},Ee().createElement(ze,{checked:r.showSolution,onChange:e=>i({...r,showSolution:e}),label:"Show Solution"}),Ee().createElement(ze,{checked:r.visible,onChange:e=>i({...r,visible:e}),label:"Visibility"}),Ee().createElement(Ae,{disabled:0===e.index,icon:ot.moveUpIcon.svgstr,onClick:()=>{const t=e.index-1;a(e.index,t)}}),Ee().createElement(Ae,{disabled:n-1===e.index,icon:ot.moveDownIcon.svgstr,onClick:()=>{const t=e.index+1;a(e.index,t)}}),Ee().createElement(Ae,{icon:ot.deleteIcon.svgstr,onClick:()=>{l(e.cellId)}}))))}const vt=e=>{var t;const{changeField:n}=(0,Ce.useContext)(xe),r=(0,we.useSelector)((t=>K(t,e.assertionCodeId))),l=(0,we.useSelector)((e=>{var t;return null===(t=e.user.identity)||void 0===t?void 0:t.username})),a=(0,we.useSelector)((t=>((e,t)=>e.kernelExecutionResult.byId[t])(t,e.assertionCodeId))),i=null===(t=(0,we.useSelector)((t=>((e,t)=>e.kernelTestResult.byId[t])(t,e.assertionCodeId))))||void 0===t?void 0:t.result;return(null==r?void 0:r.verified)||(null==r?void 0:r.createdBy)===l?Ee().createElement(rt,{...e,label:r.name?r.name:"New Test",success:i},!r.verified&&Ee().createElement(rt.CodeName,{name:r.name,onNameChange:e=>n({...r,name:e})}),Ee().createElement(rt.Code,{language:r.language,src:r.src,onChange:e=>n({...r,src:e}),readonly:r.verified}),Ee().createElement(rt.Output,{objects:(null==a?void 0:a.outputs)?null==a?void 0:a.outputs:[]})):Ee().createElement(Ee().Fragment,null)},It=({cellId:e,isInstructor:t,onTabChange:n})=>{const r=(0,we.useSelector)((t=>I(t,e).testingCodeIds)).map((e=>Ee().createElement(vt,{assertionCodeId:e})));return Ee().createElement(lt,{onTabChange:n,isInstructor:t},r)};function Ct({cellId:e,isInstructor:t}){const{changeField:n}=(0,Ce.useContext)(xe),r=(0,we.useSelector)((t=>K(t,I(t,e).solutionCodeId)));return void 0!==r&&t?Ee().createElement(at.SolutionCode,{language:r.language,src:r.src,onChange:e=>n({...r,src:e}),readonly:!1}):Ee().createElement(Ee().Fragment,null)}function Et({cellId:e,isInstructor:t}){const{changeField:n}=(0,Ce.useContext)(xe),r=(0,we.useSelector)((t=>K(t,I(t,e).startingCodeId)));return void 0===r?Ee().createElement(Ee().Fragment,null):Ee().createElement(at.StartingCode,{language:r.language,src:r.src,onChange:e=>n({...r,src:e}),readonly:!t})}function wt({cellId:e,isInstructor:t}){const{addStudentSolutionField:n,changeField:r}=(0,Ce.useContext)(xe);if(t)return Ee().createElement(Ee().Fragment,null);const l=(0,we.useSelector)((e=>{var t;return null===(t=e.user.identity)||void 0===t?void 0:t.username})),a=(0,we.useSelector)((t=>W(t,e,l)));return void 0===a?(n(e,"code-solution"),Ee().createElement(Ee().Fragment,null)):Ee().createElement(at.StudentCode,{language:a.language,src:a.src,onChange:e=>r({...a,src:e})})}const St=({cellId:e,isInstructor:t,assertionIndex:n})=>{var r;const{removeTestCodeField:l,addTestCodeField:a}=(0,Ce.useContext)(xe),{verifyTest:i,executeTest:s}=(0,Ce.useContext)(gt),o=(0,we.useSelector)((t=>I(t,e).solutionCodeId)),c=(0,we.useSelector)((e=>{var t;return null===(t=e.user.identity)||void 0===t?void 0:t.username})),d=null===(r=(0,we.useSelector)((t=>W(t,e,c))))||void 0===r?void 0:r.id,u=(0,we.useSelector)((t=>I(t,e).testingCodeIds)),m=(0,we.useSelector)((e=>K(e,u[n])));return Ee().createElement(at.Toolbar,null,Ee().createElement(Ae,{icon:ot.addIcon.svgstr,onClick:()=>a(e)}),Ee().createElement(Ae,{hide:null==m?void 0:m.verified,icon:ot.checkIcon.svgstr,disabled:void 0===(null==m?void 0:m.name)||""===m.name,onClick:()=>i({cellId:e,assertionCodeId:u[n],codeBodyId:o})}),Ee().createElement(Ae,{hide:u.length<2,icon:ht.svgstr,onClick:()=>u.forEach((n=>{s({cellId:e,assertionCodeId:n,codeBodyId:t?o:d})}))}),Ee().createElement(Ae,{hide:!(null==m?void 0:m.verified),icon:ot.runIcon.svgstr,onClick:()=>s({cellId:e,assertionCodeId:u[n],codeBodyId:t?o:d})}),Ee().createElement(Ae,{hide:!t&&(null==m?void 0:m.createdBy)!==c&&(null==m?void 0:m.verified),icon:ot.deleteIcon.svgstr,onClick:()=>l(e,u[n])}))};function xt({cellId:e}){const t=(0,we.useSelector)((e=>A(e))).includes(j),[n,r]=Ee().useState(0);return Ee().createElement(at,null,Ee().createElement(Et,{cellId:e,isInstructor:t}),Ee().createElement(wt,{cellId:e,isInstructor:t}),Ee().createElement(Ct,{cellId:e,isInstructor:t}),Ee().createElement(It,{cellId:e,isInstructor:t,onTabChange:e=>r(e)}),Ee().createElement(St,{cellId:e,isInstructor:t,assertionIndex:n}))}function _t(e){const{addMultipleChoiceOption:t,changeCell:n,changeField:r,removeMultipleChoiceOption:l,swapPositionOfMultipleChoiceOption:a}=(0,Ce.useContext)(xe),i=(0,we.useSelector)((t=>I(t,e.cellId))),s=(0,we.useSelector)((e=>J(e,i.options))),o=(e,t)=>{t?i.multi?n({...i,solutionOptions:[...i.solutionOptions,e]}):n({...i,solutionOptions:[e]}):n({...i,solutionOptions:i.solutionOptions.filter((t=>t!==e))})},c=s.map(((t,n)=>Ee().createElement(ct,{content:t.src,index:n,selected:i.solutionOptions.includes(t.id),parentId:e.cellId,maxIndex:i.options.length-1,onItemContentChange:e=>r({...t,src:e}),optionId:t.id,onSelectionChange:o,options:{multi:i.multi,randomOrder:i.random},remove:()=>l(e.cellId,t.id),swapPosition:(t,n)=>a(e.cellId,t,n)})));return Ee().createElement(dt,{addMultipleChoiceOption:()=>t(e.cellId)},Ee().createElement(it,{label:"Configuration"},Ee().createElement(st,{label:"Multi Selection",onChange:e=>n({...i,multi:e}),value:i.multi}),Ee().createElement(st,{label:"Random Order",onChange:e=>n({...i,random:e}),value:i.random})),c)}const Ot=e=>{const{changeField:t,addStudentSolutionField:n}=(0,Ce.useContext)(xe),r=(0,we.useSelector)((e=>{var t;return null===(t=e.user.identity)||void 0===t?void 0:t.username})),l=(0,we.useSelector)((t=>W(t,e.cellId,r))),a=(0,we.useSelector)((t=>I(t,e.cellId))),i=(0,we.useSelector)((e=>J(e,a.options)));return void 0===l?(n(e.cellId,"multiple-choice-solution"),Ee().createElement(Ee().Fragment,null)):Ee().createElement(mt,{answer:l.src,onAnswerChanges:e=>t({...l,src:e.answer}),items:i,options:{multi:a.multi,random:a.random,showSolution:a.showSolution,submitted:l.submitted},setSubmit:e=>t({...l,submitted:e}),solutionOptions:a.solutionOptions})},Ft=e=>{const t=(0,we.useSelector)((e=>A(e))).includes(j);return Ee().createElement(Ee().Fragment,null,t?Ee().createElement(_t,{cellId:e.cellId}):Ee().createElement(Ot,{cellId:e.cellId}))},Pt=e=>{const{addStudentSolutionField:t,changeField:n}=(0,Ce.useContext)(xe),r=(0,we.useSelector)((e=>{var t;return null===(t=e.user.identity)||void 0===t?void 0:t.username})),l=(0,we.useSelector)((t=>W(t,e.cellId,r))),a=(0,we.useSelector)((t=>I(t,e.cellId).showSolution)),i=(0,we.useSelector)((t=>K(t,I(t,e.cellId).solutionId)));return void 0===l?(t(e.cellId,"text-solution"),Ee().createElement(Ee().Fragment,null)):Ee().createElement(pt,{answer:l.src,onAnswerChanges:e=>n({...l,src:e.answer.src}),options:{showSolution:a,submitted:l.submitted},setSubmit:e=>n({...l,submitted:e}),solution:i.src})},jt=e=>{const{changeField:t}=(0,Ce.useContext)(xe),n=(0,we.useSelector)((t=>I(t,e.cellId))),r=(0,we.useSelector)((e=>K(e,n.solutionId)));return void 0===r?Ee().createElement(Ee().Fragment,null):Ee().createElement(ut,{src:r.src,onChange:e=>t({...r,src:e})})},Nt=e=>{const t=(0,we.useSelector)((e=>A(e))).includes(j);return Ee().createElement(Ee().Fragment,null,t?Ee().createElement(jt,{cellId:e.cellId}):Ee().createElement(Pt,{cellId:e.cellId}))};function kt(e){const t=(0,we.useSelector)((t=>I(t,e.cellId).descriptionId)),n=(0,we.useSelector)((t=>I(t,e.cellId).type)),r=(0,we.useSelector)((t=>I(t,e.cellId).visible)),l=(0,we.useSelector)((e=>A(e))).includes(j);return r||l?Ee().createElement(ke,{className:"ml-2 mr-2",borderOnHover:!0},Ee().createElement(ft,{cellId:e.cellId,index:e.index}),Ee().createElement(Te,null,Ee().createElement("div",{className:"mb-2"},Ee().createElement(bt,{fieldId:t})),"code-cell"===n&&Ee().createElement(xt,{cellId:e.cellId}),"multiple-choice-cell"===n&&Ee().createElement(Ft,{cellId:e.cellId}),"text-cell"===n&&Ee().createElement(Nt,{cellId:e.cellId}))):Ee().createElement(Ee().Fragment,null)}const Tt=({docId:e})=>{const t=(0,we.useSelector)((t=>v(t,e)));return Ee().createElement(Ee().Fragment,null,null==t?void 0:t.map(((e,t)=>Ee().createElement(kt,{cellId:e,index:t}))))};function Mt(e){const t=(0,we.useSelector)((e=>A(e))).includes(j),n=be.instance.getFactoryNamings().map((t=>Ee().createElement("button",{type:"button",className:"btn join-item grow",onClick:()=>e.addCell(t.id)},t.name)));return Ee().createElement(Ee().Fragment,null,t&&Ee().createElement("div",{className:"join flex mt-2"},n))}class At extends a.ReactWidget{render(){return Ce.createElement(we.Provider,{store:Y},Ce.createElement(_e,{changeField:this._model.changeField.bind(this._model),deleteCell:this._model.deleteCell.bind(this._model),addFieldToPropertyArray:this._model.addFieldToPropertyArray.bind(this._model),removeFieldFromPropertyArray:this._model.removeFieldFromPropertyArray.bind(this._model),changeCell:this._model.changeCell.bind(this._model),swapCellPosition:this._model.swapCellPosition.bind(this._model),swapInPropertyArray:this._model.swapInPropertyArray.bind(this._model)},Ce.createElement(yt,{executeCode:e=>fe.instance.executeCode(e,this._sessionContext),executeTest:e=>fe.instance.executeTest(e,this._sessionContext),verifyTest:e=>fe.instance.verifyTest(e,this._sessionContext)},Ce.createElement(Se,{hide:this._model.jupyterHubSetup}),Ce.createElement(Tt,{docId:this._model.docId}),Ce.createElement(Mt,{addCell:this._model.addCell.bind(this._model)}))))}constructor(e){super(),Object.defineProperty(this,"_model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_sessionContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._sessionContext=e.sessionContext,this._model=e.model,this.addClass("jp-puzzle-panel"),e.ready.then((()=>{this.update()}))}dispose(){this.isDisposed||(ge.Signal.clearData(this),super.dispose())}}class zt extends Ie.DocumentWidget{constructor(e){console.log("creating puzzle doc widget"),super(e)}dispose(){this.content.dispose(),super.dispose()}}class Dt extends Ie.ABCWidgetFactory{constructor(e){console.log("creating factory for puzzle doc"),super(e)}createNewWidget(e){return new zt({context:e,content:new At(e)})}}var Ht=n(9943);class Rt{constructor(e){Object.defineProperty(this,"defaultKernelName",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"defaultKernelLanguage",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"sharedModel",{enumerable:!0,configurable:!0,writable:!0,value:ve.create()}),Object.defineProperty(this,"_onSharedModelChanged",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>{t.stateChange&&t.stateChange.forEach((e=>{"dirty"===e.name?this.dirty=e.newValue:e.oldValue!==e.newValue&&this.triggerStateChange({newValue:void 0,oldValue:void 0,...e})}))}}),Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_readOnly",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_collaborationEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stateChanged",{enumerable:!0,configurable:!0,writable:!0,value:new ge.Signal(this)}),Object.defineProperty(this,"contentChanged",{enumerable:!0,configurable:!0,writable:!0,value:new ge.Signal(this)}),Object.defineProperty(this,"_userInformation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_jupyterHubSetup",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{collaborationEnabled:t,sharedModel:n,userInformation:r}=e;this._userInformation=r,this._jupyterHubSetup=e.jupyterHubSetup,Y.dispatch(M(r)),this._collaborationEnabled=!!t,this.sharedModel=n||ve.create(),this.sharedModel.changed.connect(this._onSharedModelChanged)}get collaborative(){return this._collaborationEnabled}get dirty(){return this._dirty}set dirty(e){const t=this._dirty;e!==t&&(this._dirty=e,this.triggerStateChange({name:"dirty",oldValue:t,newValue:e}))}get isDisposed(){return this._isDisposed}get readOnly(){return this._readOnly}set readOnly(e){if(e===this._readOnly)return;const t=this._readOnly;this._readOnly=e,this.triggerStateChange({name:"readOnly",oldValue:t,newValue:e})}get clientId(){return this.sharedModel.awareness.clientID}get docId(){return this.sharedModel.ydoc.guid}get jupyterHubSetup(){return this._jupyterHubSetup}addCell(e){var t,n;this.sharedModel.addCell(e,null!==(n=null===(t=this._userInformation.identity)||void 0===t?void 0:t.username)&&void 0!==n?n:"")}changeField(e){this.sharedModel.changeField(e)}deleteCell(e){this.sharedModel.deleteCell(e)}changeCell(e){this.sharedModel.changeCell(e)}swapCellPosition(e,t){this.sharedModel.swapCellPosition(e,t)}addFieldToPropertyArray(e,t,n){var r,l;this.sharedModel.addFieldToPropertyArray(e,t,n,null!==(l=null===(r=this._userInformation.identity)||void 0===r?void 0:r.username)&&void 0!==l?l:"")}removeFieldFromPropertyArray(e,t,n){this.sharedModel.removeFieldFromPropertyArray(e,t,n)}swapInPropertyArray(e,t,n,r){this.sharedModel.swapInPropertyArray(e,t,n,r)}getUserInformation(){return this._userInformation}get stateChanged(){return this._stateChanged}dispose(){this._isDisposed||(this._isDisposed=!0,ge.Signal.clearData(this))}toString(){const e=this.sharedModel.cells,t={cells:null!=e?e:[]};return JSON.stringify(t,null,2)}fromString(e){}toJSON(){return JSON.parse(this.toString()||"null")}fromJSON(e){this.fromString(JSON.stringify(e))}initialize(){}triggerStateChange(e){this._stateChanged.emit(e)}}class Bt{constructor(e){Object.defineProperty(this,"collaborative",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_userInformation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_jupyterHubSetup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this._userInformation=e.userInformation,this._jupyterHubSetup=e.jupyterHubSetup}get name(){return"puzzle-model"}get contentType(){return"puzzledoc"}get fileFormat(){return"text"}get isDisposed(){return this._disposed}dispose(){this._disposed=!0}preferredLanguage(e){return""}createNew(e){return e.userInformation=this._userInformation,e.jupyterHubSetup=this._jupyterHubSetup,new Rt(e)}}var Ut=n(8318),Vt=n.n(Ut),Lt=n(5879),Kt=n.n(Lt),Jt=n(237),Wt=n.n(Jt),qt=n(4862),Yt=n.n(qt),Gt=n(1050),$t=n.n(Gt),Qt=n(8495),Xt=n.n(Qt),Zt=n(5210),en={};en.styleTagTransform=Xt(),en.setAttributes=Yt(),en.insert=Wt().bind(null,"head"),en.domAPI=Kt(),en.insertStyleElement=$t(),Vt()(Zt.A,en),Zt.A&&Zt.A.locals&&Zt.A.locals;const tn="puzzle-editor",nn=new i.Token("puzzleDocTracker");var rn;!function(e){e.createNew="jupyterpuzzle:create-new-puzzle-file"}(rn||(rn={}));const ln={id:"collab_learning_extension:plugin",description:"A Collaborative Learning Extension for Jupyter Notebook",autoStart:!0,requires:[l.ILayoutRestorer,Ht.IFileBrowserFactory,a.ICommandPalette,s.ILauncher],optional:[r.ICollaborativeDrive],provides:nn,activate:async(e,t,n,r,l,i)=>{var s,o;const c=e.serviceManager.user;let d=!0;const u=await fetch("/hub/api/users/"+(null===(s=c.identity)||void 0===s?void 0:s.name),{headers:{Authorization:"token "+e.serviceManager.serverSettings.token}}).then((e=>e.json())).catch((e=>(d=!1,{groups:[]})));console.log("JupyterLab extension collab_learning_extension is activated!");const m=new a.WidgetTracker({namespace:"puzzle-documents"});if(t&&(console.log("reopen files"),t.restore(m,{command:"docmanager:open",args:e=>({path:e.context.path,factory:tn}),name:e=>e.context.path})),e.commands.addCommand(rn.createNew,{label:"New Puzzle File",caption:"Create a new Puzzle Playground",icon:e=>e.isPalette?void 0:ot.fileIcon,execute:async t=>{var r;const l=t.cwd||(null===(r=n.tracker.currentWidget)||void 0===r?void 0:r.model.path);let a=await e.serviceManager.contents.newUntitled({path:l,type:"file",ext:".puzzle"});return a=await e.serviceManager.contents.save(a.path,{...a,format:"text",size:void 0,content:'{"cells": {"allIds": [],"byId": {}},"fields": { "byId": {},"allIds": []}}'}),e.commands.execute("docmanager:open",{path:a.path,factory:tn})}}),r.addItem({command:rn.createNew,category:""}),l.add({command:rn.createNew,category:"Other",rank:1}),e.docRegistry.addFileType({name:"puzzle",displayName:"Puzzle",mimeTypes:["text/json","application/json"],extensions:[".puzzle"],fileFormat:"text",contentType:"puzzledoc"}),!i)return void console.error("collaborative mode inactive");{const e=()=>ve.create();i.sharedModelFactory.registerDocumentFactory("puzzledoc",e)}const p=new Bt({userInformation:{identity:c.identity,groups:null!==(o=null==u?void 0:u.groups)&&void 0!==o?o:[]},jupyterHubSetup:d});e.docRegistry.addModelFactory(p);const h=new Dt({name:tn,modelName:"puzzle-model",fileTypes:["puzzle"],defaultFor:["puzzle"],canStartKernel:!0,preferKernel:!0,shutdownOnClose:!0,autoStartDefault:!0});h.widgetCreated.connect(((e,t)=>{t.context.pathChanged.connect((()=>{m.save(t)})),m.add(t)})),e.docRegistry.addWidgetFactory(h)}}},5210:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(6551),l=n.n(r),a=n(1992),i=n.n(a)()(l());i.push([e.id,"// extracted by mini-css-extract-plugin\nexport {};",""]);const s=i}}]);